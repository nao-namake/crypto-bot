# CLAUDE.md - Phase 61é–‹ç™ºã‚¬ã‚¤ãƒ‰

**æœ€çµ‚æ›´æ–°**: 2026å¹´1æœˆ24æ—¥

---

## ã‚·ã‚¹ãƒ†ãƒ ç¾çŠ¶ï¼ˆPhase 61é€²è¡Œä¸­ï¼‰

### æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **Phase** | 61é€²è¡Œä¸­ï¼ˆæˆ¦ç•¥åˆ†æãƒ»æ”¹ä¿®ãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šæœ€é©åŒ–ï¼‰|
| **å‰Phase** | 60å®Œäº†ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ãƒ»Â¥86,639é”æˆï¼‰ |
| **æˆ¦ç•¥æ•°** | 6æˆ¦ç•¥ï¼ˆãƒ¬ãƒ³ã‚¸å‹4 + ãƒˆãƒ¬ãƒ³ãƒ‰å‹2ï¼‰ |
| **ç‰¹å¾´é‡æ•°** | 55ç‰¹å¾´é‡ï¼ˆ49åŸºæœ¬ + 6æˆ¦ç•¥ä¿¡å·ï¼‰ |
| **MLãƒ¢ãƒ‡ãƒ«** | ProductionEnsembleï¼ˆå‹•çš„é‡ã¿ãƒ»ã‚·ãƒ¼ãƒ‰å·®åˆ¥åŒ–ï¼‰â€»Stackingç„¡åŠ¹ |
| **åˆ†é¡æ–¹å¼** | çœŸã®3ã‚¯ãƒ©ã‚¹åˆ†é¡ï¼ˆBUY / HOLD / SELLï¼‰ |
| **è¨¼æ‹ é‡‘** | 50ä¸‡å††ï¼ˆPhase 57ã§10ä¸‡â†’50ä¸‡ã«å¤‰æ›´ï¼‰ |
| **å¹´åˆ©ç›®æ¨™** | 10%ï¼ˆDD 10%è¨±å®¹ï¼‰ |

### Phase 61 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| **61.1** | **ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šé–¾å€¤èª¿æ•´** | **tight_range/trendingé–¾å€¤ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åŒ–ãƒ»ç™ºç”Ÿç‡èª¿æ•´** |
| **61.2** | **ãƒ‡ãƒ—ãƒ­ã‚¤é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†** | **Dockerfile/main.py/pyproject.tomlç­‰Phase 61æ›´æ–°** |
| 61.3 | ADXTrendStrengthè©•ä¾¡ | ğŸ“‹äºˆå®šï¼ˆCIçµæœå¾…ã¡ï¼‰ |
| 61.4 | MACDEMACrossoveræ”¹å–„ | ğŸ“‹äºˆå®šï¼ˆCIçµæœå¾…ã¡ï¼‰ |

### Phase 60 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 60.1 | å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œ | 14ç®‡æ‰€è¨­å®šå¤‰æ›´ãƒ»å¹´åˆ©75%ç›®æ¨™ |
| 60.2 | ç¨¼åƒç‡è¨ˆç®—ä¿®æ­£ | 7åˆ†é–“éš”å¯¾å¿œãƒ»ç¨¼åƒç‡100%è¡¨ç¤º |
| 60.3 | Walk-Forwardæ¤œè¨¼å®Ÿè£… | éå­¦ç¿’æ’é™¤ãƒ»ä¿¡é ¼æ€§å‘ä¸Š |
| 60.4 | MLé‡ã¿å‰Šæ¸›ãƒ»æˆ¦ç•¥é‡è¦–è¨­å®š | ä¸€è‡´ç‡å‘ä¸Šãƒ»ä¸ä¸€è‡´ãƒšãƒŠãƒ«ãƒ†ã‚£å¼·åŒ– |
| 60.5 | MLãƒ¢ãƒ‡ãƒ«å·®åˆ¥åŒ– | ã‚·ãƒ¼ãƒ‰å·®åˆ¥åŒ–ãƒ»ç‰¹å¾´é‡ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ»å‹•çš„é‡ã¿è¨ˆç®— |
| 60.6 | Walk-Forwardå•é¡Œä¿®æ­£ | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†å¸ƒãƒã‚°ä¿®æ­£ãƒ»ç¨¼åƒç‡æ”¹å–„ |
| **60.7** | **pandas 3.0äº’æ›æ€§ä¿®æ­£** | **Â¥86,639ãƒ»PF 1.58é”æˆ** |

### Phase 59 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 59.1 | BBReversal normal_rangeç„¡åŠ¹åŒ– | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥åˆ†æã§0%å‹ç‡åˆ¤æ˜â†’é‡ã¿0.0ã« |
| 59.2 | ä¿¡é ¼åº¦é€†è»¢å•é¡Œå¯¾ç­– | high_confidenceé–¾å€¤å¼•ä¸Šã’ãƒ»penalty/bonusèª¿æ•´ |
| 59.3 | adjusted_confidenceè¨˜éŒ²ä¿®æ­£ | 6ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ãƒ»çµ±è¨ˆè¨˜éŒ²ã§penalty/bonusåŠ¹æœå¯è¦–åŒ– |
| 59.4-A | 2ç¥¨ãƒ«ãƒ¼ãƒ«ç„¡åŠ¹åŒ– | å‹ç‡53.8%ã€PF 1.55ã€æç›ŠÂ¥+44,506 |
| 59.4-B | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿èª¿æ•´ | âŒ å¤±æ•—â†’ãƒªãƒãƒ¼ãƒˆï¼ˆåˆ†æ•£åŠ¹æœä½ä¸‹ï¼‰ |
| 59.5 | ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ¼ãƒ‰åˆ†æä¿®æ­£ | æ³¨æ–‡ã‚¿ã‚¤ãƒ—åˆ¤å®šãƒ»å¹´è·¨ããƒ»ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä¿®æ­£ |
| **59.10** | **Stackingç„¡åŠ¹åŒ–ãƒ»PEæ¡ç”¨** | **âœ… éå»æœ€é«˜Â¥+54,526ã€PF 1.60ã€å¹´åˆ©22.9%ç›¸å½“** |

### Phase 58 æˆæœï¼ˆå‰Phaseï¼‰

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 58.1-58.4 | TP/SLç®¡ç†ãƒ»APIä¿®æ­£ | æ±ºæ¸ˆæ³¨æ–‡ç™ºè¡Œãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åŒæœŸãƒ»GETãƒ¡ã‚½ãƒƒãƒ‰ä¿®æ­£ |
| 58.5-58.6 | TP/SLç¸®å°ãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆç²¾åº¦ | 0.4%/0.3%ãƒ»æ‰‹æ•°æ–™/åˆ©æ¯ãƒ»åœŸæ—¥ç¸®å°62.5% |
| 58.7-58.8 | ç¨¼åƒç‡ãƒ»å­¤å…SLé˜²æ­¢ | BTC/JPYãƒ•ã‚£ãƒ«ã‚¿ãƒ»ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ |

### Phase 57 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 57.1-57.7 | ãƒªã‚¹ã‚¯è¨­å®šæœ€é©åŒ–ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ•´ç† | ãƒ¬ãƒãƒ¬ãƒƒã‚¸ä¿®æ­£ã€ãƒã‚¸ã‚·ãƒ§ãƒ³æ‹¡å¤§ã€ãƒ¬ãƒãƒ¼ãƒˆãƒã‚°ä¿®æ­£ |
| 57.10-57.14 | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒ©ã‚¤ãƒ–åˆ†ææ©Ÿèƒ½å¼·åŒ– | 84é …ç›®/35é …ç›®æ¨™æº–åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆ |

### 6æˆ¦ç•¥æ§‹æˆï¼ˆPhase 55.2æ›´æ–°ï¼‰

| åŒºåˆ† | æˆ¦ç•¥å | æ ¸å¿ƒãƒ­ã‚¸ãƒƒã‚¯ | 60æ—¥PF |
|------|--------|-------------|--------|
| **ãƒ¬ãƒ³ã‚¸å‹** | BBReversal | BBä¸Šä¸‹é™ã‚¿ãƒƒãƒ + RSIæ¥µç«¯å€¤ â†’ å¹³å‡å›å¸° | 1.32 |
| **ãƒ¬ãƒ³ã‚¸å‹** | StochasticDivergence | ä¾¡æ ¼ã¨Stochasticã®ä¹–é›¢æ¤œå‡º â†’ åè»¢ | 1.25 |
| **ãƒ¬ãƒ³ã‚¸å‹** | ATRBased | ATRæ¶ˆå°½ç‡70%ä»¥ä¸Š â†’ åè»¢æœŸå¾… | 1.16 |
| **ãƒ¬ãƒ³ã‚¸å‹** | DonchianChannel | ãƒãƒ£ãƒãƒ«ç«¯éƒ¨åè»¢ï¼ˆèµ¤å­—ãƒ»ç„¡åŠ¹åŒ–ï¼‰ | 0.85 |
| **ãƒˆãƒ¬ãƒ³ãƒ‰å‹** | MACDEMACrossover | MACDã‚¯ãƒ­ã‚¹ + EMAãƒˆãƒ¬ãƒ³ãƒ‰ç¢ºèª | 1.50 |
| **ãƒˆãƒ¬ãƒ³ãƒ‰å‹** | ADXTrendStrength | ADXâ‰¥25 + DIã‚¯ãƒ­ã‚¹ â†’ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼ | 1.01 |

### ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸é‡ã¿ã¥ã‘ï¼ˆPhase 59.4-Aï¼‰

```yaml
tight_range:
  BBReversal: 0.35          # ãƒ¬ãƒ³ã‚¸å‹ä¸»åŠ›
  StochasticReversal: 0.35  # ãƒ¬ãƒ³ã‚¸å‹ä¸»åŠ›
  ATRBased: 0.20            # è£œåŠ©
  DonchianChannel: 0.10     # è£œåŠ©
  ADXTrendStrength: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹ãƒ»ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸ä¸å‘ã
  MACDEMACrossover: 0.0     # ADX>25æ¡ä»¶ã§ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸ä¸ç™º
```

**è¨­è¨ˆæ€æƒ³**: åˆ†æ•£æŠ•è³‡ç¶­æŒã€‚59.4-Bã§ATRBasedä¸»åŠ›åŒ–ã‚’è©¦è¡Œã—ãŸãŒåˆ†æ•£åŠ¹æœä½ä¸‹ã§å¤±æ•—

### ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TP/SLè¨­å®šï¼ˆPhase 58.5/58.6æ›´æ–°ï¼‰

#### å¹³æ—¥è¨­å®š

| ãƒ¬ã‚¸ãƒ¼ãƒ  | TP | SL | RRæ¯” |
|---------|-----|-----|------|
| tight_range | 0.4% | 0.3% | 1.33:1 |
| normal_range | 0.6% | 0.4% | 1.50:1 |
| trending | 1.0% | 0.6% | 1.67:1 |

#### åœŸæ—¥è¨­å®šï¼ˆPhase 58.6è¿½åŠ ï¼‰

| ãƒ¬ã‚¸ãƒ¼ãƒ  | TP | SL | å¹³æ—¥æ¯” |
|---------|-----|-----|--------|
| tight_range | 0.25% | 0.2% | 62.5% |
| normal_range | 0.4% | 0.25% | 62.5% |
| trending | 0.6% | 0.4% | 60% |

**æ ¹æ‹ **: åŠå¹´åˆ†CSVåˆ†æã§åœŸæ—¥ATRã¯å¹³æ—¥ã®65%ï¼ˆåˆ°é”ç‡46%ï¼‰

### é‹ç”¨ä»•æ§˜

| é …ç›® | å€¤ |
|------|-----|
| **å¯¾è±¡** | bitbankä¿¡ç”¨å–å¼•ãƒ»BTC/JPYå°‚ç”¨ |
| **ç¨¼åƒ** | 24æ™‚é–“ï¼ˆGCP Cloud Runï¼‰ |
| **æœˆé¡ã‚³ã‚¹ãƒˆ** | 700-900å†† |
| **å®Ÿè¡Œé–“éš”** | 5åˆ† |

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºå‰å¾Œå¿…é ˆï¼‰

```bash
bash scripts/testing/checks.sh
# æœŸå¾…çµæœ: å…¨ãƒ†ã‚¹ãƒˆæˆåŠŸãƒ»64%+ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»flake8/black/isort PASS
```

### ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œ

```bash
# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰
bash scripts/management/run_paper.sh

# åœæ­¢
bash scripts/management/run_paper.sh stop

# çŠ¶æ³ç¢ºèª
bash scripts/management/run_paper.sh status

# ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼ˆç›´æ¥å®Ÿè¡Œï¼‰
python3 main.py --mode live
```

### GCPç¢ºèª

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³
TZ='Asia/Tokyo' gcloud run services describe crypto-bot-service-prod \
  --region=asia-northeast1 \
  --format="value(status.conditions[0].status,status.url)"

# æœ€æ–°ãƒªãƒ“ã‚¸ãƒ§ãƒ³
TZ='Asia/Tokyo' gcloud run revisions list \
  --service=crypto-bot-service-prod \
  --region=asia-northeast1 --limit=3

# ãƒ­ã‚°ç¢ºèª
gcloud logging read "resource.type=cloud_run_revision" --limit=10
```

### ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ¼ãƒ‰æ¨™æº–åˆ†æ

```bash
# åŸºæœ¬å®Ÿè¡Œï¼ˆ24æ™‚é–“åˆ†æï¼‰
python3 scripts/live/standard_analysis.py

# æœŸé–“æŒ‡å®šï¼ˆ48æ™‚é–“ï¼‰
python3 scripts/live/standard_analysis.py --hours 48

# å‡ºåŠ›å…ˆæŒ‡å®š
python3 scripts/live/standard_analysis.py --output results/live/
```

**39å›ºå®šæŒ‡æ¨™**:
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹ï¼ˆ5æŒ‡æ¨™ï¼‰: è¨¼æ‹ é‡‘ç¶­æŒç‡ã€åˆ©ç”¨å¯èƒ½æ®‹é«˜ã€ä½¿ç”¨ä¸­è¨¼æ‹ é‡‘ã€æœªå®Ÿç¾æç›Šã€ãƒãƒ¼ã‚¸ãƒ³ã‚³ãƒ¼ãƒ«çŠ¶æ…‹
- ãƒã‚¸ã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆ5æŒ‡æ¨™ï¼‰: ã‚ªãƒ¼ãƒ—ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°ã€æœªç´„å®šæ³¨æ–‡æ•°ã€æ³¨æ–‡å†…è¨³ã€ãƒ­ã‚¹ã‚«ãƒƒãƒˆä¾¡æ ¼
- å–å¼•å±¥æ­´åˆ†æï¼ˆ12æŒ‡æ¨™ï¼‰: å–å¼•æ•°ã€å‹ç‡ã€ç·æç›Šã€æˆ¦ç•¥åˆ¥çµ±è¨ˆã€TP/SLç™ºå‹•æ•°
- ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ï¼ˆ6æŒ‡æ¨™ï¼‰: APIå¿œç­”æ™‚é–“ã€ã‚¨ãƒ©ãƒ¼æ•°ã€ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ã€Containerå†èµ·å‹•æ•°
- TP/SLé©åˆ‡æ€§ï¼ˆ4æŒ‡æ¨™ï¼‰: TP/SLè·é›¢%ã€è¨­ç½®çŠ¶æ…‹
- ç¨¼åƒç‡ï¼ˆ3æŒ‡æ¨™ï¼‰: ç¨¼åƒæ™‚é–“ç‡ï¼ˆç›®æ¨™90%ï¼‰ã€ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ 
- å­¤å…SLç®¡ç†ï¼ˆ4æŒ‡æ¨™ï¼‰: æ¤œå‡ºæ•°ã€å‡¦ç†çµæœã€ãƒªãƒˆãƒ©ã‚¤çŠ¶æ³

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ç¢ºèª
wc -l src/backtest/data/historical/BTC_JPY_4h.csv   # æœŸå¾…: 1,081è¡Œ
wc -l src/backtest/data/historical/BTC_JPY_15m.csv  # æœŸå¾…: 17,272è¡Œ

# å®Ÿè¡Œ
bash scripts/backtest/run_backtest.sh
# ã¾ãŸã¯
python3 main.py --mode backtest
```

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ¨™æº–åˆ†æ

```bash
# CIã®æœ€æ–°ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœã‚’å–å¾—ã—ã¦åˆ†æ
python3 scripts/backtest/standard_analysis.py --from-ci

# ãƒ­ãƒ¼ã‚«ãƒ«JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æ
python3 scripts/backtest/standard_analysis.py results/backtest_result.json

# PhaseæŒ‡å®šä»˜ã
python3 scripts/backtest/standard_analysis.py --from-ci --phase 57.13
```

**84å›ºå®šæŒ‡æ¨™**: åŸºæœ¬æŒ‡æ¨™(10) + æˆ¦ç•¥åˆ¥(36) + MLäºˆæ¸¬åˆ¥(9) + ä¸€è‡´ç‡(4) + ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥(12) + æ™‚ç³»åˆ—(6) + æ”¹å–„ç¤ºå”†(8)

### æˆ¦ç•¥åˆ†æ

```bash
# æˆ¦ç•¥å€‹åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼ˆ60æ—¥ï¼‰
python3 scripts/analysis/strategy_performance_analysis.py
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ core/                   # åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ orchestration/      # TradingOrchestrator
â”‚   â”œâ”€â”€ config/             # è¨­å®šç®¡ç†ï¼ˆunified.yamlï¼‰
â”‚   â”œâ”€â”€ execution/          # å–å¼•å®Ÿè¡Œåˆ¶å¾¡
â”‚   â”œâ”€â”€ reporting/          # Discordé€±é–“ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â””â”€â”€ services/           # GracefulShutdownãƒ»MarketRegimeClassifier
â”œâ”€â”€ data/                   # Bitbank APIãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”œâ”€â”€ features/               # ç‰¹å¾´é‡ç”Ÿæˆï¼ˆ15æŒ‡æ¨™ï¼‰
â”œâ”€â”€ strategies/             # 6æˆ¦ç•¥ï¼ˆRegistry Patternï¼‰
â”œâ”€â”€ ml/                     # ProductionEnsembleï¼ˆ3ãƒ¢ãƒ‡ãƒ«ï¼‰
â”œâ”€â”€ trading/                # å–å¼•ç®¡ç†ï¼ˆ5å±¤åˆ†é›¢ï¼‰
â”‚   â”œâ”€â”€ core/               # enumsãƒ»types
â”‚   â”œâ”€â”€ balance/            # MarginMonitor
â”‚   â”œâ”€â”€ execution/          # ExecutionServiceãƒ»OrderStrategy
â”‚   â”œâ”€â”€ position/           # Trackerãƒ»Limitsãƒ»Cleanup
â”‚   â””â”€â”€ risk/               # IntegratedRiskManager
â”œâ”€â”€ backtest/               # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ 
â””â”€â”€ monitoring/             # é€±é–“ãƒ¬ãƒãƒ¼ãƒˆ

tax/                        # ç¨å‹™ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSQLiteãƒ»ç§»å‹•å¹³å‡æ³•ï¼‰
scripts/                    # é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
config/core/                # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¾¤
models/production/          # MLãƒ¢ãƒ‡ãƒ«ï¼ˆé€±æ¬¡æ›´æ–°ï¼‰
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
Bitbank APIï¼ˆ15åˆ†è¶³å–å¾—ï¼‰
    â†“
ç‰¹å¾´é‡ç”Ÿæˆï¼ˆ49åŸºæœ¬ç‰¹å¾´é‡ï¼‰
    â†“
6æˆ¦ç•¥å®Ÿè¡Œ â†’ æˆ¦ç•¥ä¿¡å·ï¼ˆ+6ç‰¹å¾´é‡ = 55ç‰¹å¾´é‡ï¼‰
    â†“
MLäºˆæ¸¬ï¼ˆensemble_full.pkl â†’ ä¿¡é ¼åº¦ï¼‰
    â†“
ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šï¼ˆtight_range / normal_range / trendingï¼‰
    â†“
å‹•çš„æˆ¦ç•¥é¸æŠï¼ˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿ã¥ã‘é©ç”¨ï¼‰
    â†“
ãƒªã‚¹ã‚¯è©•ä¾¡ï¼ˆKellyåŸºæº–ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™ï¼‰
    â†“
å–å¼•åˆ¤æ–­ï¼ˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TP/SLé©ç”¨ï¼‰
    â†“
å–å¼•å®Ÿè¡Œï¼ˆå®Œå…¨æŒ‡å€¤ãƒ»bitbank APIï¼‰
```

---

## è¨­å®šç®¡ç†

### 3å±¤è¨­å®šä½“ç³»

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `config/core/features.yaml` | æ©Ÿèƒ½ãƒˆã‚°ãƒ«è¨­å®š |
| `config/core/unified.yaml` | åŸºæœ¬è¨­å®šï¼ˆæ®‹é«˜ãƒ»å®Ÿè¡Œé–“éš”ç­‰ï¼‰ |
| `config/core/thresholds.yaml` | å‹•çš„å€¤ï¼ˆMLé–¾å€¤ãƒ»ãƒªã‚¹ã‚¯è¨­å®šãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿ãƒ»TP/SLï¼‰ |

### å‹•çš„æˆ¦ç•¥é¸æŠ

```yaml
# thresholds.yaml
dynamic_strategy_selection:
  enabled: true
  regime_strategy_mapping:
    tight_range:    # ãƒ¬ãƒ³ã‚¸å‹3æˆ¦ç•¥ã«é›†ä¸­
    normal_range:   # ãƒãƒ©ãƒ³ã‚¹å‹é…åˆ†
    trending:       # ãƒˆãƒ¬ãƒ³ãƒ‰å‹å„ªå…ˆ
    high_volatility: # å…¨æˆ¦ç•¥ç„¡åŠ¹åŒ–
```

### è¨­å®šå‚ç…§ãƒ‘ã‚¿ãƒ¼ãƒ³

```python
# ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢
from src.core.config.threshold_manager import get_threshold

sl_rate = get_threshold("risk.sl_min_distance_ratio", 0.02)
```

### ãƒ­ãƒ¼ã‚«ãƒ«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ

```
config/secrets/
â”œâ”€â”€ .env              # æ©Ÿå¯†æƒ…å ±ï¼ˆAPI ã‚­ãƒ¼ç­‰ï¼‰
â”œâ”€â”€ .env.example      # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â””â”€â”€ README.md         # è¨­å®šæ‰‹é †
```

**æ³¨æ„**: `.gitignore`ã§é™¤å¤–æ¸ˆã¿ã€‚Gitç®¡ç†å¤–ã€‚

### Secret Managerï¼ˆGCPï¼‰

å…·ä½“çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ä½¿ç”¨ï¼ˆ`key:3`ãªã©ï¼‰ã€‚`key:latest`ã¯ç¦æ­¢ã€‚

---

## é–‹ç™ºåŸå‰‡

### å“è³ªåŸºæº–

- **é–‹ç™ºå‰å¾Œ**: `bash scripts/testing/checks.sh`å¿…é ˆå®Ÿè¡Œ
- **ãƒ†ã‚¹ãƒˆ**: å…¨ãƒ†ã‚¹ãƒˆ100%æˆåŠŸç¶­æŒ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: 64%ä»¥ä¸Šç¶­æŒ
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: flake8 / black / isorté€šéå¿…é ˆ
- **CI/CD**: GitHub Actionsè‡ªå‹•å“è³ªã‚²ãƒ¼ãƒˆ

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

- **è¨­å®š**: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ãƒ»`get_threshold()`ãƒ‘ã‚¿ãƒ¼ãƒ³ä½¿ç”¨
- **ãƒ­ã‚°**: JSTæ™‚åˆ»ãƒ»æ§‹é€ åŒ–ãƒ­ã‚°ãƒ»Discordé€šçŸ¥å¯¾å¿œ
- **ãƒ†ã‚¹ãƒˆ**: å˜ä½“ãƒ»çµ±åˆãƒ»ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆå®Œå‚™
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£éµå®ˆ

### GCPç‰¹æœ‰ã®åˆ¶ç´„

| åˆ¶ç´„ | å¯¾ç­– |
|------|------|
| gVisor fork()åˆ¶é™ | RandomForest `n_jobs=1`å›ºå®š |
| Cloud Runã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | `signal.alarm`ç„¡åŠ¹åŒ– |
| Containerå†èµ·å‹• | èµ·å‹•æ™‚ãƒã‚¸ã‚·ãƒ§ãƒ³å¾©å…ƒï¼ˆPhase 53.6ï¼‰ |

### Gité‹ç”¨è¦å‰‡

| è¦å‰‡ | å†…å®¹ | ç†ç”± |
|------|------|------|
| **å…¨ä½“ã‚³ãƒŸãƒƒãƒˆå¿…é ˆ** | `git add .`ã‚’ä½¿ç”¨ | ã‚³ãƒŸãƒƒãƒˆæ¼ã‚Œé˜²æ­¢ |
| **å€‹åˆ¥addç¦æ­¢** | `git add <file>`ç¦æ­¢ | ä¿®æ­£æ¼ã‚Œã«ã‚ˆã‚‹ä¸å…·åˆé˜²æ­¢ |
| **ã‚³ãƒŸãƒƒãƒˆå‰ç¢ºèª** | `git status`å¿…é ˆ | æœªè¿½è·¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª |

```bash
# æ­£ã—ã„ã‚³ãƒŸãƒƒãƒˆæ‰‹é †
git status              # å¤‰æ›´å†…å®¹ç¢ºèª
git add .               # å…¨ä½“è¿½åŠ ï¼ˆå€‹åˆ¥addã¯ç¦æ­¢ï¼‰
git commit -m "..."     # ã‚³ãƒŸãƒƒãƒˆ
git push origin main    # ãƒ—ãƒƒã‚·ãƒ¥ â†’ CI/CDè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´¢å¼•

### docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [çµ±åˆé‹ç”¨ã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/çµ±åˆé‹ç”¨ã‚¬ã‚¤ãƒ‰.md) | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»æ—¥å¸¸é‹ç”¨ãƒ»ç·Šæ€¥å¯¾å¿œ |
| [GCPé‹ç”¨ã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/GCPé‹ç”¨ã‚¬ã‚¤ãƒ‰.md) | IAMæ¨©é™ãƒ»ãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— |
| [ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ä¸€è¦§.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ä¸€è¦§.md) | å®Ÿè£…æ©Ÿèƒ½ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ |
| [ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©.md) | åˆ¤æ–­åŸºæº–ãƒ»åˆ¶ç´„å®šç¾© |
| [bitbank_APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/bitbank_APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md) | APIä»•æ§˜ãƒ»ç½²åæ–¹å¼ |
| [ç¨å‹™å¯¾å¿œã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ç¨å‹™å¯¾å¿œã‚¬ã‚¤ãƒ‰.md) | ç¢ºå®šç”³å‘Šãƒ»ç§»å‹•å¹³å‡æ³• |

### docs/é–‹ç™ºå±¥æ­´/

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [SUMMARY.md](docs/é–‹ç™ºå±¥æ­´/SUMMARY.md) | **å…¨Phaseç·æ‹¬**ï¼ˆPhase 1-61ã‚µãƒãƒªãƒ¼ï¼‰ |
| Phase_55.md | æˆ¦ç•¥æœ€é©åŒ–ãƒ»é‡ã¿ã¥ã‘èª¿æ•´ |
| Phase_56.md | ãƒªã‚¹ã‚¯ç®¡ç†å•é¡Œå¯¾å¿œ |
| Phase_57.md | å¹´åˆ©10%ç›®æ¨™ãƒ»ãƒªã‚¹ã‚¯æœ€å¤§åŒ– |
| Phase_58.md | TP/SLç®¡ç†ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åŒæœŸä¿®æ­£ |
| Phase_59.md | MLæœ€é©åŒ–ãƒ»Stackingæ¤œè¨¼ |
| Phase_60.md | å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸æœ€é©åŒ–ãƒ»MLãƒ¢ãƒ‡ãƒ«å·®åˆ¥åŒ– |
| **Phase_61.md** | **æˆ¦ç•¥åˆ†æãƒ»ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ•´ç†ãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šæœ€é©åŒ–ï¼ˆé€²è¡Œä¸­ï¼‰** |

### docs/é–‹ç™ºè¨ˆç”»/

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [ToDo.md](docs/é–‹ç™ºè¨ˆç”»/ToDo.md) | é–‹ç™ºè¨ˆç”» |

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### é–‹ç™ºæ™‚å•é¡Œ

```bash
# å“è³ªãƒã‚§ãƒƒã‚¯è©³ç´°
bash scripts/testing/checks.sh

# importã‚¨ãƒ©ãƒ¼
python3 -c "import sys; sys.path.insert(0, '.'); from src.core.logger import CryptoBotLogger"

# è¨­å®šæ•´åˆæ€§ç¢ºèª
python3 scripts/testing/dev_check.py validate
```

### GCPå•é¡Œ

```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
gcloud logging read "resource.type=cloud_run_revision AND severity>=ERROR" --limit=20

# Containerå†èµ·å‹•ç¢ºèª
gcloud logging read "textPayload:\"Container called exit\"" --limit=10
```

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾ç­– |
|--------|------|------|
| `NoneType.__format__` | margin_ratioãŒNone | Phase 53.4ã§ä¿®æ­£æ¸ˆã¿ |
| `è¨¼æ‹ é‡‘ä¸è¶³: 0å††` | available_marginãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸å­˜åœ¨ | Phase 53.14ã§ä¿®æ­£æ¸ˆã¿ |
| `'BitbankClient' has no attribute 'get_active_orders'` | ãƒ¡ã‚½ãƒƒãƒ‰åä¸ä¸€è‡´ | `fetch_active_orders`ã‚’ä½¿ç”¨ |
| Container exit(1) | n_jobsä¸¦åˆ—å‡¦ç† or signal.alarm | GCPåˆ¶ç´„å¯¾ç­–é©ç”¨ç¢ºèª |
| bitbank API 20001 | GETç½²åã«/v1ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä¸è¶³ | Phase 53.2ã§ä¿®æ­£æ¸ˆã¿ |

---

## é–‹ç™ºé–‹å§‹å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

1. **æœ€æ–°çŠ¶æ³æŠŠæ¡**: Phase 61ãƒ»Phase_61.mdç¢ºèª
2. **å“è³ªãƒã‚§ãƒƒã‚¯**: `bash scripts/testing/checks.sh`å®Ÿè¡Œ
3. **è¨­å®šç¢ºèª**: features.yaml / unified.yaml / thresholds.yaml
4. **GCPç¢ºèª**: ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³ãƒ»æœ€æ–°ãƒªãƒ“ã‚¸ãƒ§ãƒ³
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: é–¢é€£ã™ã‚‹é‹ç”¨ã‚¬ã‚¤ãƒ‰ãƒ»é–‹ç™ºå±¥æ­´ç¢ºèª

---

**ğŸ“… æœ€çµ‚æ›´æ–°**: 2026å¹´1æœˆ24æ—¥ - **Phase 61.2å®Œäº†**ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿Phase 61æ›´æ–°ï¼‰
