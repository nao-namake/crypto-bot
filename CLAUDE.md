# CLAUDE.md - Phase 65é–‹ç™ºã‚¬ã‚¤ãƒ‰

**æœ€çµ‚æ›´æ–°**: 2026å¹´2æœˆ21æ—¥

---

## ã‚·ã‚¹ãƒ†ãƒ ç¾çŠ¶ï¼ˆPhase 65å®Œäº†ï¼‰

### æ¦‚è¦

| é …ç›® | å€¤ |
|------|-----|
| **Phase** | 65å®Œäº†ï¼ˆãƒ©ã‚¤ãƒ–å–å¼•é »åº¦å›å¾©ãƒ»ä¸‰é‡å£å¯¾ç­–ï¼‰|
| **å‰Phase** | 64å®Œäº†ï¼ˆ64.1-64.21: src/å…¨ä½“ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰ |
| **æœ€æ–°æˆæœ** | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ Â¥+102,135ï¼ˆPF 2.47ãƒ»å‹ç‡89.2%ãƒ»DD 0.94%ï¼‰ |
| **æˆ¦ç•¥æ•°** | 6æˆ¦ç•¥ï¼ˆãƒ¬ãƒ³ã‚¸å‹4 + ãƒˆãƒ¬ãƒ³ãƒ‰å‹2ï¼‰ |
| **ç‰¹å¾´é‡æ•°** | 55ç‰¹å¾´é‡ï¼ˆ49åŸºæœ¬ + 6æˆ¦ç•¥ä¿¡å·ï¼‰ |
| **MLãƒ¢ãƒ‡ãƒ«** | ProductionEnsembleï¼ˆå‹•çš„é‡ã¿ãƒ»ã‚·ãƒ¼ãƒ‰å·®åˆ¥åŒ–ï¼‰ |
| **åˆ†é¡æ–¹å¼** | çœŸã®3ã‚¯ãƒ©ã‚¹åˆ†é¡ï¼ˆBUY / HOLD / SELLï¼‰ |
| **è¨¼æ‹ é‡‘** | 50ä¸‡å††ï¼ˆPhase 57ã§10ä¸‡â†’50ä¸‡ã«å¤‰æ›´ï¼‰ |
| **å¹´åˆ©ç›®æ¨™** | 10%ï¼ˆDD 10%è¨±å®¹ï¼‰ |

### Phase 65 å®Œäº†ï¼ˆãƒ©ã‚¤ãƒ–å–å¼•é »åº¦å›å¾©ï¼‰

**ç›®çš„**: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ3.9ä»¶/æ—¥ï¼‰ã«å¯¾ã—ãƒ©ã‚¤ãƒ–æœ¬ç•ªã§24h+å–å¼•ã‚¼ãƒ­ â†’ ä¸‰é‡ã®é®æ–­å£ã‚’åŒ…æ‹¬çš„ã«å¯¾ç­–

| å¯¾ç­– | å†…å®¹ | å¤‰æ›´ |
|------|------|------|
| **å£3: APIé…å»¶** | ccxt rateLimitéä¿å®ˆ + é–¾å€¤å³æ ¼ã™ã | rateLimit 1000â†’200msã€critical 5000â†’15000ms |
| **å£2: ä¿¡é ¼åº¦é–¾å€¤** | min_strategy_confidence 0.25ã§åƒ…å·®é®æ–­ | 0.25â†’0.22 |
| **å£1: HOLDæ”¯é…** | BBReversalç„¡åŠ¹åŒ–ã§3æˆ¦ç•¥å…¨HOLD | BBReversal 0.0â†’0.15 + é‡ã¿å†é…åˆ† |
| **å¸°å±ãƒã‚°** | é‡ã¿0.0ã®æˆ¦ç•¥ãŒå¸°å±å…ˆã«ãªã‚‹ | max()ã‚­ãƒ¼ã«é‡ã¿è€ƒæ…®è¿½åŠ ï¼ˆ3ç®‡æ‰€ï¼‰ |

### Phase 64 å®Œäº†ï¼ˆsrc/å…¨ä½“ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼‰

**ç›®çš„**: TP/SLãƒ­ã‚¸ãƒƒã‚¯ã®ã‚·ãƒ³ãƒ—ãƒ«åŒ– + `src/` `config/` å…¨ä½“ã®éåº¦ãªè¤‡é›‘æ€§ã‚’æ•´ç†
**èƒŒæ™¯**: executor.pyï¼ˆ2,844è¡Œï¼‰ãƒ»stop_manager.pyï¼ˆ2,178è¡Œï¼‰ã‚’ä¸­å¿ƒã«TP/SLãƒ­ã‚¸ãƒƒã‚¯ãŒ3ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†æ•£ã€‚Phase 63.6ã§è¨­å®šãƒ‘ã‚¹typoãŒCRITICALãƒã‚°3ä»¶ã‚’å¼•ãèµ·ã“ã—ãŸã€‚

| Phase | å†…å®¹ | çŠ¶æ…‹ |
|-------|------|------|
| **64.1** | src/trading/ å®Œå…¨æ•´ç†ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰ç§»å‹•ãƒ»è²¬å‹™åˆ†é›¢ï¼‰ | âœ… å®Œäº† |
| **64.2** | TP/SLé…ç½®ä¿¡é ¼æ€§ã®æ ¹æœ¬ä¿®æ­£ï¼ˆä¾‹å¤–ã‚¹ãƒ¯ãƒ­ãƒ¼æ’é™¤ãƒ»ãƒªãƒˆãƒ©ã‚¤æ­£å¸¸åŒ–ï¼‰ | âœ… å®Œäº† |
| **64.3** | virtual_positionsäºŒé‡ç®¡ç†è§£æ¶ˆï¼ˆpropertyåŒ–ãƒ»å˜ä¸€ã‚½ãƒ¼ã‚¹åŒ–ï¼‰ | âœ… å®Œäº† |
| **64.4** | ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šé™¤ãƒ»é‡è¤‡çµ±åˆãƒ»æ•´åˆæ€§ãƒã‚°ä¿®æ­£ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° | âœ… å®Œäº† |
| **64.5** | `src/strategies/`ãƒ•ã‚©ãƒ«ãƒ€å…¨ä½“ç›£æŸ»ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— | âœ… å®Œäº† |
| **64.6** | `src/ml/`ãƒ•ã‚©ãƒ«ãƒ€ç›£æŸ»ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆ-70%å‰Šæ¸›ï¼‰ | âœ… å®Œäº† |
| **64.7** | `src/features/`ãƒ•ã‚©ãƒ«ãƒ€ç›£æŸ»ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆ-19%å‰Šæ¸›ï¼‰ | âœ… å®Œäº† |
| **64.8** | `src/data/`ãƒ•ã‚©ãƒ«ãƒ€ç›£æŸ»ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆ-12%å‰Šæ¸›ï¼‰ | âœ… å®Œäº† |
| **64.9** | stop_limitã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆèª¤ã‚­ãƒ£ãƒ³ã‚»ãƒ« + SLè·é›¢ä¸è¶³ã®ä¿®æ­£ | âœ… å®Œäº† |
| **64.10** | `src/backtest/`ãƒ•ã‚©ãƒ«ãƒ€ç›£æŸ»ãƒ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— | âœ… å®Œäº† |
| **64.11** | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ­ã‚°å‡ºåŠ›å…ˆçµ±åˆ + è“„ç©é˜²æ­¢ | âœ… å®Œäº† |
| **64.12** | SLå®‰å…¨ç¶²ã®æ ¹æœ¬ä¿®æ­£ï¼ˆ50062ç„¡é™ãƒ«ãƒ¼ãƒ—ãƒ»canceledæ”¾ç½®ãƒ»VPç„¡é™ãƒ«ãƒ¼ãƒ—ãƒ»å­¤å…SLï¼‰ | âœ… å®Œäº† |
| **64.13** | `src/core/config/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†ï¼ˆOptuna/paper_mode/æœªä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤ãƒ»-16%ï¼‰ | âœ… å®Œäº† |
| **64.14** | `src/core/execution/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†ï¼ˆãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šé™¤ãƒ»importãƒã‚°ä¿®æ­£ãƒ»-31è¡Œï¼‰ | âœ… å®Œäº† |
| **64.15** | `src/core/orchestration/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†ï¼ˆæœªä½¿ç”¨å±æ€§ãƒ»Protocolæ•´ç†ï¼‰ | âœ… å®Œäº† |
| **64.16** | `src/core/reporting/`æ•´ç† + Discordé€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ å…¨å‰Šé™¤ï¼ˆ-1,900è¡Œï¼‰ | âœ… å®Œäº† |
| **64.17** | `src/core/services/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†ï¼ˆãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰10ä»¶å‰Šé™¤ãƒ»-18%ï¼‰ | âœ… å®Œäº† |
| **64.18** | `src/core/state/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨å‰Šé™¤ï¼ˆå®Œå…¨æ­»ã‚³ãƒ¼ãƒ‰ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»-888è¡Œï¼‰ | âœ… å®Œäº† |
| **64.19** | `src/core/`ç›´ä¸‹ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†ï¼ˆexceptions/logger/__init__ + discord_notifyå…¨é™¤å»ãƒ»-670è¡Œï¼‰ | âœ… å®Œäº† |
| **64.20** | `src/core/`æœ€çµ‚ç›£æŸ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆæ­»å±æ€§4ä»¶ãƒ»æ­»ãƒ¡ã‚½ãƒƒãƒ‰2ä»¶ãƒ»Discordæ®‹éª¸9ç®‡æ‰€ãƒ»importçµ±åˆï¼‰ | âœ… å®Œäº† |
| **64.21** | `src/`æ¨ªæ–­æœ€çµ‚ç›£æŸ»ï¼ˆDiscordæ®‹éª¸å…¨é™¤å»ãƒ»ãƒ‡ãƒƒãƒ‰ãƒ‘ã‚¹ä¿®æ­£ãƒ»æ­»å±æ€§å‰Šé™¤ãƒ»READMEæ›¸ãç›´ã—ï¼‰ | âœ… å®Œäº† |

#### Phase 64.19 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/`ç›´ä¸‹ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **__init__.py** | å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ27ä»¶ãƒ»`__version__`ç­‰å…¨å‰Šé™¤ï¼ˆ103è¡Œâ†’1è¡Œï¼‰ |
| **exceptions.py** | ãƒ‡ãƒƒãƒ‰ä¾‹å¤–2ä»¶ï¼ˆConfigError/DataQualityErrorï¼‰+ ErrorSeverityç³»çµ±å…¨å‰Šé™¤ï¼ˆ-65è¡Œï¼‰ |
| **logger.py** | LogLevel enum + ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰3ä»¶ + `_discord_manager` + discord_notifyãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¨é™¤å»ï¼ˆ-117è¡Œï¼‰ |
| **discord_notifyé™¤å»** | logger.py 6ãƒ¡ã‚½ãƒƒãƒ‰ + å‘¼ã³å‡ºã—å…ƒ8ãƒ•ã‚¡ã‚¤ãƒ«40ç®‡æ‰€ã‹ã‚‰å®Œå…¨é™¤å» |
| **ãƒ†ã‚¹ãƒˆ** | test_exceptions/test_logger/test_trading_logger/test_orchestratorã‹ã‚‰å‰Šé™¤ã‚³ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆé™¤å»ï¼ˆ-317è¡Œï¼‰ |

#### Phase 64.21 å¤‰æ›´å†…å®¹ï¼ˆ`src/`æ¨ªæ–­æœ€çµ‚ç›£æŸ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **drawdown.pyãƒ‡ãƒƒãƒ‰ãƒ‘ã‚¹ä¿®æ­£** | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹`src/core/state/`â†’`data/`ï¼ˆ64.18ã§state/å‰Šé™¤æ¸ˆã¿ï¼‰+ unified.yamlåŒæœŸ |
| **Discordæ®‹éª¸ï¼ˆtrading/5ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰** | manager.py: `enable_discord_notifications`ãƒ»`_send_discord_notifications()`å…¨å‰Šé™¤ / \_\_init\_\_.pyãƒ»executor.pyãƒ»monitor.pyãƒ»bitbank_client.py: discordå¼•æ•°å‰Šé™¤ |
| **Discordè¨­å®šï¼ˆconfig/3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰** | features.yaml: 13è¡Œ / unified.yaml: 42è¡Œ / thresholds.yaml: 3ã‚­ãƒ¼å‰Šé™¤ |
| **config_classes.py** | `LoggingConfig.discord_enabled`ãƒ»`LoggingConfig.discord`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å‰Šé™¤ |
| **æ­»å±æ€§ï¼ˆexecutor.pyï¼‰** | `self.trade_history`ãƒ»`self.pending_limit_orders`å‰Šé™¤ï¼ˆå‚ç…§0ä»¶ï¼‰ |
| **`src/__init__.py`** | å…¨é¢æ›¸ãç›´ã—ï¼ˆ44è¡Œâ†’1è¡Œï¼‰ |
| **`src/README.md`** | å…¨é¢æ›¸ãç›´ã—ï¼ˆ337è¡Œâ†’54è¡Œãƒ»Phase 64æƒ…å ±ã«æ›´æ–°ï¼‰ |
| **ãƒ†ã‚¹ãƒˆ** | Discordé€šçŸ¥ãƒ†ã‚¹ãƒˆå‰Šé™¤ + ä½ç½®å¼•æ•°ä¿®æ­£ |

#### Phase 64.20 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/`æœ€çµ‚ç›£æŸ»ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **æ­»å±æ€§å‰Šé™¤** | `base_runner.execution_interval`ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°åŒ–ãƒ»`backtest_runner/paper_trading_runner.session_stats`å‰Šé™¤ãƒ»`live_trading_runner.total_pnl`å‰Šé™¤ |
| **æ­»ãƒ¡ã‚½ãƒƒãƒ‰å‰Šé™¤** | `RegimeType.from_string()`ãƒ»`RegimeType.is_range()`ï¼ˆå‘¼ã³å‡ºã—0ä»¶ï¼‰ |
| **Discordæ®‹éª¸** | 5ãƒ•ã‚¡ã‚¤ãƒ«9ç®‡æ‰€ã®Discordã‚³ãƒ¡ãƒ³ãƒˆãƒ»docstringé™¤å» |
| **import osçµ±åˆ** | logger.pyãƒ¡ã‚½ãƒƒãƒ‰å†…6ç®‡æ‰€â†’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å…ˆé ­1ç®‡æ‰€ |
| **docstringç°¡ç´ åŒ–** | `orchestration/__init__.py`ï¼ˆ14è¡Œâ†’1è¡Œï¼‰ |
| **ãƒ†ã‚¹ãƒˆ** | regime_typesæ­»ãƒ¡ã‚½ãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ3ä»¶ + æœªä½¿ç”¨pytest importå‰Šé™¤ |

#### Phase 64.18 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/state/`å…¨å‰Šé™¤ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **src/core/state/** | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå…¨å‰Šé™¤ï¼ˆdrawdown_persistence.py 286è¡Œ + __init__.py 30è¡Œ + README.md 140è¡Œ + ç©ºã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª3ä»¶ï¼‰ |
| **ãƒ†ã‚¹ãƒˆ** | test_drawdown_persistence.pyï¼ˆ432è¡Œï¼‰å‰Šé™¤ |
| **src/core/README.md** | state/ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ»å‚ç…§7ç®‡æ‰€å‰Šé™¤ |
| **èƒŒæ™¯** | Phase 29/49ã§è¨­è¨ˆã•ã‚ŒãŸãŒæœ¬ç•ªå‘¼ã³å‡ºã—0ä»¶ã€‚å®Ÿéš›ã®ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³æ°¸ç¶šåŒ–ã¯src/trading/risk/drawdown.pyãŒç‹¬è‡ªå®Ÿè£… |

#### Phase 64.17 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/services/`æ•´ç†ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **health_checker.py** | ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰2ä»¶å‰Šé™¤ï¼ˆ`check_service_status`ãƒ»`get_health_summary`ï¼‰+ docstringç°¡ç´ åŒ–ï¼ˆ-67è¡Œï¼‰ |
| **system_recovery.py** | ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰2ä»¶å‰Šé™¤ï¼ˆ`get_recovery_status`ãƒ»`reset_recovery_attempts`ï¼‰+ docstringç°¡ç´ åŒ–ï¼ˆ-27è¡Œï¼‰ |
| **trading_logger.py** | ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰3ä»¶å‰Šé™¤ï¼ˆ`format_performance_summary`ãƒ»`log_cycle_start`ãƒ»`log_cycle_end`ï¼‰+ docstringç°¡ç´ åŒ–ï¼ˆ-53è¡Œï¼‰ |
| **market_regime_classifier.py** | `get_regime_stats`ãƒ»`_calc_donchian_width`ãƒ»æœªä½¿ç”¨ä»£å…¥å‰Šé™¤ + docstringç°¡ç´ åŒ–ï¼ˆ-56è¡Œï¼‰ |
| **regime_types.py** | `get_description`ãƒ»`is_high_risk`å‰Šé™¤ + docstringç°¡ç´ åŒ–ï¼ˆ-22è¡Œï¼‰ |
| **å…¨9ãƒ•ã‚¡ã‚¤ãƒ«** | module docstringã€ŒPhase XXå®Œäº†ã€â†’ç°¡ç´ åŒ– |
| **README.md** | å…¨é¢æ›¸ãç›´ã—ï¼ˆ188è¡Œâ†’41è¡Œï¼‰ |
| **ãƒ†ã‚¹ãƒˆ** | å‰Šé™¤ãƒ¡ã‚½ãƒƒãƒ‰ãƒ†ã‚¹ãƒˆ23ä»¶é™¤å»ï¼ˆ-271è¡Œï¼‰ |

#### Phase 64.16 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/reporting/`æ•´ç† + Discordå…¨å‰Šé™¤ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **discord_notifier.py** | ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ï¼ˆ585è¡Œ: DiscordClientãƒ»DiscordManagerãƒ»notifyï¼‰ |
| **base_reporter.py** | ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰4ä»¶å‰Šé™¤ï¼ˆformat_markdown/format_discord_embed/save_markdown_report/get_report_summaryï¼‰+ Phaseå‚ç…§22â†’64ï¼ˆ-130è¡Œï¼‰ |
| **paper_trading_reporter.py** | `format_discord_notification()`å‰Šé™¤ + Phaseå‚ç…§22â†’64ï¼ˆ-55è¡Œï¼‰ |
| **executor.py / risk/manager.py / orchestrator.py** | DiscordManager importãƒ»åˆæœŸåŒ–ãƒ–ãƒ­ãƒƒã‚¯å…¨å‰Šé™¤ |
| **logger.py** | `set_discord_manager()`ãƒ»`set_discord_notifier()`å‰Šé™¤ï¼ˆ`_discord_manager=None`ã¯äº’æ›æ€§ä¿æŒï¼‰ |
| **ãƒ†ã‚¹ãƒˆ** | test_discord_notifier.py(973è¡Œ)ãƒ»test_discord_client.pyå‰Šé™¤ + executor/orchestrator/loggerã®Discordãƒ‘ãƒƒãƒå…¨é™¤å» |

#### Phase 64.15 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/orchestration/`æ•´ç†ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **ml_fallback.py** | DummyModelæœªä½¿ç”¨å±æ€§2ä»¶å‰Šé™¤ï¼ˆ`model_name`ãƒ»`n_features_`ï¼‰+ é–¢é€£importï¼ˆ-5è¡Œï¼‰ |
| **protocols.py** | `_create_hold_signal` privateãƒ¡ã‚½ãƒƒãƒ‰å‰Šé™¤ï¼ˆProtocolã«privateä¸é©åˆ‡ï¼‰ï¼ˆ-2è¡Œï¼‰ |
| **ml_adapter.py** | ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ–‡å­—åˆ—æ›´æ–°ï¼ˆ`Phase22_Optimized`â†’`Phase64`ï¼‰ |
| **orchestrator.py** | ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾å­¤å…ã‚³ãƒ¡ãƒ³ãƒˆå‰Šé™¤ï¼ˆ-1è¡Œï¼‰ |

#### Phase 64.13 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/config/`æ•´ç†ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **threshold_manager.py** | Optuna runtime override 4é–¢æ•° + æœªä½¿ç”¨ã‚¢ã‚¯ã‚»ã‚µ2é–¢æ•° + `_runtime_overrides`å¤‰æ•°å‰Šé™¤ï¼ˆ-54è¡Œï¼‰ |
| **__init__.py** | å†ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ11ä»¶å‰Šé™¤ + `reload_features_config`å‰Šé™¤ + `_create_generic_config`ã‚’dataclassãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ™ãƒ¼ã‚¹ã«æ”¹è‰¯ï¼ˆ-20è¡Œï¼‰ |
| **runtime_flags.py** | `paper_mode` + `reset_all_flags` + `get_all_flags`å‰Šé™¤ï¼ˆ-38è¡Œï¼‰ |
| **feature_manager.py** | æœªä½¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰3ä»¶ï¼ˆvalidate_features/get_feature_info/get_basic_feature_namesï¼‰+ ãƒ©ãƒƒãƒ‘ãƒ¼3ä»¶å‰Šé™¤ï¼ˆ-97è¡Œï¼‰ |
| **config_classes.py** | MLConfigæœªä½¿ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰6ä»¶å‰Šé™¤ï¼ˆmodel_update_check/meta_learning/min_confidence/market_features/performance_tracking/model_configï¼‰ |
| **thresholds.yaml** | mlå†…ãƒ‡ãƒƒãƒ‰ã‚­ãƒ¼5ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‰Šé™¤ï¼ˆ-30è¡Œï¼‰ |
| **unified.yaml** | `model_update_check`å‰Šé™¤ |

#### Phase 64.14 å¤‰æ›´å†…å®¹ï¼ˆ`src/core/execution/`æ•´ç†ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **backtest_runner.py** | ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚³ãƒ¼ãƒ‰4è¡Œ + `_setup_current_market_data()`ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰5è¡Œ + `_save_progress_report()`ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰21è¡Œå‰Šé™¤ï¼ˆ-30è¡Œï¼‰ |
| **live_trading_runner.py** | `from config import load_config`â†’`from ..config import load_config`ï¼ˆimportãƒã‚°ä¿®æ­£ï¼‰+ å†—é•·`get_threshold` importå‰Šé™¤ï¼ˆ-1è¡Œï¼‰ |

#### Phase 64.12 å¤‰æ›´å†…å®¹ï¼ˆSLå®‰å…¨ç¶²ã®æ ¹æœ¬ä¿®æ­£ï¼‰

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **ãƒã‚°1: 50062ç„¡é™ãƒ«ãƒ¼ãƒ—** | æˆè¡Œæ±ºæ¸ˆå‰ã«æ—¢å­˜æ³¨æ–‡å…¨ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆtp_sl_manager.pyï¼‰ |
| **ãƒã‚°2: canceledæ”¾ç½®** | closed/canceledåˆ†é›¢ã€canceledæ™‚sl_order_idã‚¯ãƒªã‚¢â†’Botå´SLãƒã‚§ãƒƒã‚¯å¾©æ´»ï¼ˆstop_manager.pyï¼‰ |
| **ãƒã‚°3: VPç„¡é™ãƒ«ãƒ¼ãƒ—** | SLã®ã¿æˆåŠŸã§ã‚‚VPè¿½åŠ ï¼ˆTPã¯æ¬¡å›å†è©¦è¡Œï¼‰ï¼ˆtp_sl_manager.pyï¼‰ |
| **ãƒã‚°4: å­¤å…SLèª¤æ¡ç”¨** | SLå¾©å…ƒãƒãƒƒãƒãƒ³ã‚°ã«ä¾¡æ ¼å¦¥å½“æ€§æ¤œè¨¼è¿½åŠ ï¼ˆ3%é–¾å€¤ï¼‰ï¼ˆposition_restorer.pyï¼‰ |
| **å®‰å…¨ç¶²: SLè¶…éãƒã‚§ãƒƒã‚¯** | timeoutåˆ†å²ã§SLä¾¡æ ¼è¶…éæ™‚ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œï¼ˆstop_manager.pyï¼‰ |
| **å®‰å…¨ç¶²: ã‚«ãƒãƒ¬ãƒƒã‚¸æ¤œè¨¼** | ä¾¡æ ¼ä¹–é›¢3%è¶…ã®SLæ³¨æ–‡ã‚’ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆç®—ã‹ã‚‰é™¤å¤–ï¼ˆtp_sl_manager.pyï¼‰ |

#### Phase 64.7-64.8 å¤‰æ›´å†…å®¹

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| **64.7 features** | ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆå‰Šé™¤ã€async/syncå…±é€šåŒ–ã€docstringä¿®æ­£ï¼ˆfeature_generator.py 960â†’778è¡Œï¼‰ |
| **64.8 data** | ãƒ‡ãƒƒãƒ‰ãƒ¡ã‚½ãƒƒãƒ‰2ä»¶å‰Šé™¤ã€4h/15mç›´æ¥APIçµ±åˆï¼ˆbitbank_client.py 2,104â†’1,861è¡Œï¼‰ |

#### Phase 64.6 å¤‰æ›´å†…å®¹

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| æœªä½¿ç”¨ã‚¯ãƒ©ã‚¹å‰Šé™¤ | VotingSystemãƒ»EnsembleModelãƒ»StackingEnsembleãƒ»VotingMethodï¼ˆensemble.py 1,070è¡Œâ†’200è¡Œï¼‰ |
| ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ | model_manager.pyï¼ˆ337è¡Œï¼‰ãƒ»meta_learning.pyï¼ˆ669è¡Œï¼‰ |
| ml_loader.pyç°¡ç´ åŒ– | Stackingé–¢é€£ã‚³ãƒ¼ãƒ‰~160è¡Œå‰Šé™¤ãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯3æ®µéšâ†’2æ®µéš |
| trading_cycle_manager.py | Meta-LearningåˆæœŸåŒ–å‰Šé™¤ãƒ»`_get_dynamic_weights`ç°¡ç´ åŒ– |
| ãƒ†ã‚¹ãƒˆæ•´ç† | ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«4ä»¶å‰Šé™¤ãƒ»4ä»¶ä¿®æ­£ |
| **src/ml/ åˆè¨ˆ** | **2,712è¡Œâ†’813è¡Œï¼ˆ-70%ï¼‰** |

#### Phase 64.4 å¤‰æ›´å†…å®¹

| å¤‰æ›´ | å†…å®¹ |
|------|------|
| ãƒ‡ãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šé™¤ | æœªä½¿ç”¨å®šæ•°4ä»¶ãƒ»`_check_tp_sl_orders_exist()`ãƒ¡ã‚½ãƒƒãƒ‰å‰Šé™¤ |
| æ•´åˆæ€§ãƒã‚°ä¿®æ­£ | position_restorer TP/SLæ¤œå‡ºã‚’booleanâ†’æ•°é‡ãƒ™ãƒ¼ã‚¹95%ã‚«ãƒãƒ¬ãƒƒã‚¸ã«çµ±ä¸€ |
| é‡è¤‡çµ±åˆ | TP/SLä¾¡æ ¼è¨ˆç®—â†’`calculate_recovery_tp_sl_prices()`ã€SLè¶…éâ†’`place_sl_or_market_close()` |
| regimeä¸çµ±ä¸€ä¿®æ­£ | `_place_missing_tp_sl`ã®regimeã‚’normal_rangeâ†’tight_rangeï¼ˆå®‰å…¨æ–¹å‘ï¼‰ |
| ãƒ©ãƒƒãƒ‘ãƒ¼å‰Šé™¤ | cleanupå§”è­²ãƒ¡ã‚½ãƒƒãƒ‰2ä»¶å‰Šé™¤â†’executor.pyã‹ã‚‰position_restorerç›´æ¥å‘¼å‡º |
| ãƒ¬ã‚¤ãƒ¤ãƒ¼ç°¡ç´ åŒ– | `_verify_and_rebuild_tp_sl` 169è¡Œâ†’30è¡Œï¼ˆensure_tp_slã«å§”è­²ï¼‰ |

#### Phase 64.2 ä¿®æ­£åŠ¹æœ

```
Before: APIå¤±æ•— â†’ Noneè¿”å´ â†’ 3å›ç©ºå›ã‚Š â†’ rollbackï¼ˆãƒªãƒˆãƒ©ã‚¤ç„¡æ„å‘³ï¼‰
After:  APIå¤±æ•— â†’ ä¾‹å¤– â†’ 1sâ†’2sâ†’4sãƒªãƒˆãƒ©ã‚¤ â†’ æœ€çµ‚å¤±æ•—â†’rollbackï¼ˆãƒªãƒˆãƒ©ã‚¤æ­£å¸¸å‹•ä½œï¼‰

Before: å¾©æ—§å¤±æ•— â†’ virtual_positionsã«Noneã‚¨ãƒ³ãƒˆãƒªè¿½åŠ  â†’ ã‚¾ãƒ³ãƒ“åŒ–
After:  å¾©æ—§å¤±æ•— â†’ è¿½åŠ ã—ãªã„ â†’ 10åˆ†/30åˆ†å¾Œã®å®šæœŸãƒã‚§ãƒƒã‚¯ã§å†è©¦è¡Œ
```

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆï¼ˆPhase 64.4å®Œäº†æ™‚ç‚¹ï¼‰

```
src/trading/execution/
â”œâ”€â”€ executor.py           ~1,300è¡Œ  ã‚¨ãƒ³ãƒˆãƒªãƒ¼å®Ÿè¡Œã«é›†ä¸­
â”œâ”€â”€ stop_manager.py       ~1,525è¡Œ  TP/SLåˆ°é”åˆ¤å®šãƒ»æ±ºæ¸ˆã®ã¿
â”œâ”€â”€ order_strategy.py       ~770è¡Œ  æ³¨æ–‡ã‚¿ã‚¤ãƒ—æ±ºå®šãƒ»Makerå®Ÿè¡Œãƒ»æœ€å°ãƒ­ãƒƒãƒˆä¿è¨¼
â”œâ”€â”€ tp_sl_config.py         ~120è¡Œ  è¨­å®šãƒ‘ã‚¹å®šæ•°
â”œâ”€â”€ tp_sl_manager.py      ~1,250è¡Œ  TP/SLé…ç½®ãƒ»æ¤œè¨¼ãƒ»å¾©æ—§ãƒ»è¨ˆç®—ãƒ»ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯çµ±åˆ
â””â”€â”€ position_restorer.py    ~560è¡Œ  ãƒã‚¸ã‚·ãƒ§ãƒ³å¾©å…ƒãƒ»å­¤å…ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—çµ±åˆ
```

### Phase 63 æˆæœã‚µãƒãƒªãƒ¼ï¼ˆâœ…å®Œäº†ï¼‰

| Phase | å†…å®¹ | åŠ¹æœ |
|-------|------|------|
| **63 Bug 1-6** | stop_limitæ¤œå‡ºãƒ»ãƒãƒƒãƒãƒ³ã‚°ç·©å’Œãƒ»asyncioå»ƒæ­¢ç­‰ | TP/SLç®¡ç†å®‰å®šåŒ– |
| **63.2** | å›ºå®šé‡‘é¡TPç´¯ç©æ‰‹æ•°æ–™ãƒã‚°ä¿®æ­£ | TPè†¨å¼µ+48%â†’æ­£å¸¸åŒ– |
| **63.4 Bug 1-5** | SLå®‰å…¨ãƒã‚§ãƒƒã‚¯ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³å¾©å…ƒæ”¹å–„ãƒ»é‡è¤‡é˜²æ­¢ | é‹ç”¨å®‰å…¨æ€§å‘ä¸Š |
| **63.5** | TP/SLå®šæœŸãƒã‚§ãƒƒã‚¯å®Ÿè£…ï¼ˆ10åˆ†é–“éš”ï¼‰ | TP/SLæ¬ æè‡ªå‹•æ¤œçŸ¥ãƒ»å¾©æ—§ |
| **63.6 Bug 1-3** | è¨­å®šãƒ‘ã‚¹ä¿®æ­£ï¼ˆCRITICALï¼‰ãƒ»restoredãƒ•ã‚£ãƒ«ã‚¿å‰Šé™¤ | è¨­å®šãƒ‘ã‚¹typoãƒã‚°æ ¹çµ¶ |

### Phase 62 ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ€çµ‚çµæœ

| æŒ‡æ¨™ | å€¤ |
|------|-----|
| **æœŸé–“** | 2025-07-01 ~ 2025-12-31ï¼ˆ6ãƒ¶æœˆï¼‰ |
| **ç·å–å¼•æ•°** | 303ä»¶ |
| **å‹ç‡** | 59.7% |
| **ç·æç›Š** | **Â¥+119,815** |
| **PF** | **1.65** |
| **æœ€å¤§DD** | Â¥13,352 (2.14%) |
| **å¹´åˆ©æ›ç®—** | **ç´„24%** |

### æ‰‹æ•°æ–™è¨­å®šï¼ˆPhase 62.19: 2026å¹´2æœˆ2æ—¥æ”¹å®šå¯¾å¿œï¼‰

| é …ç›® | ã‚¨ãƒ³ãƒˆãƒªãƒ¼ | TPæ±ºæ¸ˆ | SLæ±ºæ¸ˆ |
|------|----------|--------|--------|
| æ‰‹æ•°æ–™ç‡ | 0%ï¼ˆMakerï¼‰ | 0%ï¼ˆMakerï¼‰ | 0.1%ï¼ˆTakerï¼‰ |
| **å¾€å¾©ï¼ˆTPæ™‚ï¼‰** | **0%** | - | - |
| **å¾€å¾©ï¼ˆSLæ™‚ï¼‰** | **0.1%** | - | - |

**æ”¹å®šå‰ï¼ˆã€œ2/1ï¼‰**: Maker -0.02%ï¼ˆãƒªãƒ™ãƒ¼ãƒˆï¼‰ã€Taker 0.12%
**æ”¹å®šå¾Œï¼ˆ2/2ã€œï¼‰**: Maker 0%ï¼ˆç„¡æ–™ï¼‰ã€Taker 0.1%

### SLè¨­å®šï¼ˆPhase 62.14-62.17ï¼‰

| è¨­å®š | å€¤ | å‚™è€ƒ |
|------|-----|------|
| æ³¨æ–‡ã‚¿ã‚¤ãƒ— | `stop_limit`ï¼ˆæŒ‡å€¤ï¼‰ | ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸æŠ‘åˆ¶ |
| slippage_buffer | 0.2% | ç´„å®šç¢ºå®Ÿæ€§ç¢ºä¿ |
| tight_range SLå¹… | 0.4% | 0.3%ã‹ã‚‰æ‹¡å¤§ |
| skip_bot_monitoring | true | Botå´SLç›£è¦–ã‚¹ã‚­ãƒƒãƒ—ï¼ˆ62.17ï¼‰ |
| stop_limit_timeout | 300ç§’ | ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆ62.17ï¼‰ |

### Phase 62 æˆæœï¼ˆâœ…å®Œäº†ï¼‰

| åŒºåˆ† | å†…å®¹ | åŠ¹æœ |
|------|------|------|
| **Makeræˆ¦ç•¥** | ã‚¨ãƒ³ãƒˆãƒªãƒ¼/TPæ±ºæ¸ˆã§Makerç´„å®š | å¾€å¾©æ‰‹æ•°æ–™0%ï¼ˆMakerç„¡æ–™åŒ–å¯¾å¿œï¼‰ |
| **SLæ”¹å–„** | é€†æŒ‡å€¤æŒ‡å€¤åŒ– + å¹…0.4% | ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸æŠ‘åˆ¶ãƒ»å‹ç‡æ”¹å–„ |
| **æ‰‹æ•°æ–™æ”¹å®šå¯¾å¿œ** | 2026å¹´2æœˆ2æ—¥æ”¹å®šå¯¾å¿œ | Maker 0%ãƒ»Taker 0.1%ã«æ›´æ–° |
| **TP/SLæ¬ æè‡ªå‹•å¾©æ—§** | 10åˆ†å¾Œæ¤œè¨¼ãƒ»è‡ªå‹•å†æ§‹ç¯‰ | APIã‚¨ãƒ©ãƒ¼æ™‚ã®ä¿è­·å¼·åŒ– |

### Phase 61 æˆæœï¼ˆâœ…å®Œäº†ï¼‰

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| **61.5** | **ä½ä¿¡é ¼åº¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼å¯¾ç­–** | **âœ… PF 1.58â†’1.78ã€æç›Š+16%ï¼ˆÂ¥100,629é”æˆï¼‰** |
| **61.7** | **å›ºå®šé‡‘é¡TPå®Ÿè£…** | **âœ… ç´”åˆ©ç›Š1,000å††ä¿è¨¼ãƒ»æ‰‹æ•°æ–™è€ƒæ…®è¨ˆç®—** |
| **61.8** | **å›ºå®šé‡‘é¡TPãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå¯¾å¿œ** | **âœ… SignalBuilderã«position_amounté€£æº** |
| **61.9** | **TP/SLè‡ªå‹•åŸ·è¡Œæ¤œçŸ¥** | **âœ… SLç´„å®šãƒ­ã‚°è¨˜éŒ²ãƒ»åˆ†æå¯èƒ½åŒ–** |
| **61.10** | **ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºçµ±ä¸€** | **âœ… ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒ©ã‚¤ãƒ–äº’æ›Dynamic Sizing** |
| **61.12** | **å–å¼•å±¥æ­´exitè¨˜éŒ²è¿½åŠ ** | **âœ… TP/SLè‡ªå‹•åŸ·è¡Œæ™‚ã«pnlè¨˜éŒ²ãƒ»å‹ç‡è¨ˆç®—å¯èƒ½åŒ–** |

### Phase 60 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 60.1 | å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œ | 14ç®‡æ‰€è¨­å®šå¤‰æ›´ãƒ»å¹´åˆ©75%ç›®æ¨™ |
| 60.2 | ç¨¼åƒç‡è¨ˆç®—ä¿®æ­£ | 7åˆ†é–“éš”å¯¾å¿œãƒ»ç¨¼åƒç‡100%è¡¨ç¤º |
| 60.3 | Walk-Forwardæ¤œè¨¼å®Ÿè£… | éå­¦ç¿’æ’é™¤ãƒ»ä¿¡é ¼æ€§å‘ä¸Š |
| 60.4 | MLé‡ã¿å‰Šæ¸›ãƒ»æˆ¦ç•¥é‡è¦–è¨­å®š | ä¸€è‡´ç‡å‘ä¸Šãƒ»ä¸ä¸€è‡´ãƒšãƒŠãƒ«ãƒ†ã‚£å¼·åŒ– |
| 60.5 | MLãƒ¢ãƒ‡ãƒ«å·®åˆ¥åŒ– | ã‚·ãƒ¼ãƒ‰å·®åˆ¥åŒ–ãƒ»ç‰¹å¾´é‡ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ»å‹•çš„é‡ã¿è¨ˆç®— |
| 60.6 | Walk-Forwardå•é¡Œä¿®æ­£ | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†å¸ƒãƒã‚°ä¿®æ­£ãƒ»ç¨¼åƒç‡æ”¹å–„ |
| **60.7** | **pandas 3.0äº’æ›æ€§ä¿®æ­£** | **Â¥86,639ãƒ»PF 1.58é”æˆ** |

### Phase 59 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 59.1 | BBReversal normal_rangeç„¡åŠ¹åŒ– | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥åˆ†æã§0%å‹ç‡åˆ¤æ˜â†’é‡ã¿0.0ã« |
| 59.2 | ä¿¡é ¼åº¦é€†è»¢å•é¡Œå¯¾ç­– | high_confidenceé–¾å€¤å¼•ä¸Šã’ãƒ»penalty/bonusèª¿æ•´ |
| 59.3 | adjusted_confidenceè¨˜éŒ²ä¿®æ­£ | 6ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£ãƒ»çµ±è¨ˆè¨˜éŒ²ã§penalty/bonusåŠ¹æœå¯è¦–åŒ– |
| 59.4-A | 2ç¥¨ãƒ«ãƒ¼ãƒ«ç„¡åŠ¹åŒ– | å‹ç‡53.8%ã€PF 1.55ã€æç›ŠÂ¥+44,506 |
| 59.4-B | ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿èª¿æ•´ | âŒ å¤±æ•—â†’ãƒªãƒãƒ¼ãƒˆï¼ˆåˆ†æ•£åŠ¹æœä½ä¸‹ï¼‰ |
| 59.5 | ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ¼ãƒ‰åˆ†æä¿®æ­£ | æ³¨æ–‡ã‚¿ã‚¤ãƒ—åˆ¤å®šãƒ»å¹´è·¨ããƒ»ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä¿®æ­£ |
| **59.10** | **Stackingç„¡åŠ¹åŒ–ãƒ»PEæ¡ç”¨** | **âœ… éå»æœ€é«˜Â¥+54,526ã€PF 1.60ã€å¹´åˆ©22.9%ç›¸å½“** |

### Phase 58 æˆæœï¼ˆå‰Phaseï¼‰

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 58.1-58.4 | TP/SLç®¡ç†ãƒ»APIä¿®æ­£ | æ±ºæ¸ˆæ³¨æ–‡ç™ºè¡Œãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åŒæœŸãƒ»GETãƒ¡ã‚½ãƒƒãƒ‰ä¿®æ­£ |
| 58.5-58.6 | TP/SLç¸®å°ãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆç²¾åº¦ | 0.4%/0.3%ãƒ»æ‰‹æ•°æ–™/åˆ©æ¯ãƒ»åœŸæ—¥ç¸®å°62.5% |
| 58.7-58.8 | ç¨¼åƒç‡ãƒ»å­¤å…SLé˜²æ­¢ | BTC/JPYãƒ•ã‚£ãƒ«ã‚¿ãƒ»ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ |

### Phase 57 æˆæœ

| Phase | å†…å®¹ | æˆæœ |
|-------|------|------|
| 57.1-57.7 | ãƒªã‚¹ã‚¯è¨­å®šæœ€é©åŒ–ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ•´ç† | ãƒ¬ãƒãƒ¬ãƒƒã‚¸ä¿®æ­£ã€ãƒã‚¸ã‚·ãƒ§ãƒ³æ‹¡å¤§ã€ãƒ¬ãƒãƒ¼ãƒˆãƒã‚°ä¿®æ­£ |
| 57.10-57.14 | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒ©ã‚¤ãƒ–åˆ†ææ©Ÿèƒ½å¼·åŒ– | 84é …ç›®/35é …ç›®æ¨™æº–åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆ |

### 6æˆ¦ç•¥æ§‹æˆï¼ˆPhase 62.2æ›´æ–°ï¼‰

| åŒºåˆ† | æˆ¦ç•¥å | æ ¸å¿ƒãƒ­ã‚¸ãƒƒã‚¯ | å‚™è€ƒ |
|------|--------|-------------|------|
| **ãƒ¬ãƒ³ã‚¸å‹** | BBReversal | BBä½ç½®ä¸»å° + RSIãƒœãƒ¼ãƒŠã‚¹ â†’ å¹³å‡å›å¸° | Phase 62.2: ANDâ†’BBä¸»å° |
| **ãƒ¬ãƒ³ã‚¸å‹** | StochasticDivergence | ä¾¡æ ¼ã¨Stochasticã®ä¹–é›¢æ¤œå‡º â†’ åè»¢ | Phase 62.2: ä¾¡æ ¼å¤‰åŒ–ãƒ•ã‚£ãƒ«ã‚¿è¿½åŠ  |
| **ãƒ¬ãƒ³ã‚¸å‹** | ATRBased | ATRæ¶ˆå°½ç‡70%ä»¥ä¸Š â†’ åè»¢æœŸå¾… | ä¸»åŠ›æˆ¦ç•¥ |
| **ãƒ¬ãƒ³ã‚¸å‹** | DonchianChannel | ãƒãƒ£ãƒãƒ«ç«¯éƒ¨åè»¢ + RSIãƒœãƒ¼ãƒŠã‚¹ | Phase 62.2: RSIãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ |
| **ãƒˆãƒ¬ãƒ³ãƒ‰å‹** | MACDEMACrossover | MACDã‚¯ãƒ­ã‚¹ + EMAãƒˆãƒ¬ãƒ³ãƒ‰ç¢ºèª | - |
| **ãƒˆãƒ¬ãƒ³ãƒ‰å‹** | ADXTrendStrength | ADXâ‰¥25 + DIã‚¯ãƒ­ã‚¹ â†’ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼ | - |

### ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸é‡ã¿ã¥ã‘ï¼ˆPhase 65ï¼‰

```yaml
tight_range:
  BBReversal: 0.15          # Phase 65: å†æœ‰åŠ¹åŒ–ï¼ˆ62.2ã§BBä¸»å°ãƒ­ã‚¸ãƒƒã‚¯å¤‰æ›´æ¸ˆã¿ï¼‰
  StochasticReversal: 0.30  # ãƒ¬ãƒ³ã‚¸å‹ä¸»åŠ›
  ATRBased: 0.30            # ãƒ¬ãƒ³ã‚¸å‹ä¸»åŠ›
  DonchianChannel: 0.25     # è£œåŠ©
  ADXTrendStrength: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹ãƒ»ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸ä¸å‘ã
  MACDEMACrossover: 0.0     # ADX>25æ¡ä»¶ã§ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸ä¸ç™º
```

**è¨­è¨ˆæ€æƒ³**: Phase 65ã§BBReversalå†æœ‰åŠ¹åŒ–ã€‚Phase 62.2ã§BBä¸»å°ãƒ­ã‚¸ãƒƒã‚¯ã«å¤‰æ›´æ¸ˆã¿ã§ã€GCPãƒ­ã‚°ã§BUY(0.550)é€£ç¶šå‡ºåŠ›ã‚’ç¢ºèªã€‚HOLDæ”¯é…è§£æ¶ˆã®ãŸã‚é‡ã¿0.15ã§æœ‰åŠ¹åŒ–ã€‚

### ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TP/SLè¨­å®šï¼ˆPhase 63.3æ›´æ–°ï¼‰

#### å¹³æ—¥è¨­å®š

| ãƒ¬ã‚¸ãƒ¼ãƒ  | TP | SL | RRæ¯” |
|---------|-----|-----|------|
| tight_range | 0.4% | 0.4% | 1.00:1 |
| normal_range | 1.0% | 0.7% | 1.43:1 |
| trending | 1.5% | 1.0% | 1.50:1 |

#### åœŸæ—¥è¨­å®šï¼ˆPhase 58.6è¿½åŠ ï¼‰

| ãƒ¬ã‚¸ãƒ¼ãƒ  | TP | SL | å¹³æ—¥æ¯” |
|---------|-----|-----|--------|
| tight_range | 0.25% | 0.25% | 62.5% |
| normal_range | 0.65% | 0.45% | 65% |
| trending | 1.0% | 0.65% | 67% |

**æ ¹æ‹ **: åŠå¹´åˆ†CSVåˆ†æã§åœŸæ—¥ATRã¯å¹³æ—¥ã®65%ï¼ˆåˆ°é”ç‡46%ï¼‰

#### å›ºå®šé‡‘é¡TPï¼ˆPhase 61.7è¿½åŠ ãƒ»Phase 63.2ç´¯ç©æ‰‹æ•°æ–™ãƒã‚°ä¿®æ­£ï¼‰

| è¨­å®š | å€¤ | èª¬æ˜ |
|------|-----|------|
| enabled | true | å›ºå®šé‡‘é¡ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹ |
| target_net_profit | 500 | ç›®æ¨™ç´”åˆ©ç›Šï¼ˆå††ï¼‰â€»1000å††ã‹ã‚‰å¤‰æ›´ |
| include_entry_fee | true | ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‰‹æ•°æ–™ã‚’è€ƒæ…®ï¼ˆMaker 0%ï¼‰ |
| include_exit_fee_rebate | true | æ±ºæ¸ˆæ‰‹æ•°æ–™ã‚’è€ƒæ…®ï¼ˆTPæ±ºæ¸ˆ: Maker 0%ï¼‰ |

**500å††TPæ¡ç”¨æ ¹æ‹ **: 1000å††TPæ¯”ã§PF+30%ã€å‹ç‡+15.6ptã€æç›Š+13%

**è¨ˆç®—å¼**: `TPä¾¡æ ¼ = ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¾¡æ ¼ Â± (å¿…è¦å«ã¿ç›Š / æ•°é‡)`
**å¿…è¦å«ã¿ç›Š**: `ç›®æ¨™ç´”åˆ©ç›Š + ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‰‹æ•°æ–™ + åˆ©æ¯ + æ±ºæ¸ˆæ‰‹æ•°æ–™`
ï¼ˆPhase 63.2: fee_dataç´¯ç©å€¤ã¯ä½¿ç”¨ã›ãšã€å¸¸ã«fallbackãƒ¬ãƒ¼ãƒˆï¼ˆMaker 0%ï¼‰ã§å€‹åˆ¥è¨ˆç®—ï¼‰

### é‹ç”¨ä»•æ§˜

| é …ç›® | å€¤ |
|------|-----|
| **å¯¾è±¡** | bitbankä¿¡ç”¨å–å¼•ãƒ»BTC/JPYå°‚ç”¨ |
| **ç¨¼åƒ** | 24æ™‚é–“ï¼ˆGCP Cloud Runï¼‰ |
| **æœˆé¡ã‚³ã‚¹ãƒˆ** | 700-900å†† |
| **å®Ÿè¡Œé–“éš”** | 5åˆ† |

---

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### å“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºå‰å¾Œå¿…é ˆï¼‰

```bash
bash scripts/testing/checks.sh
# æœŸå¾…çµæœ: å…¨ãƒ†ã‚¹ãƒˆæˆåŠŸãƒ»75%+ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»flake8/black/isort PASS
```

### ã‚·ã‚¹ãƒ†ãƒ å®Ÿè¡Œ

```bash
# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰
bash scripts/management/run_paper.sh

# åœæ­¢
bash scripts/management/run_paper.sh stop

# çŠ¶æ³ç¢ºèª
bash scripts/management/run_paper.sh status

# ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼ˆç›´æ¥å®Ÿè¡Œï¼‰
python3 main.py --mode live
```

### GCPç¢ºèª

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³
TZ='Asia/Tokyo' gcloud run services describe crypto-bot-service-prod \
  --region=asia-northeast1 \
  --format="value(status.conditions[0].status,status.url)"

# æœ€æ–°ãƒªãƒ“ã‚¸ãƒ§ãƒ³
TZ='Asia/Tokyo' gcloud run revisions list \
  --service=crypto-bot-service-prod \
  --region=asia-northeast1 --limit=3

# ãƒ­ã‚°ç¢ºèª
gcloud logging read "resource.type=cloud_run_revision" --limit=10
```

### ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ¼ãƒ‰æ¨™æº–åˆ†æ

```bash
# åŸºæœ¬å®Ÿè¡Œï¼ˆ24æ™‚é–“åˆ†æï¼‰- Makeræˆ¦ç•¥ç¢ºèªå«ã‚€
python3 scripts/live/standard_analysis.py

# æœŸé–“æŒ‡å®šï¼ˆ48æ™‚é–“ï¼‰
python3 scripts/live/standard_analysis.py --hours 48

# ç°¡æ˜“ãƒã‚§ãƒƒã‚¯ï¼ˆGCPãƒ­ã‚°ã®ã¿ï¼‰
python3 scripts/live/standard_analysis.py --quick

# å‡ºåŠ›å…ˆæŒ‡å®š
python3 scripts/live/standard_analysis.py --output results/live/
```

**45å›ºå®šæŒ‡æ¨™**:
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçŠ¶æ…‹ï¼ˆ5æŒ‡æ¨™ï¼‰: è¨¼æ‹ é‡‘ç¶­æŒç‡ã€åˆ©ç”¨å¯èƒ½æ®‹é«˜ã€ä½¿ç”¨ä¸­è¨¼æ‹ é‡‘ã€æœªå®Ÿç¾æç›Šã€ãƒãƒ¼ã‚¸ãƒ³ã‚³ãƒ¼ãƒ«çŠ¶æ…‹
- ãƒã‚¸ã‚·ãƒ§ãƒ³çŠ¶æ…‹ï¼ˆ5æŒ‡æ¨™ï¼‰: ã‚ªãƒ¼ãƒ—ãƒ³ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°ã€æœªç´„å®šæ³¨æ–‡æ•°ã€æ³¨æ–‡å†…è¨³ã€ãƒ­ã‚¹ã‚«ãƒƒãƒˆä¾¡æ ¼
- å–å¼•å±¥æ­´åˆ†æï¼ˆ12æŒ‡æ¨™ï¼‰: å–å¼•æ•°ã€å‹ç‡ã€ç·æç›Šã€æˆ¦ç•¥åˆ¥çµ±è¨ˆã€TP/SLç™ºå‹•æ•°
- ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ï¼ˆ6æŒ‡æ¨™ï¼‰: APIå¿œç­”æ™‚é–“ã€ã‚¨ãƒ©ãƒ¼æ•°ã€ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ã€Containerå†èµ·å‹•æ•°
- TP/SLé©åˆ‡æ€§ï¼ˆ4æŒ‡æ¨™ï¼‰: TP/SLè·é›¢%ã€è¨­ç½®çŠ¶æ…‹
- ç¨¼åƒç‡ï¼ˆ3æŒ‡æ¨™ï¼‰: ç¨¼åƒæ™‚é–“ç‡ï¼ˆç›®æ¨™90%ï¼‰ã€ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ 
- å­¤å…SLç®¡ç†ï¼ˆ4æŒ‡æ¨™ï¼‰: æ¤œå‡ºæ•°ã€å‡¦ç†çµæœã€ãƒªãƒˆãƒ©ã‚¤çŠ¶æ³
- **Makeræˆ¦ç•¥ï¼ˆ6æŒ‡æ¨™ï¼‰**: ã‚¨ãƒ³ãƒˆãƒªãƒ¼MakeræˆåŠŸ/FBã€TP MakeræˆåŠŸ/FBã€post_onlyã‚­ãƒ£ãƒ³ã‚»ãƒ«æ•°

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ç¢ºèª
wc -l src/backtest/data/historical/BTC_JPY_4h.csv   # æœŸå¾…: 1,081è¡Œ
wc -l src/backtest/data/historical/BTC_JPY_15m.csv  # æœŸå¾…: 17,272è¡Œ

# å®Ÿè¡Œ
bash scripts/backtest/run_backtest.sh
# ã¾ãŸã¯
python3 main.py --mode backtest
```

### ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ¨™æº–åˆ†æ

```bash
# CIã®æœ€æ–°ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœã‚’å–å¾—ã—ã¦åˆ†æ
python3 scripts/backtest/standard_analysis.py --from-ci

# ãƒ­ãƒ¼ã‚«ãƒ«JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†æ
python3 scripts/backtest/standard_analysis.py results/backtest_result.json

# PhaseæŒ‡å®šä»˜ã
python3 scripts/backtest/standard_analysis.py --from-ci --phase 57.13
```

**85å›ºå®šæŒ‡æ¨™**: åŸºæœ¬æŒ‡æ¨™(11) + æˆ¦ç•¥åˆ¥(36) + MLäºˆæ¸¬åˆ¥(9) + ä¸€è‡´ç‡(4) + ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥(12) + æ™‚ç³»åˆ—(6) + æ”¹å–„ç¤ºå”†(8)
- Phase 61.10: å¹³å‡ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºè¿½åŠ ï¼ˆç•°å¸¸æ¤œçŸ¥ä»˜ãï¼‰

### æˆ¦ç•¥åˆ†æ

```bash
# æˆ¦ç•¥å€‹åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼ˆ60æ—¥ï¼‰
python3 scripts/analysis/strategy_performance_analysis.py
```

---

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ core/                   # åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ orchestration/      # TradingOrchestrator
â”‚   â”œâ”€â”€ config/             # è¨­å®šç®¡ç†ï¼ˆunified.yamlï¼‰
â”‚   â”œâ”€â”€ execution/          # å–å¼•å®Ÿè¡Œåˆ¶å¾¡
â”‚   â”œâ”€â”€ reporting/          # ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆBaseReporterãƒ»PaperTradingReporterï¼‰
â”‚   â””â”€â”€ services/           # GracefulShutdownãƒ»MarketRegimeClassifier
â”œâ”€â”€ data/                   # Bitbank APIãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â”œâ”€â”€ features/               # ç‰¹å¾´é‡ç”Ÿæˆï¼ˆ15æŒ‡æ¨™ï¼‰
â”œâ”€â”€ strategies/             # 6æˆ¦ç•¥ï¼ˆRegistry Patternï¼‰
â”œâ”€â”€ ml/                     # ProductionEnsembleï¼ˆ3ãƒ¢ãƒ‡ãƒ«ï¼‰
â”œâ”€â”€ trading/                # å–å¼•ç®¡ç†ï¼ˆ5å±¤åˆ†é›¢ï¼‰
â”‚   â”œâ”€â”€ core/               # enumsãƒ»types
â”‚   â”œâ”€â”€ balance/            # MarginMonitor
â”‚   â”œâ”€â”€ execution/          # ExecutionServiceãƒ»OrderStrategyãƒ»TPSLManagerãƒ»PositionRestorer
â”‚   â”œâ”€â”€ position/           # Trackerãƒ»Limitsãƒ»Cleanup
â”‚   â””â”€â”€ risk/               # IntegratedRiskManager
â”œâ”€â”€ backtest/               # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ 
â””â”€â”€ monitoring/             # é€±é–“ãƒ¬ãƒãƒ¼ãƒˆ

tax/                        # ç¨å‹™ã‚·ã‚¹ãƒ†ãƒ ï¼ˆSQLiteãƒ»ç§»å‹•å¹³å‡æ³•ï¼‰
scripts/                    # é‹ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
config/core/                # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¾¤
models/production/          # MLãƒ¢ãƒ‡ãƒ«ï¼ˆé€±æ¬¡æ›´æ–°ï¼‰
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
Bitbank APIï¼ˆ15åˆ†è¶³å–å¾—ï¼‰
    â†“
ç‰¹å¾´é‡ç”Ÿæˆï¼ˆ49åŸºæœ¬ç‰¹å¾´é‡ï¼‰
    â†“
6æˆ¦ç•¥å®Ÿè¡Œ â†’ æˆ¦ç•¥ä¿¡å·ï¼ˆ+6ç‰¹å¾´é‡ = 55ç‰¹å¾´é‡ï¼‰
    â†“
MLäºˆæ¸¬ï¼ˆensemble_full.pkl â†’ ä¿¡é ¼åº¦ï¼‰
    â†“
ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šï¼ˆtight_range / normal_range / trendingï¼‰
    â†“
å‹•çš„æˆ¦ç•¥é¸æŠï¼ˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿ã¥ã‘é©ç”¨ï¼‰
    â†“
ãƒªã‚¹ã‚¯è©•ä¾¡ï¼ˆKellyåŸºæº–ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™ï¼‰
    â†“
å–å¼•åˆ¤æ–­ï¼ˆãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TP/SLé©ç”¨ï¼‰
    â†“
å–å¼•å®Ÿè¡Œï¼ˆå®Œå…¨æŒ‡å€¤ãƒ»bitbank APIï¼‰
```

---

## è¨­å®šç®¡ç†

### 3å±¤è¨­å®šä½“ç³»

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `config/core/features.yaml` | æ©Ÿèƒ½ãƒˆã‚°ãƒ«è¨­å®š |
| `config/core/unified.yaml` | åŸºæœ¬è¨­å®šï¼ˆæ®‹é«˜ãƒ»å®Ÿè¡Œé–“éš”ç­‰ï¼‰ |
| `config/core/thresholds.yaml` | å‹•çš„å€¤ï¼ˆMLé–¾å€¤ãƒ»ãƒªã‚¹ã‚¯è¨­å®šãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿ãƒ»TP/SLï¼‰ |

### å‹•çš„æˆ¦ç•¥é¸æŠ

```yaml
# thresholds.yaml
dynamic_strategy_selection:
  enabled: true
  regime_strategy_mapping:
    tight_range:    # ãƒ¬ãƒ³ã‚¸å‹3æˆ¦ç•¥ã«é›†ä¸­
    normal_range:   # ãƒãƒ©ãƒ³ã‚¹å‹é…åˆ†
    trending:       # ãƒˆãƒ¬ãƒ³ãƒ‰å‹å„ªå…ˆ
    high_volatility: # å…¨æˆ¦ç•¥ç„¡åŠ¹åŒ–
```

### è¨­å®šå‚ç…§ãƒ‘ã‚¿ãƒ¼ãƒ³

```python
# ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢
from src.core.config.threshold_manager import get_threshold

sl_rate = get_threshold("risk.sl_min_distance_ratio", 0.02)

# Phase 64: TP/SLè¨­å®šã¯TPSLConfigå®šæ•°ã‚’ä½¿ç”¨ï¼ˆæ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ç¦æ­¢ï¼‰
from src.trading.execution.tp_sl_config import TPSLConfig

tp_ratio = get_threshold(TPSLConfig.TP_MIN_PROFIT_RATIO, 0.009)
sl_ratio = get_threshold(TPSLConfig.SL_MAX_LOSS_RATIO, 0.007)
regime_tp = get_threshold(TPSLConfig.tp_regime_path("tight_range", "min_profit_ratio"), 0.004)
```

### ãƒ­ãƒ¼ã‚«ãƒ«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ

```
config/secrets/
â”œâ”€â”€ .env              # æ©Ÿå¯†æƒ…å ±ï¼ˆAPI ã‚­ãƒ¼ç­‰ï¼‰
â”œâ”€â”€ .env.example      # ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â””â”€â”€ README.md         # è¨­å®šæ‰‹é †
```

**æ³¨æ„**: `.gitignore`ã§é™¤å¤–æ¸ˆã¿ã€‚Gitç®¡ç†å¤–ã€‚

### Secret Managerï¼ˆGCPï¼‰

å…·ä½“çš„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ä½¿ç”¨ï¼ˆ`key:3`ãªã©ï¼‰ã€‚`key:latest`ã¯ç¦æ­¢ã€‚

---

## é–‹ç™ºåŸå‰‡

### å“è³ªåŸºæº–

- **é–‹ç™ºå‰å¾Œ**: `bash scripts/testing/checks.sh`å¿…é ˆå®Ÿè¡Œ
- **ãƒ†ã‚¹ãƒˆ**: å…¨ãƒ†ã‚¹ãƒˆ100%æˆåŠŸç¶­æŒ
- **ã‚«ãƒãƒ¬ãƒƒã‚¸**: 75%ä»¥ä¸Šç¶­æŒ
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: flake8 / black / isorté€šéå¿…é ˆ
- **CI/CD**: GitHub Actionsè‡ªå‹•å“è³ªã‚²ãƒ¼ãƒˆ

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

- **è¨­å®š**: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ãƒ»`get_threshold()`ãƒ‘ã‚¿ãƒ¼ãƒ³ä½¿ç”¨
- **ãƒ­ã‚°**: JSTæ™‚åˆ»ãƒ»æ§‹é€ åŒ–ãƒ­ã‚°
- **ãƒ†ã‚¹ãƒˆ**: å˜ä½“ãƒ»çµ±åˆãƒ»ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆå®Œå‚™
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£éµå®ˆ

### GCPç‰¹æœ‰ã®åˆ¶ç´„

| åˆ¶ç´„ | å¯¾ç­– |
|------|------|
| gVisor fork()åˆ¶é™ | RandomForest `n_jobs=1`å›ºå®š |
| Cloud Runã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ | `signal.alarm`ç„¡åŠ¹åŒ– |
| Containerå†èµ·å‹• | èµ·å‹•æ™‚ãƒã‚¸ã‚·ãƒ§ãƒ³å¾©å…ƒï¼ˆPhase 63.4: å®Ÿãƒã‚¸ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹ï¼‰ |

### Gité‹ç”¨è¦å‰‡

| è¦å‰‡ | å†…å®¹ | ç†ç”± |
|------|------|------|
| **å…¨ä½“ã‚³ãƒŸãƒƒãƒˆå¿…é ˆ** | `git add .`ã‚’ä½¿ç”¨ | ã‚³ãƒŸãƒƒãƒˆæ¼ã‚Œé˜²æ­¢ |
| **å€‹åˆ¥addç¦æ­¢** | `git add <file>`ç¦æ­¢ | ä¿®æ­£æ¼ã‚Œã«ã‚ˆã‚‹ä¸å…·åˆé˜²æ­¢ |
| **ã‚³ãƒŸãƒƒãƒˆå‰ç¢ºèª** | `git status`å¿…é ˆ | æœªè¿½è·¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª |

```bash
# æ­£ã—ã„ã‚³ãƒŸãƒƒãƒˆæ‰‹é †
git status              # å¤‰æ›´å†…å®¹ç¢ºèª
git add .               # å…¨ä½“è¿½åŠ ï¼ˆå€‹åˆ¥addã¯ç¦æ­¢ï¼‰
git commit -m "..."     # ã‚³ãƒŸãƒƒãƒˆ
git push origin main    # ãƒ—ãƒƒã‚·ãƒ¥ â†’ CI/CDè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
```

---

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç´¢å¼•

### docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ï¼ˆ6ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [çµ±åˆé‹ç”¨ã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/çµ±åˆé‹ç”¨ã‚¬ã‚¤ãƒ‰.md) | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»æ—¥å¸¸é‹ç”¨ãƒ»ç·Šæ€¥å¯¾å¿œ |
| [GCPé‹ç”¨ã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/GCPé‹ç”¨ã‚¬ã‚¤ãƒ‰.md) | IAMæ¨©é™ãƒ»ãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— |
| [ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ä¸€è¦§.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ã‚·ã‚¹ãƒ†ãƒ æ©Ÿèƒ½ä¸€è¦§.md) | å®Ÿè£…æ©Ÿèƒ½ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ |
| [ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶å®šç¾©.md) | åˆ¤æ–­åŸºæº–ãƒ»åˆ¶ç´„å®šç¾© |
| [bitbank_APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/bitbank_APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹.md) | APIä»•æ§˜ãƒ»ç½²åæ–¹å¼ |
| [ç¨å‹™å¯¾å¿œã‚¬ã‚¤ãƒ‰.md](docs/é‹ç”¨ã‚¬ã‚¤ãƒ‰/ç¨å‹™å¯¾å¿œã‚¬ã‚¤ãƒ‰.md) | ç¢ºå®šç”³å‘Šãƒ»ç§»å‹•å¹³å‡æ³• |

### docs/é–‹ç™ºå±¥æ­´/

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [SUMMARY.md](docs/é–‹ç™ºå±¥æ­´/SUMMARY.md) | **å…¨Phaseç·æ‹¬**ï¼ˆPhase 1-64ã‚µãƒãƒªãƒ¼ï¼‰ |
| Phase_57.md | å¹´åˆ©10%ç›®æ¨™ãƒ»ãƒªã‚¹ã‚¯æœ€å¤§åŒ– |
| Phase_58.md | TP/SLç®¡ç†ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åŒæœŸä¿®æ­£ |
| Phase_59.md | MLæœ€é©åŒ–ãƒ»Stackingæ¤œè¨¼ |
| Phase_60.md | å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸æœ€é©åŒ–ãƒ»MLãƒ¢ãƒ‡ãƒ«å·®åˆ¥åŒ– |
| Phase_61.md | âœ…å®Œäº†: 500å††TPæ¡ç”¨ãƒ»PF 2.68ãƒ»Â¥149,195é”æˆ |
| Phase_62.md | âœ…å®Œäº†: Makeræˆ¦ç•¥å®Ÿè£…ãƒ»æ‰‹æ•°æ–™0.28%å‰Šæ¸› |
| Phase_63.md | âœ…å®Œäº†: TP/SLå®šæœŸãƒã‚§ãƒƒã‚¯ãƒ»æ®‹å­˜ãƒã‚°ä¿®æ­£ãƒ»æœ€çµ‚ç›£æŸ»ãƒã‚°ãªã—ç¢ºèª |
| **Phase_64.md** | **ğŸ”„é€²è¡Œä¸­: TP/SLã‚·ãƒ³ãƒ—ãƒ«åŒ– + ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ•´ç†** |

### docs/é–‹ç™ºè¨ˆç”»/

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| [ToDo.md](docs/é–‹ç™ºè¨ˆç”»/ToDo.md) | é–‹ç™ºè¨ˆç”» |

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### é–‹ç™ºæ™‚å•é¡Œ

```bash
# å“è³ªãƒã‚§ãƒƒã‚¯è©³ç´°
bash scripts/testing/checks.sh

# importã‚¨ãƒ©ãƒ¼
python3 -c "import sys; sys.path.insert(0, '.'); from src.core.logger import CryptoBotLogger"

# è¨­å®šæ•´åˆæ€§ç¢ºèª
python3 scripts/testing/dev_check.py validate
```

### GCPå•é¡Œ

```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
gcloud logging read "resource.type=cloud_run_revision AND severity>=ERROR" --limit=20

# Containerå†èµ·å‹•ç¢ºèª
gcloud logging read "textPayload:\"Container called exit\"" --limit=10
```

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ | åŸå›  | å¯¾ç­– |
|--------|------|------|
| `NoneType.__format__` | margin_ratioãŒNone | Phase 53.4ã§ä¿®æ­£æ¸ˆã¿ |
| `è¨¼æ‹ é‡‘ä¸è¶³: 0å††` | available_marginãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¸å­˜åœ¨ | Phase 53.14ã§ä¿®æ­£æ¸ˆã¿ |
| `'BitbankClient' has no attribute 'get_active_orders'` | ãƒ¡ã‚½ãƒƒãƒ‰åä¸ä¸€è‡´ | `fetch_active_orders`ã‚’ä½¿ç”¨ |
| Container exit(1) | n_jobsä¸¦åˆ—å‡¦ç† or signal.alarm | GCPåˆ¶ç´„å¯¾ç­–é©ç”¨ç¢ºèª |
| bitbank API 20001 | GETç½²åã«/v1ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä¸è¶³ | Phase 53.2ã§ä¿®æ­£æ¸ˆã¿ |

---

## é–‹ç™ºé–‹å§‹å‰ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

1. **æœ€æ–°çŠ¶æ³æŠŠæ¡**: Phase 64é€²è¡ŒçŠ¶æ³ãƒ»Phase_64.mdç¢ºèª
2. **å“è³ªãƒã‚§ãƒƒã‚¯**: `bash scripts/testing/checks.sh`å®Ÿè¡Œ
3. **è¨­å®šç¢ºèª**: features.yaml / unified.yaml / thresholds.yaml
4. **GCPç¢ºèª**: ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒçŠ¶æ³ãƒ»æœ€æ–°ãƒªãƒ“ã‚¸ãƒ§ãƒ³
5. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: é–¢é€£ã™ã‚‹é‹ç”¨ã‚¬ã‚¤ãƒ‰ãƒ»é–‹ç™ºå±¥æ­´ç¢ºèª

---

**ğŸ“… æœ€çµ‚æ›´æ–°**: 2026å¹´2æœˆ21æ—¥ - **Phase 65å®Œäº†**ï¼ˆãƒ©ã‚¤ãƒ–å–å¼•é »åº¦å›å¾©ãƒ»ä¸‰é‡å£å¯¾ç­–ï¼‰+ Phase 64å®Œäº†ï¼ˆ64.1-64.21ï¼‰
