# strategy/ - å–å¼•æˆ¦ç•¥å®Ÿè£…ãƒ»ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ

## ğŸ“‹ æ¦‚è¦

**Trading Strategy Implementation & Signal Generation System**  
æœ¬ãƒ•ã‚©ãƒ«ãƒ€ã¯ crypto-bot ã®å–å¼•æˆ¦ç•¥å®Ÿè£…ã‚’ç®¡ç†ã—ã€å„ç¨®å–å¼•ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼/ã‚¨ã‚°ã‚¸ãƒƒãƒˆåˆ¤å®šã‚’æ‹…å½“ã—ã¾ã™ã€‚

**ğŸŠ Phase 16.10æœ€é©åŒ–å®Œäº†**: 2025å¹´8æœˆ8æ—¥  
**æ•´ç†åŠ¹æœ**: 22å€‹â†’18å€‹ï¼ˆ18%å‰Šæ¸›ï¼‰ãƒ»1,472è¡Œå‰Šé™¤ãƒ»é‡è¤‡è§£æ¶ˆãƒ»ä¿å®ˆæ€§å‘ä¸Š

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½

### **æˆ¦ç•¥åŸºç›¤**
- çµ±ä¸€æˆ¦ç•¥ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆæŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹ï¼‰
- ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆï¼ˆBUY/SELL/EXITï¼‰
- ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†çµ±åˆ
- æˆ¦ç•¥ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ãƒ»ãƒ¬ã‚¸ã‚¹ãƒˆãƒª

### **æ©Ÿæ¢°å­¦ç¿’æˆ¦ç•¥**
- MLãƒ¢ãƒ‡ãƒ«äºˆæ¸¬ãƒ™ãƒ¼ã‚¹æˆ¦ç•¥
- ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«æˆ¦ç•¥
- ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ çµ±åˆ
- ä¿¡é ¼åº¦ãƒ™ãƒ¼ã‚¹åˆ¤å®š

### **ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æˆ¦ç•¥**
- ç§»å‹•å¹³å‡æˆ¦ç•¥
- RCIÃ—MACDé€†å¼µã‚Šï¼ˆã‚‚ã¡ã½ã‚ˆã‚·ã‚°ãƒŠãƒ«ï¼‰
- ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰æˆ¦ç•¥
- è¤‡åˆãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™

### **å–å¼•æ‰€ç‰¹åŒ–æˆ¦ç•¥**
- Bitbankå°‚ç”¨æˆ¦ç•¥ç¾¤
- æ‰‹æ•°æ–™æœ€é©åŒ–ï¼ˆãƒ¡ã‚¤ã‚«ãƒ¼å„ªå…ˆï¼‰
- ä¿¡ç”¨å–å¼•å¯¾å¿œ
- JPYå»ºã¦ç‰¹åŒ–å®Ÿè£…

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
strategy/                                   # Phase 16.10æœ€é©åŒ–å¾Œï¼ˆ18å€‹ï¼‰
â”œâ”€â”€ __init__.py                              # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆæœŸåŒ–
â”œâ”€â”€ README.md                                # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ âœ… åŸºç›¤ãƒ»ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ4å€‹ï¼‰
â”œâ”€â”€ base.py                                  # æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹ï¼ˆ29è¡Œï¼‰
â”œâ”€â”€ factory.py                               # æˆ¦ç•¥ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ï¼ˆ223è¡Œï¼‰
â”œâ”€â”€ registry.py                              # æˆ¦ç•¥ãƒ¬ã‚¸ã‚¹ãƒˆãƒªï¼ˆ174è¡Œï¼‰
â””â”€â”€ composite.py                             # è¤‡åˆæˆ¦ç•¥ï¼ˆ195è¡Œï¼‰
â”‚
â”œâ”€â”€ âœ… MLãƒ»ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ5å€‹ï¼‰
â”œâ”€â”€ ml_strategy.py                           # åŸºæœ¬MLæˆ¦ç•¥ï¼ˆ540è¡Œï¼‰
â”œâ”€â”€ aggressive_ml_strategy.py                # ç©æ¥µçš„MLæˆ¦ç•¥ï¼ˆ635è¡Œï¼‰
â”œâ”€â”€ ensemble_ml_strategy.py                  # ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«MLæˆ¦ç•¥ï¼ˆ440è¡Œï¼‰
â”œâ”€â”€ multi_timeframe_ensemble.py              # ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ çµ±åˆï¼ˆ768è¡Œï¼‰
â””â”€â”€ simple_ma.py                             # ç§»å‹•å¹³å‡ãƒ»ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼æˆ¦ç•¥ï¼ˆ181è¡Œï¼‰
â”‚
â””â”€â”€ âœ… Bitbankç‰¹åŒ–æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ8å€‹ãƒ»è¦çµ±åˆæ¤œè¨ï¼‰
â”œâ”€â”€ bitbank_btc_jpy_strategy.py              # BTC/JPYæˆ¦ç•¥ï¼ˆ1,159è¡Œï¼‰
â”œâ”€â”€ bitbank_xrp_jpy_strategy.py              # XRP/JPYæˆ¦ç•¥ï¼ˆ1,024è¡Œï¼‰
â”œâ”€â”€ bitbank_integrated_day_trading_system.py # çµ±åˆæ—¥ä¸­ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ1,054è¡Œï¼‰
â”œâ”€â”€ bitbank_enhanced_position_manager.py     # ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆ994è¡Œï¼‰
â”œâ”€â”€ bitbank_taker_avoidance_strategy.py      # ãƒ†ã‚¤ã‚«ãƒ¼å›é¿æˆ¦ç•¥ï¼ˆ899è¡Œï¼‰
â”œâ”€â”€ bitbank_execution_orchestrator.py        # å®Ÿè¡Œã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ï¼ˆ712è¡Œï¼‰
â”œâ”€â”€ bitbank_day_trading_strategy.py          # æ—¥ä¸­å–å¼•æˆ¦ç•¥ï¼ˆ634è¡Œï¼‰
â””â”€â”€ bitbank_integrated_strategy.py           # çµ±åˆæˆ¦ç•¥ï¼ˆ527è¡Œï¼‰

ğŸ“¦ archive/legacy_systems/ç§»å‹•æ¸ˆã¿ï¼ˆPhase 16.10ï¼‰
â”œâ”€â”€ strategy_deprecated_files/               # éæ¨å¥¨æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ1,179è¡Œï¼‰
â”‚   â””â”€â”€ multi_timeframe_ensemble_strategy.py # å¤ã„é‡è¤‡å®Ÿè£…
â””â”€â”€ exchange/bitbank/ å‰Šé™¤æ¸ˆã¿              # æœªä½¿ç”¨çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ293è¡Œï¼‰
```

## ğŸ” å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²

### **base.py**
- `StrategyBase`æŠ½è±¡ã‚¯ãƒ©ã‚¹ - å…¨æˆ¦ç•¥ã®åŸºåº•
- `logic_signal()`æŠ½è±¡ãƒ¡ã‚½ãƒƒãƒ‰ - å®Ÿè£…å¿…é ˆ
- çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹æä¾›
- å‹å®‰å…¨æ€§ä¿è¨¼

### **ml_strategy.py**
- `MLStrategy`ã‚¯ãƒ©ã‚¹ - åŸºæœ¬MLæˆ¦ç•¥
- ç‰¹å¾´é‡ç”Ÿæˆãƒ»æ¨™æº–åŒ–
- ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬ãƒ»ä¿¡é ¼åº¦è¨ˆç®—
- ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ã‚·ã‚°ãƒŠãƒ«çµ±åˆ

### **multi_timeframe_ensemble_strategy.py**
- `MultiTimeframeEnsembleStrategy`ã‚¯ãƒ©ã‚¹
- 15åˆ†/1æ™‚é–“/4æ™‚é–“çµ±åˆ
- ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ é–“æŠ•ç¥¨
- ãƒ‡ãƒ¼ã‚¿å“è³ªç®¡ç†

### **bitbank_integrated_strategy.py**
- `BitbankIntegratedStrategy`ã‚¯ãƒ©ã‚¹
- Bitbankå°‚ç”¨æœ€é©åŒ–
- æ‰‹æ•°æ–™æˆ¦ç•¥çµ±åˆ
- ä¿¡ç”¨å–å¼•å¯¾å¿œ

### **factory.py**
- `StrategyFactory`ã‚¯ãƒ©ã‚¹ - æˆ¦ç•¥ç”Ÿæˆ
- è¨­å®šãƒ™ãƒ¼ã‚¹å‹•çš„ç”Ÿæˆ
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ³¨å…¥
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### **registry.py**
- `StrategyRegistry`ã‚¯ãƒ©ã‚¹ - æˆ¦ç•¥ç®¡ç†
- åˆ©ç”¨å¯èƒ½æˆ¦ç•¥ä¸€è¦§
- å‹•çš„ç™»éŒ²ãƒ»å‰Šé™¤
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### **åŸºæœ¬çš„ãªæˆ¦ç•¥ä½¿ç”¨**
```python
from crypto_bot.strategy.factory import StrategyFactory

# æˆ¦ç•¥ç”Ÿæˆ
strategy = StrategyFactory.create_strategy(
    strategy_type="ml",
    config={
        "model_path": "models/production/model.pkl",
        "threshold": 0.05
    }
)

# ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆ
signal = strategy.logic_signal(price_df, current_position)
if signal.side == "BUY":
    execute_buy_order()
```

### **ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ æˆ¦ç•¥**
```python
from crypto_bot.strategy.multi_timeframe_ensemble_strategy import MultiTimeframeEnsembleStrategy

mtf_strategy = MultiTimeframeEnsembleStrategy(
    config={
        "timeframes": ["15m", "1h", "4h"],
        "weights": [0.3, 0.5, 0.2],
        "consensus_threshold": 0.6
    }
)

# è¤‡æ•°ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰ã®ã‚·ã‚°ãƒŠãƒ«
signal = mtf_strategy.logic_signal(multi_tf_data, position)
```

### **Bitbankç‰¹åŒ–æˆ¦ç•¥**
```python
from crypto_bot.strategy.bitbank_integrated_strategy import BitbankIntegratedStrategy

bitbank_strategy = BitbankIntegratedStrategy(
    config={
        "prefer_maker": True,
        "margin_trading": True,
        "risk_level": "moderate"
    }
)

# æ‰‹æ•°æ–™æœ€é©åŒ–è¾¼ã¿ã‚·ã‚°ãƒŠãƒ«
optimized_signal = bitbank_strategy.generate_optimized_signal(data)
```

## âœ… Phase 16.10æœ€é©åŒ–å®Œäº†åŠ¹æœ

### **æ§‹é€ æœ€é©åŒ–é”æˆ**
- **ãƒ•ã‚¡ã‚¤ãƒ«å‰Šæ¸›**: 22å€‹â†’18å€‹ï¼ˆ18%å‰Šæ¸›ï¼‰ãƒ»1,472è¡Œå‰Šé™¤å®Œäº†
- **é‡è¤‡è§£æ¶ˆ**: MultiTimeframeEnsembleStrategyã‚¯ãƒ©ã‚¹åé‡è¤‡è§£æ±ºãƒ»æ··ä¹±é™¤å»
- **æœªä½¿ç”¨å‰Šé™¤**: exchange/bitbank/çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ293è¡Œï¼‰å®Œå…¨å‰Šé™¤
- **ä¿å®ˆæ€§å‘ä¸Š**: éæ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ã®archiveç®¡ç†ãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ç¶­æŒ

### **åˆ†é¡ä½“ç³»ç¢ºç«‹**
- **åŸºç›¤ãƒ»ç®¡ç†ãƒ•ã‚¡ã‚¤ãƒ«** (4å€‹): base.py, factory.py, registry.py, composite.py
- **MLãƒ»ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«** (5å€‹): åŠ¹ç‡çš„ãªæˆ¦ç•¥å®Ÿè£…ç¾¤
- **Bitbankç‰¹åŒ–æˆ¦ç•¥ãƒ•ã‚¡ã‚¤ãƒ«** (8å€‹): çµ±åˆæ¤œè¨å¯¾è±¡ã¨ã—ã¦æ˜ç¢ºåŒ–

## âš ï¸ ç¶™ç¶šèª²é¡Œãƒ»æ”¹å–„ç‚¹

### **Bitbankæˆ¦ç•¥ç¾¤çµ±åˆï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰**
- 8ãƒ•ã‚¡ã‚¤ãƒ«8,003è¡Œã®é‡è¤‡è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ç¶™ç¶š
- åŒã˜importä¾å­˜é–¢ä¿‚ãƒ»é¡ä¼¼ã‚¯ãƒ©ã‚¹æ§‹é€ 
- ãƒ†ã‚¹ãƒˆä¾å­˜ã«ã‚ˆã‚Šæ®µéšçš„çµ±åˆãŒå¿…è¦

### **æŠ½è±¡åŒ–å¼·åŒ–ï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰**
- å–å¼•æ‰€åˆ¥åŸºåº•ã‚¯ãƒ©ã‚¹æœªå®Ÿè£…
- å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã®æŠ½å‡ºä¸è¶³
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹çµ±ä¸€æ€§

### **ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿï¼ˆå„ªå…ˆåº¦: ä¸­ï¼‰**
- æˆ¦ç•¥å˜ä½“ãƒ†ã‚¹ãƒˆã®å……å®Ÿ
- ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµ±åˆãƒ†ã‚¹ãƒˆå¼·åŒ–
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©å€¤ã‚¬ã‚¤ãƒ‰ç­–å®š

## ğŸ“ ä»Šå¾Œã®å±•é–‹

### **Phase 16.10å®Œäº†å¾Œã®ç™ºå±•æ–¹å‘**

1. **Bitbankæˆ¦ç•¥ç¾¤çµ±åˆï¼ˆæ¬¡æœŸPhaseå„ªå…ˆï¼‰**
   - 8ãƒ•ã‚¡ã‚¤ãƒ«8,003è¡Œã®æ®µéšçš„çµ±åˆ
   - ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã®æ®µéšçš„ä¿®æ­£
   - å…±é€šåŸºåº•ã‚¯ãƒ©ã‚¹æŠ½å‡ºãƒ»é‡è¤‡é™¤å»

2. **æˆ¦ç•¥éšå±¤å†ç·¨ï¼ˆç†æƒ³æ§‹æˆï¼‰**
   ```
   strategy/
   â”œâ”€â”€ base/          # åŸºåº•ã‚¯ãƒ©ã‚¹ç¾¤ãƒ»å…±é€šãƒ­ã‚¸ãƒƒã‚¯
   â”œâ”€â”€ technical/     # ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æˆ¦ç•¥ï¼ˆPhase 16.10åˆ†é¡æ¸ˆã¿ï¼‰
   â”œâ”€â”€ ml/           # MLæˆ¦ç•¥ï¼ˆPhase 16.10åˆ†é¡æ¸ˆã¿ï¼‰
   â”œâ”€â”€ exchange/     # å–å¼•æ‰€åˆ¥æˆ¦ç•¥ï¼ˆçµ±åˆç‰ˆï¼‰
   â”‚   â”œâ”€â”€ bitbank/  # 8ãƒ•ã‚¡ã‚¤ãƒ«â†’2-3ãƒ•ã‚¡ã‚¤ãƒ«çµ±åˆ
   â”‚   â””â”€â”€ bybit/    # å°†æ¥å¯¾å¿œ
   â””â”€â”€ composite/    # è¤‡åˆæˆ¦ç•¥
   ```

3. **æ¬¡ä¸–ä»£æ©Ÿèƒ½çµ±åˆ**
   - è‡ªå‹•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´ãƒ»A/Bãƒ†ã‚¹ãƒˆ
   - æˆ¦ç•¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¿½è·¡ãƒ»é©å¿œå‹åˆ‡æ›¿
   - è£å®šå–å¼•ãƒ»ãƒšã‚¢ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»DeFiçµ±åˆ
   - ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå°‚ç”¨ãƒ»ã‚¦ã‚©ãƒ¼ã‚¯ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰åˆ†æ

4. **archiveç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **
   - legacy_systems/ã‹ã‚‰ã®æ©Ÿèƒ½å¾©å…ƒãƒ—ãƒ­ã‚»ã‚¹
   - éæ¨å¥¨ãƒ•ã‚¡ã‚¤ãƒ«ã®å®šæœŸè©•ä¾¡ãƒ»ç¾ä»£åŒ–
   - Phaseæ•´ç†ã®ç¶™ç¶šçš„æ”¹å–„

---

**Phase 16.10å®Œå…¨é”æˆ**: crypto_bot/strategy/ãƒ•ã‚©ãƒ«ãƒ€ãŒæœ€é©æ§‹æˆã«æ•´ç†ã•ã‚Œã€æ˜ç¢ºãªåˆ†é¡ä½“ç³»ã¨ç¶™ç¶šæ”¹å–„æ–¹å‘ãŒç¢ºç«‹ã•ã‚Œã¾ã—ãŸã€‚ğŸŠ