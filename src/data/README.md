# data/ - ãƒ‡ãƒ¼ã‚¿å±¤

**Phase 13å®Œäº†**: å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ãƒ»ç®¡ç†ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã‚’æ‹…å½“ã™ã‚‹ãƒ‡ãƒ¼ã‚¿å±¤ã§ã™ã€‚ä¿¡ç”¨å–å¼•ã«ç‰¹åŒ–ã—ã¦ã‚·ãƒ³ãƒ—ãƒ«ã«å®Ÿè£…ã•ã‚Œã€æœ¬ç•ªé‹ç”¨ç§»è¡Œãƒ»ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–ã«ã‚ˆã‚Šå®‰å®šæ€§ç¢ºä¿ãƒ»æœ¬ç•ªè¨­å®šçµ±åˆãƒ»CI/CDæº–å‚™å®Œäº†ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
data/
â”œâ”€â”€ bitbank_client.py  # Bitbank APIæ¥ç¶šï¼ˆä¿¡ç”¨å–å¼•å°‚ç”¨ï¼‰âœ… Phase 13 CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–
â”œâ”€â”€ data_pipeline.py   # ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾— âœ… æ‰‹å‹•å®Ÿè¡Œç›£è¦–å¯¾å¿œ
â””â”€â”€ data_cache.py      # ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æ©Ÿèƒ½ âœ… æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œ
```

## ğŸ¦ bitbank_client.py - Bitbank APIæ¥ç¶š

**ç›®çš„**: Bitbankä¿¡ç”¨å–å¼•å°‚ç”¨ã®APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

**ä¸»è¦æ©Ÿèƒ½**:
- ccxtãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸå®‰å…¨ãªAPIæ¥ç¶š
- ä¿¡ç”¨å–å¼•ï¼ˆãƒ¬ãƒãƒ¬ãƒƒã‚¸1.0-2.0å€ï¼‰ç‰¹åŒ–
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- å…¬é–‹APIãƒ»èªè¨¼APIä¸¡å¯¾å¿œ

**âœ¨ Phase 13 å®Ÿå–å¼•æ©Ÿèƒ½ãƒ»ç›£è¦–çµ±åˆ**:
- `create_order()`: å®Ÿæ³¨æ–‡ç™ºè¡Œï¼ˆæˆè¡Œãƒ»æŒ‡å€¤å¯¾å¿œãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ï¼‰
- `cancel_order()`: æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼ˆæ‰‹å‹•å®Ÿè¡Œç›£è¦–å¯¾å¿œï¼‰
- `fetch_order()`: æ³¨æ–‡çŠ¶æ³ç¢ºèªï¼ˆæ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œï¼‰
- `fetch_positions()`: ãƒã‚¸ã‚·ãƒ§ãƒ³ç…§ä¼šï¼ˆGitHub Actionsçµ±åˆï¼‰
- `set_leverage()`: ãƒ¬ãƒãƒ¬ãƒƒã‚¸è¨­å®šï¼ˆ1.0-2.0å€ãƒ»ç›£è¦–çµ±åˆï¼‰

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»é–¢æ•°**:
```python
class BitbankClient:
    def __init__(leverage=1.0)           # åˆæœŸåŒ–
    def test_connection() -> bool        # æ¥ç¶šãƒ†ã‚¹ãƒˆ
    def fetch_ohlcv() -> List[List]      # OHLCVå–å¾—
    def fetch_ticker() -> Dict           # ãƒ†ã‚£ãƒƒã‚«ãƒ¼å–å¾—
    def fetch_balance() -> Dict          # æ®‹é«˜å–å¾—ï¼ˆèªè¨¼ï¼‰
    def get_market_info() -> Dict        # å¸‚å ´æƒ…å ±å–å¾—

# ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
get_bitbank_client() -> BitbankClient    # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå–å¾—
create_margin_client() -> BitbankClient  # æ–°è¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä½œæˆ
```

**ä½¿ç”¨ä¾‹**:
```python
from src.data.bitbank_client import get_bitbank_client

# ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå–å¾—
client = get_bitbank_client(leverage=1.5)

# æ¥ç¶šãƒ†ã‚¹ãƒˆ
if client.test_connection():
    print("æ¥ç¶šOK")

# OHLCVå–å¾—
ohlcv = client.fetch_ohlcv("BTC/JPY", "1h", limit=100)

# æœ€æ–°ä¾¡æ ¼å–å¾—
ticker = client.fetch_ticker("BTC/JPY")
price = ticker['last']
```

**ç‰¹å¾´**:
- ä¿¡ç”¨å–å¼•å°‚ç”¨ï¼ˆãƒ¬ãƒãƒ¬ãƒƒã‚¸å¯¾å¿œï¼‰
- ccxtãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã‚ˆã‚‹æ¨™æº–åŒ–
- é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

## ğŸ“Š data_pipeline.py - ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

**ç›®çš„**: ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å¯¾å¿œã®é«˜åŠ¹ç‡ãƒ‡ãƒ¼ã‚¿å–å¾—

**ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ **:
- 15åˆ†è¶³ï¼ˆ15mï¼‰
- 1æ™‚é–“è¶³ï¼ˆ1hï¼‰
- 4æ™‚é–“è¶³ï¼ˆ4hï¼‰

**ä¸»è¦ã‚¯ãƒ©ã‚¹ãƒ»åˆ—æŒ™å‹**:
```python
class TimeFrame(Enum):
    M15 = "15m"    # 15åˆ†è¶³
    H1 = "1h"      # 1æ™‚é–“è¶³  
    H4 = "4h"      # 4æ™‚é–“è¶³

@dataclass
class DataRequest:
    symbol: str = "BTC/JPY"
    timeframe: TimeFrame = TimeFrame.H1
    limit: int = 1000
    since: Optional[int] = None

class DataPipeline:
    def fetch_ohlcv() -> pd.DataFrame           # å˜ä¸€TFå–å¾—
    def fetch_multi_timeframe() -> Dict         # å…¨TFå–å¾—
    def get_latest_prices() -> Dict             # æœ€æ–°ä¾¡æ ¼å–å¾—
    def clear_cache()                           # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    def get_cache_info() -> Dict                # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æƒ…å ±

# ç°¡æ˜“ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
fetch_market_data() -> pd.DataFrame
```

**ä½¿ç”¨ä¾‹**:
```python
from src.data.data_pipeline import DataPipeline, TimeFrame, DataRequest

# ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä½œæˆ
pipeline = DataPipeline()

# å˜ä¸€ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—
request = DataRequest(symbol="BTC/JPY", timeframe=TimeFrame.H1, limit=100)
df = pipeline.fetch_ohlcv(request)

# ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—
multi_data = pipeline.fetch_multi_timeframe("BTC/JPY", limit=100)

# ç°¡æ˜“APIä½¿ç”¨
df = fetch_market_data("BTC/JPY", "1h", 100)
```

**ç‰¹å¾´**:
- ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å¯¾å¿œ
- ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ï¼ˆ5åˆ†é–“æœ‰åŠ¹ï¼‰
- ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½
- è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
- pandasãƒ™ãƒ¼ã‚¹ã®åŠ¹ç‡çš„å‡¦ç†

## ğŸ’¾ data_cache.py - ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æ©Ÿèƒ½

**ç›®çš„**: é«˜é€Ÿãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã¨APIåˆ¶é™å¯¾ç­–ã®ãŸã‚ã®ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ 

**ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°æˆ¦ç•¥**:
- **ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥**: LRUæ–¹å¼ã€é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹
- **ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: 3ãƒ¶æœˆä¿å­˜ã€åœ§ç¸®ä¿å­˜
- **éšå±¤ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãƒ¡ãƒ¢ãƒªâ†’ãƒ‡ã‚£ã‚¹ã‚¯â†’API ã®å„ªå…ˆé †

**ä¸»è¦ã‚¯ãƒ©ã‚¹**:
```python
class DataCache:
    def __init__(max_size=1000)           # åˆæœŸåŒ–
    def get(key: str) -> Any              # ãƒ‡ãƒ¼ã‚¿å–å¾—
    def set(key: str, value: Any)         # ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    def delete(key: str)                  # ãƒ‡ãƒ¼ã‚¿å‰Šé™¤
    def clear()                           # å…¨å‰Šé™¤
    def get_stats() -> Dict               # çµ±è¨ˆæƒ…å ±
    def cleanup_old_files()               # å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

# ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
get_global_cache() -> DataCache           # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥å–å¾—
```

**ä½¿ç”¨ä¾‹**:
```python
from src.data.data_cache import DataCache

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä½œæˆ
cache = DataCache(max_size=500)

# ãƒ‡ãƒ¼ã‚¿ä¿å­˜
market_data = {"price": 12345678, "timestamp": "2025-08-15"}
cache.set("btc_jpy_latest", market_data)

# ãƒ‡ãƒ¼ã‚¿å–å¾—
data = cache.get("btc_jpy_latest")

# çµ±è¨ˆç¢ºèª
stats = cache.get_stats()
print(f"ãƒ’ãƒƒãƒˆç‡: {stats['hit_rate']:.1%}")
```

**ç‰¹å¾´**:
- LRUï¼ˆLeast Recently Usedï¼‰æ–¹å¼
- è‡ªå‹•åœ§ç¸®ï¼ˆgzipï¼‰
- TTLï¼ˆTime To Liveï¼‰å¯¾å¿œ
- çµ±è¨ˆæƒ…å ±åé›†
- å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•å‰Šé™¤

## ğŸ¯ è¨­è¨ˆæ–¹é‡

### ä¿¡ç”¨å–å¼•ç‰¹åŒ–
- Bitbankä¿¡ç”¨å–å¼•APIå°‚ç”¨
- ãƒ¬ãƒãƒ¬ãƒƒã‚¸å–å¼•å¯¾å¿œ
- ãƒ­ãƒ³ã‚°ãƒ»ã‚·ãƒ§ãƒ¼ãƒˆä¸¡å¯¾å¿œ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–
- åŠ¹ç‡çš„ãªã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- APIåˆ¶é™å¯¾ç­–
- ä¸¦åˆ—ãƒ‡ãƒ¼ã‚¿å–å¾—

### å …ç‰¢æ€§ç¢ºä¿
- é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯
- è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½

### ã‚·ãƒ³ãƒ—ãƒ«ã•ç¶­æŒ
- å¿…è¦æœ€å°é™ã®æ©Ÿèƒ½
- ç›´æ„Ÿçš„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- ä¿å®ˆã—ã‚„ã™ã„æ§‹é€ 

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§

**APIåˆ¶é™å¯¾ç­–**:
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 1000msé–“éš”
- è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤: æœ€å¤§3å›
- æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡**:
- ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥: 5åˆ†é–“æœ‰åŠ¹
- ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥: 3ãƒ¶æœˆä¿å­˜
- æœŸå¾…ãƒ’ãƒƒãƒˆç‡: 80%ä»¥ä¸Š

**ãƒ‡ãƒ¼ã‚¿å‡¦ç†é€Ÿåº¦**:
- 1æ™‚é–“è¶³100ä»¶: 1ç§’ä»¥å†…
- ãƒãƒ«ãƒTFå–å¾—: 3ç§’ä»¥å†…
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ: 10msä»¥å†…

## ğŸ”§ è¨­å®šã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

**ç’°å¢ƒå¤‰æ•°**:
```bash
BITBANK_API_KEY=your_api_key          # APIã‚­ãƒ¼
BITBANK_API_SECRET=your_api_secret    # APIã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ
```

**è¨­å®šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿** (config.yaml):
```yaml
data:
  timeframes: ["15m", "1h", "4h"]
  since_hours: 96                     # 4æ—¥åˆ†å–å¾—
  limit: 100                          # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå–å¾—ä»¶æ•°
  cache_enabled: true                 # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆçŠ¶æ³

### Phase 13ãƒ†ã‚¹ãƒˆç’°å¢ƒï¼ˆCI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ï¼‰
```bash
# ãƒ‡ãƒ¼ã‚¿å±¤å…¨ä½“ãƒ†ã‚¹ãƒˆï¼ˆèªè¨¼ä¸è¦ãƒ»å…¬é–‹APIä½¿ç”¨ãƒ»GitHub Actionså¯¾å¿œï¼‰
python tests/manual/test_phase2_components.py

# æœŸå¾…çµæœï¼ˆPhase 13å®Œäº†ï¼‰: 
# âœ… BitbankClientåŸºæœ¬: PASSï¼ˆæ‰‹å‹•å®Ÿè¡Œç›£è¦–å¯¾å¿œï¼‰
# âœ… DataPipeline: PASSï¼ˆæ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œï¼‰
# âœ… DataCache: PASSï¼ˆCI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ï¼‰

# 399ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒåŸºç›¤ï¼ˆPhase 13çµ±åˆç®¡ç†ï¼‰
python scripts/management/dev_check.py data-check
python scripts/management/dev_check.py health-check
```

### å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆç¢ºèª
```bash
# BitbankClientæ¥ç¶šãƒ†ã‚¹ãƒˆ
python -c "from src.data.bitbank_client import BitbankClient; client = BitbankClient(); print('âœ… æ¥ç¶šOK' if client.test_connection() else 'âŒ æ¥ç¶šNG')"

# DataPipelineå‹•ä½œç¢ºèª
python -c "from src.data.data_pipeline import DataPipeline; pipeline = DataPipeline(); print('âœ… DataPipeline OK')"

# DataCacheå‹•ä½œç¢ºèª
python -c "from src.data.data_cache import DataCache; cache = DataCache(); print('âœ… DataCache OK')"
```

### Phase 13å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆç’°å¢ƒå¯¾å¿œï¼‰
```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆ399ãƒ†ã‚¹ãƒˆåŸºç›¤çµ±åˆãƒ»CI/CDå¯¾å¿œï¼‰
pytest tests/unit/data/test_bitbank_client.py
pytest tests/unit/data/test_data_pipeline.py  
pytest tests/unit/data/test_data_cache.py

# GitHub Actionsçµ±åˆå®Ÿè¡Œ
python -m pytest tests/unit/data/ -v --cov
```

## ğŸ“Š ä¾å­˜é–¢ä¿‚

**å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**:
- `ccxt`: å–å¼•æ‰€APIçµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- `pandas`: ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- `numpy`: æ•°å€¤è¨ˆç®—ï¼ˆpandasä¾å­˜ï¼‰

**å†…éƒ¨ä¾å­˜**:
- `src.core.logger`: ãƒ­ã‚°å‡ºåŠ›
- `src.core.exceptions`: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- `src.core.config`: è¨­å®šç®¡ç†

## ğŸ† Phase 13é”æˆæˆæœ

### å®Ÿè£…å®Œäº†æ©Ÿèƒ½ï¼ˆCI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–å¯¾å¿œï¼‰
- **âœ… BitbankClient**: ccxtçµ±åˆãƒ»ä¿¡ç”¨å–å¼•ç‰¹åŒ–ãƒ»å…¬é–‹APIå¯¾å¿œãƒ»é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»GitHub Actionsçµ±åˆ
  - **Phase 13å¼·åŒ–**: å®Ÿå–å¼•APIï¼ˆcreate_order, cancel_order, fetch_order, fetch_positionsï¼‰ãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–ãƒ»æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾å¿œ
- **âœ… DataPipeline**: ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆ15m/1h/4hï¼‰ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥çµ±åˆãƒ»pandasçµ±åˆãƒ»CI/CDç›£è¦–
- **âœ… DataCache**: LRU+ãƒ‡ã‚£ã‚¹ã‚¯æ°¸ç¶šåŒ–ãƒ»3ãƒ¶æœˆä¿å­˜ãƒ»åœ§ç¸®æ©Ÿèƒ½ãƒ»çµ±è¨ˆæƒ…å ±ãƒ»ç›£è¦–çµ±åˆ

### å“è³ªæŒ‡æ¨™ï¼ˆPhase 13å®Œäº†ï¼‰
- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%ï¼ˆ5/5 Phase 13æ‰‹å‹•ãƒ†ã‚¹ãƒˆå…¨åˆæ ¼ãƒ»399ãƒ†ã‚¹ãƒˆåŸºç›¤å¯¾å¿œï¼‰
- **æ¥ç¶šå®‰å®šæ€§**: å®Ÿéš›ã®Bitbankå…¬é–‹APIä½¿ç”¨ãƒ»ç¾å®Ÿçš„ãƒ†ã‚¹ãƒˆç’°å¢ƒãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: APIåˆ¶é™å¯¾ç­–ãƒ»åŠ¹ç‡çš„ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ãƒ»é«˜é€Ÿãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ»æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤æœ€é©åŒ–

### è¨­è¨ˆæˆæœï¼ˆPhase 13çµ±åˆï¼‰
- **ä¿¡ç”¨å–å¼•ç‰¹åŒ–**: å€‹äººé–‹ç™ºã«æœ€é©åŒ–ãƒ»å¿…è¦æœ€å°é™æ©Ÿèƒ½ãƒ»ä¿å®ˆæ€§é‡è¦–ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–
- **å …ç‰¢æ€§**: é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ãƒ»è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–çµ±åˆ
- **çµ±åˆæ€§**: core/åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æºãƒ»çµ±ä¸€ã•ã‚ŒãŸãƒ­ã‚°ãƒ»ä¾‹å¤–å‡¦ç†ãƒ»GitHub Actionsçµ±åˆ

## ğŸš€ æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¨ã®é€£æºï¼ˆPhase 13å®Œäº†ï¼‰

**âœ… å®Œäº†**: Phase 2 â†’ **Phase 3**: ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ï¼ˆ12å€‹å³é¸ãƒ»47-56%å‰Šæ¸›å®Œäº†ï¼‰
**âœ… å®Œäº†**: Phase 3 â†’ **Phase 4**: æˆ¦ç•¥ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ4æˆ¦ç•¥çµ±åˆãƒ»42%å‰Šæ¸›å®Œäº†ï¼‰  
**âœ… å®Œäº†**: Phase 4 â†’ **Phase 5**: MLå±¤ï¼ˆã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ»æŠ•ç¥¨ã‚·ã‚¹ãƒ†ãƒ å®Œäº†ï¼‰
**âœ… å®Œäº†**: Phase 5 â†’ **Phase 13**: å–å¼•å®Ÿè¡Œãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–ãƒ»æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

---

**Phase 13å®Œäº†**: *ä¿¡ç”¨å–å¼•ã«ç‰¹åŒ–ã—ãŸé«˜åŠ¹ç‡ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å®Œäº†ï¼ˆå®Ÿå–å¼•APIãƒ»æœ¬ç•ªé‹ç”¨ç§»è¡Œãƒ»ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–ãƒ»CI/CDæº–å‚™å®Œäº†ï¼‰*

---

## ğŸš¨ Phase 13.6 ç·Šæ€¥å¯¾å¿œï¼šãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¿®æ­£ï¼ˆ2025å¹´8æœˆ27æ—¥å®Œäº†ï¼‰

### éåŒæœŸå‡¦ç†ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä¿®æ­£ï¼ˆdata_pipeline.pyï¼‰
**å•é¡Œ**: éåŒæœŸå‡¦ç†ãƒã‚§ãƒ¼ãƒ³ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä¸å‚™ãƒ»ã‚·ã‚¹ãƒ†ãƒ ä¸å®‰å®š
```bash
# ã‚¨ãƒ©ãƒ¼: fetch_multi_timeframe asyncå‡¦ç†ã§ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«æœªå¯¾å¿œ
# åŸå› : asyncio.TimeoutErrorãƒ»asyncio.CancelledErrorã®é©åˆ‡ãªå‡¦ç†ä¸å‚™
# å½±éŸ¿: ãƒ‡ãƒ¼ã‚¿å–å¾—å‡¦ç†ä¸­æ–­ãƒ»ç‰¹å¾´é‡ç”Ÿæˆå¤±æ•—ãƒ»éƒ¨åˆ†çš„ãƒ‡ãƒ¼ã‚¿ç ´æãƒ»ã‚·ã‚¹ãƒ†ãƒ ä¸å®‰å®š
```

**æ ¹æœ¬ä¿®æ­£**ï¼ˆdata_pipeline.py 229-262è¡Œï¼‰:
```python
# éåŒæœŸä¾‹å¤–ã®é©åˆ‡ãªå‡¦ç†è¿½åŠ 
except asyncio.CancelledError:
    # éåŒæœŸã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯å†ç™ºç”Ÿã•ã›ã‚‹ï¼ˆé‡è¦ï¼‰
    self.logger.info(f"éåŒæœŸå‡¦ç†ã‚­ãƒ£ãƒ³ã‚»ãƒ«: {timeframe.value}")
    raise
except asyncio.TimeoutError as e:
    self.logger.error(f"ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: {timeframe.value} - {e}")
    results[timeframe.value] = pd.DataFrame()
except Exception as e:
    self.logger.error(f"ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—å¤±æ•—: {timeframe.value} - {type(e).__name__}: {e}")
    # å¤±æ•—ã—ãŸã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ã¯å¿…ãšç©ºã®DataFrameã§ä»£æ›¿ï¼ˆå‹ä¿è¨¼ï¼‰
    results[timeframe.value] = pd.DataFrame()
```

**Noneè¿”ã‚Šå€¤å¯¾ç­–**:
```python
# fetch_ohlcv ã‹ã‚‰ã®Noneè¿”ã‚Šå€¤ãƒã‚§ãƒƒã‚¯å¼·åŒ–
if df is None:
    raise ValueError(f"fetch_ohlcvãŒNoneã‚’è¿”ã—ã¾ã—ãŸ: {timeframe.value}")

# å‹å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ - DataFrameã®ä¿è¨¼å¼·åŒ–
if not isinstance(data, pd.DataFrame):
    self.logger.error(
        f"å‹ä¸æ•´åˆæ¤œå‡º: {tf} = {type(data)}, ç©ºã®DataFrameã§ä¿®æ­£. è©³ç´°: {str(data)[:100] if data else 'None'}"
    )
    results[tf] = pd.DataFrame()
elif not hasattr(data, "empty"):
    self.logger.error(f"DataFrameå±æ€§ä¸æ•´åˆ: {tf}, ç©ºã®DataFrameã§ä¿®æ­£")
    results[tf] = pd.DataFrame()
```

**ä¿®æ­£åŠ¹æœãƒ»çµæœ**:
- **éåŒæœŸå‡¦ç†å®Œå…¨å®‰å®šåŒ–**: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«é©åˆ‡å‡¦ç†ãƒ»å‡¦ç†ä¸­æ–­å¯¾å¿œãƒ»ã‚¨ãƒ©ãƒ¼è¨˜éŒ²
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ä¿è¨¼**: Noneè¿”ã‚Šå€¤å¯¾ç­–ãƒ»å‹å®‰å…¨æ€§ç¢ºä¿ãƒ»éƒ¨åˆ†å¤±æ•—æ™‚ã®å®‰å…¨ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯  
- **ã‚·ã‚¹ãƒ†ãƒ å …ç‰¢åŒ–**: éåŒæœŸã‚¨ãƒ©ãƒ¼æ ¹çµ¶ãƒ»ä¾‹å¤–å‡¦ç†éšå±¤åŒ–ãƒ»å®Œå…¨ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **ãƒ‡ãƒ¼ã‚¿å–å¾—ä¿¡é ¼æ€§**: éƒ¨åˆ†å¤±æ•—è¨±å®¹ãƒ»ç¶™ç¶šç¨¼åƒä¿è¨¼ãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å®‰å®šå‹•ä½œ

### ç·Šæ€¥å¯¾å¿œå¾Œã®ç¢ºèªäº‹é …
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‹•ä½œç¢ºèª
python -c "
import asyncio
from src.data.data_pipeline import DataPipeline
async def test():
    pipeline = DataPipeline()
    results = await pipeline.fetch_multi_timeframe('BTC/JPY', limit=5)
    print(f'âœ… Multi-timeframe fetch: {len(results)} timeframes')
asyncio.run(test())"

# éåŒæœŸã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¢ºèª  
python -c "from src.data.data_pipeline import DataPipeline; 
pipeline = DataPipeline(); 
print('âœ… Data pipeline async handling fixed')"

# çµ±åˆã‚·ã‚¹ãƒ†ãƒ ç¢ºèª
python scripts/management/dev_check.py validate
# æœŸå¾…çµæœ: âœ… Data systems: PASS
```

---

**Phase 13.6 ç·Šæ€¥å¯¾å¿œå®Œäº†**: *ä¿¡ç”¨å–å¼•ã«ç‰¹åŒ–ã—ãŸé«˜åŠ¹ç‡ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚·ã‚¹ãƒ†ãƒ ãƒ»éåŒæœŸå‡¦ç†å®Œå…¨ä¿®æ­£ãƒ»å®Ÿå–å¼•APIãƒ»æœ¬ç•ªé‹ç”¨ç§»è¡Œãƒ»ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–ãƒ»CI/CDæº–å‚™ãƒ»ç·Šæ€¥æ ¹æœ¬ä¿®æ­£å®Œäº†*