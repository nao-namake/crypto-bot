# thresholds.yaml 設定変更履歴

**Phase 52.4**

**注**: 具体的な設定値は`config/core/thresholds.yaml`を参照

## 概要

このドキュメントは `config/core/thresholds.yaml` の設定変更履歴を記録します。

## 変更履歴

### Phase 52.4-A (2025-11-15)
**構造改善**: Optuna階層化・ヘッダー簡潔化

**変更内容**:
- Optunaセクション階層化（フラット構造 → 3階層構造）
- セクションヘッダー簡潔化
- レジーム別設定説明簡潔化

**期待効果**: 可読性+30%・保守性+25%・コメント削減~30%

---

### Phase 52.4 (2025-11-14)
**設定整理**: Phase参照統一・コメント削減

**変更内容**: Phase参照統一（51箇所 → 18箇所）・重複コメント削減

---

### Phase 52.0 (2025-11-10)
**レジーム別TP/SL最適化**: 市場レジーム別利確・損切り設定

**変更内容**: レジーム別TP設定・レジーム別SL設定実装

**期待効果**: tight_range頻繁利確・勝率向上46.1%→50%+

---

### Phase 51.9 (2025-11-03)
**レジーム別ML統合設定**: 市場レジーム別ML統合最適化

**変更内容**: `ml.regime_ml_integration`セクション新設・4レジーム別設定

**期待効果**: tight_range戦略重視（実績99.4%）・過学習防止

---

### Phase 51.8-J2 (2025-11-02)
**レジーム別戦略重み最適化**: バックテスト評価による最適化

**変更内容**: `dynamic_strategy_selection.enabled: true`・ML統合閾値調整

---

### Phase 51.8-10 (2025-11-01)
**レジーム別戦略重み初期値**: 理論的初期値設定

**変更内容**: 6戦略統合後の初期重み設定・レジーム別ポジション制限調整

---

### Phase 51.8 (2025-10-31)
**6戦略統合・レジーム別設定**: 動的戦略選択システム拡張

**変更内容**: 3戦略→6戦略統合・レジーム別戦略重みマッピング・レジーム別ポジション制限実装

**期待効果**: レンジ相場対応強化・トレンド相場対応強化

---

### Phase 51.6 (2025-10-28)
**TP/SL最適化**: 被害最小化・こまめ利確

**変更内容**: SL 1.5%→0.7%・TP 1.0%→0.9%・RR比0.67:1→1.29:1

**期待効果**: 被害削減53%・必要勝率低下43.75%

---

### Phase 51.5-C (2025-10-27)
**TP/SL価格差異バグ修正**: ticker価格 vs limit価格

**変更内容**: TP/SL再計算フォールバック設定追加・ATR取得失敗対応

---

### Phase 50.5 (2025-11-01)
**SL注文保護**: クリーンアップ機能一時無効化

**変更内容**: ポジションクリーンアップ機能の一時無効化

**期待効果**: SL注文保護・エラー30101解消

---

### Phase 49.18 (2025-10-26)
**証拠金維持率80%確実遵守**: critical閾値変更

**変更内容**: critical 100.0→80.0

**期待効果**: bitbank証拠金維持率80%確実遵守

---

### Phase 46 (2025-10-22)
**個別TP/SL実装**: デイトレード特化・シンプル設計

**変更内容**: 個別TP/SL管理（エントリー毎に独立）・Phase 42統合TP/SL削除

**期待効果**: シンプル性・保守性大幅向上

---

### Phase 42.2 (2025-10-20)
**トレーリングストップ実装**: 利益ロック機能（現在無効化）

**変更内容**: トレーリングストップ実装（Phase 46で無効化）

---

### Phase 41.8.5 (2025-10-17)
**ML統合閾値最適化**: ML統合率100%達成

**変更内容**: `min_ml_confidence` 0.6→0.45・`high_confidence_threshold` 0.8→0.60・3段階統合ロジック再設計

**期待効果**: ML統合率10%→100%達成

---

### Phase 40.1-40.4 (2025-10-15)
**Optuna最適化**: パラメータ最適化（thresholds.yamlに定義）

**最適化対象**: リスク管理・戦略・ML統合・MLハイパーパラメータ

**期待効果**: 収益向上（thresholds.yamlに最適化結果保存）

---

## 現在の設定 (Phase 52.4)

**注**: 具体的な設定値は `config/core/thresholds.yaml` を参照してください。

### 主要セクション
- **ML統合設定**: strategy_integration・regime_ml_integration
- **TP/SL設定**: position_management（基本・レジーム別）
- **戦略設定**: 戦略パラメータ（thresholds.yamlに定義）
- **証拠金維持率**: margin.thresholds
- **Optuna最適化結果**: optuna_optimized（3階層構造）

---

## 参照

- 動的閾値設定ファイル: `config/core/thresholds.yaml`
- 統一設定履歴: `docs/設定履歴/unified_yaml_history.md`
- 戦略設定履歴: `docs/設定履歴/strategies_yaml_history.md`
- Phase履歴: `docs/開発履歴/`
- Optuna最適化: `scripts/optimization/run_phase40_optimization.py`

---

**最終更新**: 2025-11-15 (Phase 52.4)
