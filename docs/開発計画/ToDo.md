# 暗号資産取引Bot - 開発計画

## 現在の状態

**Phase 58計画中** - 戦略最適化（BBReversal無効化・DonchianChannel重み削減）

---

## Phase 57 完了サマリー

### 最終結果（固定期間バックテスト: 2025/07/01〜2025/12/31）

| 指標 | 値 |
|------|-----|
| 総損益 | **¥+23,073**（基準値） |
| 総取引数 | 501件 |
| 勝率 | 44.7% |
| PF | 1.18 |
| SR | 4.78 |
| 最大DD | 2.93% |

### 2票ルール評価結果

**結論**: 2票ルールを維持（条件付き）

発見された問題:
- BBReversal: 勝率8.3%・¥-5,451 → **無効化推奨**
- DonchianChannel: ¥-3,560 → **重み削減検討**
- 高信頼度帯の勝率が低い → **フィルター見直し**

---

## Phase 58: 戦略最適化

### 目的

Phase 57分析結果に基づき、パフォーマンスを低下させている戦略を最適化する。

### 基準値

| 指標 | Phase 57結果 | Phase 58目標 |
|------|-------------|-------------|
| 総損益 | ¥+23,073 | **≥¥+28,000** |
| PF | 1.18 | **≥1.25** |
| 勝率 | 44.7% | **≥46%** |

### Phase 58.1: BBReversal無効化

#### 背景

| 指標 | 値 |
|------|-----|
| 取引数 | 12件 (2.4%) |
| 勝率 | **8.3%** |
| 損益 | **¥-5,451** |
| 12件中勝ち | 1件 |

勝率8.3%は統計的に異常（コイントス以下）。

#### 実装内容

| ファイル | 変更内容 |
|---------|---------|
| `config/core/thresholds.yaml` | BBReversal重みを0に設定 |
| （または）`config/core/strategies.yaml` | `enabled: false` |

#### 期待効果

- 損益改善: +¥5,451
- 予測総損益: ¥+28,524

### Phase 58.2: DonchianChannel重み削減

#### 背景

| 指標 | 値 |
|------|-----|
| 取引数 | 88件 (17.6%) |
| 勝率 | 42.0% |
| 損益 | **¥-3,560** |

勝率は標準的だが、損益が赤字。

#### 実装内容

| ファイル | 変更内容 |
|---------|---------|
| `config/core/thresholds.yaml` | DonchianChannel重みを削減（例: 0.25→0.10） |

#### 期待効果

- 損益改善: +¥1,000〜3,000（推定）

### Phase 58.3: 信頼度フィルター見直し（検討）

#### 背景

| 信頼度帯 | 勝率 |
|---------|------|
| 低（<50%） | 43.8% |
| 高（≥65%） | **36.4%** |

高信頼度帯の勝率が低信頼度帯より低い逆転現象。

#### 検討内容

- 信頼度閾値の調整または撤廃
- Phase 58.1/58.2の効果を確認後に判断

---

## 実装手順

| Step | 内容 | 状態 |
|------|------|------|
| 1 | BBReversal無効化 | ⏳ |
| 2 | バックテスト実行・結果確認 | ⏳ |
| 3 | DonchianChannel重み削減 | ⏳ |
| 4 | バックテスト実行・結果確認 | ⏳ |
| 5 | 信頼度フィルター検討 | ⏳ |
| 6 | 最終検証・本番適用判断 | ⏳ |

---

## 成功基準

| 指標 | Phase 57 | Phase 58目標 | 検証方法 |
|------|---------|-------------|---------|
| 総損益 | ¥+23,073 | ≥¥+28,000 | 固定期間バックテスト |
| PF | 1.18 | ≥1.25 | 固定期間バックテスト |
| 勝率 | 44.7% | ≥46% | 固定期間バックテスト |
| 最大DD | 2.93% | ≤3.5% | 固定期間バックテスト |

---

## ロールバック基準

- PFが1.10未満に低下 → ロールバック
- 総損益が¥+20,000未満に低下 → ロールバック
- 最大DDが5%を超過 → ロールバック

---

## 関連ファイル

| ファイル | 内容 |
|---------|------|
| `docs/開発履歴/Phase_57.md` | Phase 57完了記録 |
| `docs/開発履歴/Phase_58.md` | Phase 58開発記録（作成予定） |
| `config/core/thresholds.yaml` | 戦略重み設定 |
| `scripts/backtest/standard_analysis.py` | 標準分析スクリプト |
| `results/analysis_history.csv` | 分析履歴 |

---

**最終更新**: 2026年1月7日 - Phase 58計画作成
