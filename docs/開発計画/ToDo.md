# 暗号資産取引Bot - 未達成タスク一覧

## 📋 このファイルの目的

**使用場面**:
- 未達成開発タスク確認
- 実装優先度の把握
- 進捗管理とタスク追跡

**ルール**:
- 未完了タスクのみ記載（達成済み: `docs/開発履歴/Phase_40-44.md`参照）
- **実装順序**に沿って記載（Phase 41 → 42 → 43 → 44 → 45...）
- 定期的にタスク状況を更新

**🎯 2025/10/21更新**: Phase 40.1-40.6, Phase 41.8-41.8.5, Phase 42.1-42.5, Phase 43, Phase 44完了（統合TP/SL・トレーリングストップ・技術的負債削除・SL保護・維持率制限・ML統合最適化・戦略バランス最適化完了）・次はPhase 45（Meta-Learning動的重み最適化）から開始

---

## 🚀 **実装スケジュール（概要）**

```
✅ 完了:    Phase 40.1-40.6 (Optuna最適化 + Feature Engineering)
           → 79パラメータ最適化 + 50特徴量拡張完了
           → 2025/10/16完了

✅ 完了:    Phase 41.8-41.8.5 (Strategy-Aware ML + ML統合閾値最適化)
           → 50→55特徴量・ML統合率10%→100%改善
           → Post-Integration問題解決・Train/Inference一貫性確保
           → 2025/10/17完了

✅ 完了:    Phase 42.1-42.5 (統合TP/SL + トレーリングストップ + TP/SL設定最適化)
           → 注文数91.7%削減・UI簡潔化・API削減91.7%
           → 平均利益+10-20%向上・含み益保護
           → TP/SL設定最適化（SL 2%・TP 3%・RR比1.5:1）
           → 2025/10/20完了

✅ 完了:    Phase 43 (技術的負債削除・SL保護・維持率制限)
           → -320行コード削減・クリーンアーキテクチャ実現
           → SL最悪位置保護（ナンピン時損失拡大防止）
           → 維持率100%未満エントリー拒否（追証リスク回避）
           → 2025/10/21完了

✅ 完了:    Phase 44 (ML統合・戦略バランス最適化)
           → 最終信頼度+13-17%・戦略バランス改善
           → ML統合閾値最適化・MochipoyAlert信頼度制限・MultiTimeframe改善
           → 2025/10/21完了

Week 1-2:  Phase 45 (Meta-Learning動的重み最適化) ⭐最優先・次のステップ
           → ML信頼度+50-100%追加・市場適応型統合・低リスク

Week 2-3:  Phase 46 (確定申告対応システム) 🔴法的必須
           → 取引履歴CSV・損益計算・税務レポート・2025年3月期限

Week 3-4:  Phase 47 (Discord通知最適化v2) 💰コスト削減
           → 通知戦略見直し・月額さらに削減・通知ノイズ-60%

Week 4-6:  Phase 52 (情報源多様化・低コスト優先実装) ⭐新規優先
           Phase 52.1: マクロ経済指標統合（ゼロコスト・5-10特徴量）
           Phase 52.2: 時間的特徴量拡張（ゼロコスト・5-8特徴量）
           Phase 52.3: News API統合（月額$50-100・10-15特徴量）
           → 55 → 75-88特徴量（+36-60%）・2025年最先端レベル

Week 6-8:  Phase 48 (3軸マルチタイムフレーム) 📈性能向上
           → 5分足追加・エントリー精度+5-10%・Phase 52効果確認後

Week 8-10: Phase 49 (モバイル管理アプリ) 📱運用改善
           → bot停止/再開・ステータス確認・PWA実装

継続的:    Phase 50 (戦略・特徴量拡張) 🔧継続改善
           → 新戦略追加・特徴量最適化・A/Bテスト

Month 3-:  Phase 51 (マルチアセット対応) 🌐拡張機能
           → bitbank ETH/JPY・XRP/JPY対応
           → 海外CEX/DEXマイナーアルトコイン対応（BTC連動性薄）
           → ポートフォリオ最適化

保留:      Phase 52.4+ (高コスト情報源) ⚠️高リスク・後回し
           → SNS感情分析・オンチェーン分析（月額$100-300）
           → Phase 44-52.3効果測定後に再評価
```

---

# 🔥 **未達成タスク一覧**

---

## ✅ Phase 41完了サマリー（2025/10/17）

**Phase 41.8完了**: Strategy-Aware ML実装（実戦略信号学習）
- ✅ 訓練時と推論時の一貫性確保（0-fill → 実戦略信号）
- ✅ 実戦略信号生成メソッド実装（Look-ahead bias防止）
- ✅ ML学習データ準備メソッド修正（55特徴量）
- ✅ MLモデル再学習（Optuna 50 trials）
- ✅ ペーパートレード検証（10分間・エラーゼロ）
- ✅ 品質チェック（1,081テスト100%成功・69.57%カバレッジ）

**Phase 41.8.5完了**: ML統合閾値最適化
- ✅ ML統合閾値調整（0.6→0.45、0.8→0.60）
- ✅ 3段階統合ロジック再設計（3クラス分類最適化）
- ✅ ペーパートレード検証（10分間・ML統合率100%達成）
- ✅ Phase 41の設計思想完全実現

**達成効果**:
- 特徴量: 50 → 55個（+10%）
- ML統合時間: 10% → 70-80%（+600-700%）
- Train/Inference一貫性: 完全確保
- Post-Integration問題: 解決

**詳細**: `docs/開発履歴/Phase_40-43.md` 参照

---

## ✅ Phase 42完了サマリー（2025/10/18）

**Phase 42.1完了**: 統合TP/SL実装
- ✅ UI簡潔化: 24個→2個の注文（91.7%削減）
- ✅ API呼び出し削減: 24回→2回（91.7%削減）
- ✅ 加重平均価格計算・統合ID管理実装
- ✅ 56テスト追加（1,081→1,137テスト・100%成功）
- ✅ 69.90%カバレッジ達成
- ✅ 38分間ペーパートレード検証（エラーゼロ）

**Phase 42.2完了**: トレーリングストップ実装
- ✅ トレーリングSL監視ロジック実装
- ✅ Bybit/Binance準拠設定（2%発動・3%距離）
- ✅ 最小利益確保機能（0.5%保証）
- ✅ TP自動キャンセル機能（SL>TP時）
- ✅ Discord通知統合

**Phase 42.3完了**: バグ修正3件
- ✅ ML Agreement Logic修正（strict matching）
- ✅ Feature Warning抑制（strategy_signal_*除外）
- ✅ 証拠金チェックリトライ機能（Error 20001対策）

**達成効果**:
- 注文数削減: 91.7%
- API呼び出し削減: 91.7%
- 平均利益額: +10-20%向上（期待）
- ML統合精度: 向上
- システム安定性: 向上

**詳細**: `docs/開発履歴/Phase_40-43.md` 参照

---

## ✅ Phase 44完了サマリー（2025/10/21）

**Phase 44完了**: 技術的負債削除・SL保護・維持率制限実装（再設計版）
- ✅ Phase 43.5技術的負債削除（-320行コード削減）
- ✅ Phase 43 SL最悪位置保護（ナンピン時損失拡大防止）
- ✅ Phase 43 維持率100%未満エントリー拒否（追証リスク回避）
- ✅ ペーパートレード検証（10分間・エラーゼロ）
- ✅ 品質チェック（1,141テスト100%成功・69.47%カバレッジ）

**達成効果**:
- コード削減: -224行（-320行削除 + 96行追加）
- クリーンアーキテクチャ実現: consolidated TP/SL強制化
- SL保護: 初期設定（2% = 200円）を超える損失防止
- 追証リスク回避: 維持率100%未満エントリー拒否

**詳細**: `docs/開発履歴/Phase_40-44.md` 参照

---

## ✅ Phase 44完了サマリー（2025/10/21）

**Phase 44完了**: ML統合・戦略バランス最適化
- ✅ Phase 44.1: ML統合閾値最適化（ml_weight 0.35・disagreement_penalty 0.85）
- ✅ Phase 44.2: MochipoyAlert信頼度上限設定（buy/sell_strong_max 0.70）
- ✅ Phase 44.3: MultiTimeframe戦略改善（base_confidence 0.35・範囲30-40%）
- ✅ Phase 44.4: 重複設定修正（Line 430 disagreement_penalty同期）
- ✅ Phase 44.5: ペーパートレード検証（10分間・エラーゼロ）
- ✅ 品質チェック（1,157テスト100%成功・69.45%カバレッジ）

**達成効果**:
- 最終信頼度: +13-17%向上（47.7% → 54-56%）
- ML統合改善: ペナルティ-30% → -15%
- MochipoyAlert過剰影響防止: 信頼度最大95% → 70%制限
- MultiTimeframe横ばい市場改善: 信頼度16% → 30-40%（+88-150%）
- 戦略バランス最適化: 3戦略の協調的判断実現

**詳細**: `docs/開発履歴/Phase_40-44.md` 参照

---

## Phase 45: Meta-Learning動的重み最適化システム（1週間・8-10時間）⭐最優先・次のステップ

**背景**: Phase 41-45で多様な情報源が揃った後の最終統合最適化
- **Phase 41完了後**: 戦略5つ + ML予測（55特徴量）= 6つの判断
- **Phase 46完了後**: 戦略5つ + ML予測（80-100特徴量）= 6つの判断
- **現在の問題**: 固定重み（戦略70% + ML30%）・市場状況に関係なく常に同じ重み

**革新的解決策**: 市場状況に応じて動的に重みを最適化（Meta-Learning）

```
現在（Phase 29.5固定重み統合）:
  戦略判断（5戦略統合） → 70% ┐
  ML予測（80-100特徴量） → 30% ├─→ 加重平均 → 最終判断
                             ┘
  ※常に固定重み（トレンド相場でもレンジ相場でも同じ）

理想（Phase 44 Meta-Learning）:
  市場状況分析 ───────────────┐
  戦略判断（5戦略統合）         ├─→ Meta-ML → 動的重み決定 → 最終判断
  ML予測（80-100特徴量）         │    （例: トレンド相場: 戦略40% + ML60%）
  過去パフォーマンス履歴       ┘         （例: レンジ相場: 戦略80% + ML20%）
```

**Meta-Learning入力特徴量**:
```
1. 市場状況特徴量（10-15特徴量）:
   - ボラティリティ状態（ATR・BB幅・過去N日標準偏差）
   - トレンド強度（ADX・EMAスプレッド・方向性指数）
   - レンジ/トレンド判定（Donchian幅・R2・フラクタル次元）
   - 出来高状態（Volume Ratio・異常検出）
   - 市場レジーム（強気/弱気/横ばい）

2. 戦略パフォーマンス履歴（5特徴量）:
   - 各戦略の過去N取引の勝率（7日/30日移動平均）
   - 各戦略の過去N取引の平均利益
   - 各戦略の信頼度推移

3. ML予測パフォーマンス履歴（3特徴量）:
   - ML過去N取引の勝率（7日/30日移動平均）
   - ML予測信頼度推移
   - ML予測一致率（戦略との）

合計: 18-23特徴量
```

**Meta-Learning出力**:
```
- 戦略重み: 0.0-1.0（動的）
- ML重み: 0.0-1.0（動的）
※合計1.0に正規化

例:
  トレンド相場（ADX>30, 方向性明確）:
    → 戦略40% + ML60%（MLがトレンド得意）

  レンジ相場（ADX<20, ボラ低）:
    → 戦略80% + ML20%（戦略がレンジ得意）

  高ボラティリティ相場（ATR高, BB幅大）:
    → 戦略60% + ML40%（バランス重視）
```

### Phase 45.1: Meta-Learning設計（2時間）
- [ ] **アーキテクチャ設計**: Meta-MLモデル構造決定
  - 入力: 市場状況18-23特徴量
  - 出力: 戦略重み・ML重み（2値・合計1.0）
- [ ] **学習データ設計**: 過去取引データからラベル生成
  - 各市場状況で「どちらの判断が正しかったか」を記録
  - 最適重みを事後的に計算（教師データ）
- [ ] **モデル選定**: LightGBM Regressor（軽量・高速）

### Phase 45.2: 市場状況特徴量実装（2-3時間）
- [ ] **MarketRegimeAnalyzer実装**: 市場状況分析クラス
  - `analyze_market_regime()`: レジーム判定（トレンド/レンジ/高ボラ）
  - `get_market_features()`: 市場状況特徴量取得
- [ ] **パフォーマンス履歴トラッキング**: 戦略・MLの過去パフォーマンス記録
  - `PerformanceTracker`: 勝率・平均利益・信頼度推移
- [ ] **単体テスト**: 市場状況分析・履歴トラッキング確認

### Phase 45.3: Meta-ML学習パイプライン構築（2-3時間）
- [ ] **学習データ生成**: 過去180日取引データから最適重み計算
  - 各取引での市場状況特徴量抽出
  - 事後的最適重み計算（どちらが正しかったか）
- [ ] **Meta-ML学習**: LightGBM回帰モデル学習
  - `train_meta_learning_model.py` スクリプト作成
  - 交差検証・ハイパーパラメータ最適化
- [ ] **モデル保存**: `models/meta_learning/meta_model.pkl`

### Phase 45.4: 統合ロジック実装（2時間）
- [ ] **TradingCycleManager拡張**: Meta-ML統合
  - `_get_dynamic_weights()`: Meta-MLで動的重み取得
  - `_integrate_with_meta_learning()`: 動的重み適用統合
- [ ] **thresholds.yaml拡張**: Meta-Learning設定追加
  - `meta_learning.enabled: true`
  - `meta_learning.fallback_weights`: フォールバック固定重み
- [ ] **単体テスト**: 動的重み計算・統合ロジック確認

### Phase 45.5: バックテスト検証・ライブ適用（2時間）
- [ ] **バックテスト実行**: 180日データで効果検証
  - 固定重み（Phase 29.5）vs 動的重み（Phase 44）
  - シャープレシオ・勝率・平均利益比較
- [ ] **ペーパートレード検証**: 1-2日動作確認
- [ ] **ライブ適用**: 段階的有効化・継続監視

**Phase 45期待効果**:
- ✅ ML信頼度向上: +50-100%（Phase 40-42の効果に追加）
- ✅ 市場適応型統合: 市場状況に応じた最適な判断
- ✅ 戦略・ML双方の強みを最大化: トレンド相場はML重視・レンジ相場は戦略重視
- ✅ シャープレシオ追加向上: +30-50%期待
- ✅ 過学習リスク低: シンプルなMeta-ML・十分な学習データ

**実装場所**:
- `src/ml/meta_learning.py`: Meta-MLモデル・MarketRegimeAnalyzer・PerformanceTracker
- `src/core/services/trading_cycle_manager.py`: Meta-ML統合ロジック
- `scripts/ml/train_meta_learning_model.py`: Meta-ML学習スクリプト
- `config/core/thresholds.yaml`: Meta-Learning設定

---

# 📊 **Phase 46: 確定申告対応システム（最優先・3-4日）**

## 🔴 **法的必須要件: 2025年3月確定申告期限**

**背景**: 暗号資産取引の確定申告義務
- **法的要件**: 年間20万円以上の利益で確定申告必須
- **期限**: 2025年3月15日（2024年分確定申告）
- **現状**: 手作業での取引履歴集計・損益計算（10時間以上）
- **リスク**: 計算ミス・税務リスク・時間的負担

**解決策**: 完全自動化された確定申告サポートシステム

```
現状（手作業）:
  bitbank取引履歴ダウンロード → Excel集計 → 損益計算 → 確定申告書作成
                              ↑ 10時間以上・ミスリスク高

Phase 44（自動化）:
  bot自動記録 → 1クリックCSV出力 → 自動損益計算 → 税務レポート生成
                              ↑ 5分・正確性100%
```

---

## Phase 46実装タスク

### Phase 46.1: 取引履歴記録システム（1日・2-3時間）
- [ ] **TradeHistoryRecorder実装**: すべての取引を自動記録
  - エントリー・エグジット・TP/SL発動を記録
  - 日時・取引種別・数量・価格・手数料・損益を保存
  - SQLiteデータベース（`data/trade_history.db`）
  - 取引実行時にリアルタイム記録

- [ ] **データモデル設計**:
```python
class TradeRecord:
    trade_id: str           # 取引ID
    timestamp: datetime     # 取引日時（JST）
    trade_type: str         # "entry" / "exit" / "tp" / "sl"
    side: str               # "buy" / "sell"
    amount: float           # 取引数量（BTC）
    price: float            # 約定価格（円）
    fee: float              # 手数料（円）
    pnl: float              # 実現損益（円）※exitのみ
    balance: float          # 取引後残高（円）
    note: str               # メモ
```

- [ ] **統合**: ExecutionServiceに自動記録機能追加

### Phase 46.2: CSV出力機能（0.5日・1-2時間）
- [ ] **CSVエクスポーター実装**: `scripts/tax/export_trade_history.py`
  - 期間指定（例: 2024年1月1日～12月31日）
  - 暗号資産取引所フォーマット対応
  - 国税庁推奨フォーマット対応

- [ ] **出力フォーマット**:
```csv
取引日時,種別,通貨,数量,価格,手数料,損益,備考
2024-01-15 10:30:00,買,BTC,0.001,6500000,65,,-
2024-01-15 15:45:00,売,BTC,0.001,6550000,66,49869,利益確定
```

- [ ] **CLI実装**: `python scripts/tax/export_trade_history.py --year 2024`

### Phase 46.3: 損益計算エンジン（1日・2-3時間）
- [ ] **PnLCalculator実装**: `src/tax/pnl_calculator.py`
  - **移動平均法対応**（総平均法）: 国税庁推奨
  - 年間損益集計・月別サマリー
  - 取得原価・譲渡原価自動計算

- [ ] **計算ロジック**:
```python
class PnLCalculator:
    def calculate_annual_pnl(self, year: int) -> dict:
        """年間損益計算"""
        return {
            "total_pnl": 125000,           # 年間損益（円）
            "total_profit": 200000,        # 総利益（円）
            "total_loss": -75000,          # 総損失（円）
            "num_trades": 150,             # 取引回数
            "win_rate": 0.62,              # 勝率
            "monthly_pnl": {...}           # 月別損益
        }
```

- [ ] **税務対応**:
  - 雑所得計算（総合課税）
  - 取得原価管理（移動平均法）
  - 手数料控除対応

### Phase 46.4: 税務レポート生成（1日・2-3時間）
- [ ] **TaxReportGenerator実装**: `src/tax/report_generator.py`
  - **PDF出力**: 確定申告書添付用
  - **国税庁フォーマット対応**: 仮想通貨取引損益計算書
  - **サマリーレポート**: 年間取引統計

- [ ] **レポート内容**:
```
=== 2024年 暗号資産取引損益計算書 ===

1. 基本情報
   - 取引所: bitbank
   - 通貨: BTC/JPY
   - 計算方法: 移動平均法

2. 年間サマリー
   - 年間損益: +125,000円
   - 取引回数: 150回
   - 勝率: 62%
   - 平均利益: +833円/取引

3. 月別損益
   - 1月: +15,000円
   - 2月: +8,500円
   ...
```

- [ ] **CLI実装**: `python scripts/tax/generate_tax_report.py --year 2024`

### Phase 46.5: Discord通知統合・自動化（0.5日・1時間）
- [ ] **年末自動通知**: 12月31日23:59に年間損益速報
  - 年間損益・取引回数・勝率
  - 確定申告要否判定（利益20万円以上）

- [ ] **月次サマリー通知**: 毎月1日に前月損益
  - 月間損益・取引回数・勝率推移

- [ ] **手動レポート生成**: Discord通知経由で実行
  - `/tax_report 2024` コマンド対応

**Phase 46期待効果**:
- ✅ 確定申告作業時間: 10時間 → 30分（-95%）
- ✅ 計算精度: 100%（ミスリスク0）
- ✅ 税務リスク: 0%（正確な損益計算）
- ✅ 法的コンプライアンス: 100%達成
- ✅ 月次損益可視化: リアルタイム

**実装場所**:
- `src/tax/trade_history.py`: 取引履歴記録
- `src/tax/pnl_calculator.py`: 損益計算エンジン
- `src/tax/report_generator.py`: レポート生成
- `scripts/tax/export_trade_history.py`: CSV出力CLI
- `scripts/tax/generate_tax_report.py`: レポート生成CLI
- `data/trade_history.db`: SQLiteデータベース

---

# 💰 **Phase 47: Discord通知最適化v2（1-2日）**

## 背景・目的

**Phase 37.3完了**: 月700-900円削減（35-45%）→ 月額1,100-1,300円達成
**Phase 46目標**: さらなるコスト削減・通知ノイズ削減

**期待効果**: 月額さらに-20-30%削減 → 月額880-1,040円へ

## 実装タスク

### Phase 47.1: 通知戦略見直し（0.5日・1-2時間）
- [ ] **重要度3段階フィルタリング強化**:
  - Critical: 即時送信（そのまま）
    - 残高不足・証拠金不足・取引エラー
  - Warning: 条件付き送信（新規実装）
    - 1時間に1回まで（同種Warning集約）
    - API軽微エラー・ML警告・市場異常検出
  - Info: 完全停止（Phase 37.3で実施済み）

- [ ] **Warning通知集約ロジック**:
```python
class WarningAggregator:
    def should_send_warning(self, warning_type: str) -> bool:
        last_sent = self._get_last_sent_time(warning_type)
        if datetime.now() - last_sent > timedelta(hours=1):
            return True  # 1時間経過 → 送信OK
        return False  # まだ1時間未満 → 送信スキップ
```

### Phase 47.2: 通知バッチ送信実装（0.5日・1-2時間）
- [ ] **5分ごとのバッチ送信**:
  - 1サイクル内の複数Warning → 1通知に集約
  - テンプレート: 「⚠️ 5分間サマリー: 3件のWarning発生」

- [ ] **Discord Embed活用**:
  - 1通知で複数Warning表示（フィールド分割）
  - API呼び出し削減（3通知 → 1通知）

### Phase 47.3: Discord Webhook代替検討（0.5日・1時間）
- [ ] **代替サービス調査**:
  - Slack無料プラン（月額0円・10,000メッセージ/月）
  - Telegram Bot（月額0円・無制限）
  - LINE Notify（月額0円・1,000通知/日）

- [ ] **コスト比較**:
  - Discord Webhook: 月1,100-1,300円（現状）
  - Slack/Telegram: 月0円（移行候補）

- [ ] **移行判断**: コスト削減効果 vs 移行コスト

**Phase 47期待効果**:
- ✅ 月額コスト: さらに-20-30%削減（月880-1,040円へ）
- ✅ 通知ノイズ: -60%削減（Warning集約）
- ✅ Discord API呼び出し: -40%削減
- ✅ 運用効率: 向上（重要通知のみ受信）

---

# 📈 **Phase 48: 3軸マルチタイムフレーム戦略（1-2週間）**

## 背景・目的

**問題**: 5分間隔実行だが4h/15m足の2軸のみ
**解決**: 5分足を活用して直近市場状況を反映

**期待効果**: エントリー精度+5-10%向上

## 実装タスク

### Phase 48.1: 5分足補助指標実装（3-4日）
- [ ] DataPipeline拡張: 5分足OHLCV取得
- [ ] 5分足分析ロジック: EMA5/10クロス・RSI・価格変動率
- [ ] MultiTimeframe戦略拡張: 3軸構成（4h:60%, 15m:30%, 5m:10%）
- [ ] フィルターモード実装: 逆シグナル×0.8・同シグナル×1.1
- [ ] thresholds.yaml設定追加

### Phase 48.2: バックテスト検証（2-3日）
- [ ] 2軸 vs 3軸比較
- [ ] ノイズ影響評価
- [ ] 最適パラメータ探索

### Phase 48.3: ペーパートレード検証（1-2週間）
- [ ] 実動作確認

### Phase 48.4: 段階的ライブ適用
- [ ] 効果確認時のみ有効化
- [ ] 継続監視

---

# 📱 **Phase 49: モバイル管理アプリ（PWA）（1-2週間）**

## 背景・目的
**問題**: 外出先でbotの停止・確認ができない
**解決**: スマホからbot制御可能なPWA実装
**期待効果**: 運用効率向上・緊急対応可能化

## 実装タスク

### Phase 49.1: 認証システム実装（2-3日・4-6時間）
- [ ] JWT認証実装（`src/web/auth/jwt_manager.py`）
- [ ] 環境変数でパスワード管理（SECRET_ADMIN_PASSWORD）
- [ ] トークン有効期限24時間
- [ ] 品質チェック: 認証テスト追加

### Phase 49.2: REST API実装（2-3日・4-6時間）
- [ ] FastAPI実装（`src/web/api/bot_control.py`）
- [ ] エンドポイント:
  - `GET /api/status` - システム状況取得
  - `POST /api/start` - bot起動
  - `POST /api/stop` - bot停止
  - `GET /api/balance` - 残高取得
  - `GET /api/positions` - ポジション一覧
- [ ] CORS設定（Cloud Run対応）
- [ ] 品質チェック: API統合テスト追加

### Phase 49.3: PWAフロントエンド実装（3-4日・6-8時間）
- [ ] HTML/CSS/JavaScript実装（`src/web/static/`）
- [ ] Material Design Lite使用（CDN）
- [ ] レスポンシブデザイン（スマホ最適化）
- [ ] PWA Manifest作成（`manifest.json`）
- [ ] Service Worker実装（オフライン対応）
- [ ] 機能:
  - システム状況表示
  - Start/Stopボタン
  - 残高・ポジション表示
  - エラー通知

### Phase 49.4: Cloud Runデプロイ（1日・2-3時間）
- [ ] Dockerfile拡張（FastAPI追加）
- [ ] 環境変数設定（SECRET_ADMIN_PASSWORD）
- [ ] ヘルスチェック設定（`/health`）
- [ ] HTTPSアクセス確認
- [ ] PWAインストール動作確認

### Phase 49.5: セキュリティ強化（1日・2-3時間）
- [ ] レート制限実装（1分10リクエスト）
- [ ] IP制限検討（Cloud Armorオプション）
- [ ] 監査ログ実装（全API操作記録）
- [ ] Discord通知統合（API操作通知）

**実装時間**: 9-12日（18-26時間）
**リスク**: 低（認証さえ堅牢なら安全）
**優先度**: 中（運用効率大幅向上）

---

# 🔧 **Phase 50: 戦略・特徴量拡張パッケージ（継続的改善）**

## 背景・目的
**問題**: 5戦略55特徴量で固定・市場変化に柔軟対応できない
**解決**: 継続的に戦略・特徴量を追加する仕組み確立
**期待効果**: ML予測精度継続的向上・市場適応力強化

## 実装タスク

### Phase 50.1: 戦略追加候補（随時実装・各2-3日）
- [ ] **Ichimoku Cloud Strategy**（一目均衡表）:
  - 雲の厚さ・転換線/基準線クロス・遅行スパン
  - 期待効果: トレンド転換精度+5-8%
- [ ] **Volume Profile Strategy**（出来高プロファイル）:
  - POC（Point of Control）・VAH/VAL・出来高集中帯
  - 期待効果: サポート/レジスタンス精度+8-12%
- [ ] **Elliott Wave Strategy**（エリオット波動）:
  - 波動カウント・フィボナッチ比率・衝撃波/調整波
  - 期待効果: 中長期トレンド予測+10-15%
- [ ] **Market Microstructure Strategy**（マーケットマイクロ構造）:
  - Bid/Ask Spread・Order Book Imbalance・Trade Flow
  - 期待効果: 短期エントリー精度+5-10%

### Phase 50.2: 特徴量追加候補（随時実装・各1-2日）
- [ ] **時間的特徴量**（5-8特徴量追加）:
  - 曜日・時間帯・月初/月末・四半期末
  - 期待効果: 時間パターン認識精度+3-5%
- [ ] **マクロ経済特徴量**（3-5特徴量追加）:
  - ドル円相場・日経平均・米国債利回り
  - 期待効果: 相関資産連動精度+5-8%
- [ ] **オンチェーン特徴量**（5-10特徴量追加）:
  - Active Addresses・Transaction Volume・Miner Flow
  - 期待効果: ファンダメンタル予測+8-12%
- [ ] **センチメント特徴量**（3-5特徴量追加）:
  - Fear & Greed Index・SNS感情分析・検索トレンド
  - 期待効果: 市場心理反映+5-10%

### Phase 50.3: 継続的評価フレームワーク（1週間・8-10時間）
- [ ] 戦略・特徴量AB Testing実装
- [ ] バックテスト自動評価スクリプト
- [ ] F1スコア・シャープレシオ比較
- [ ] 自動採用/除外判定（閾値ベース）
- [ ] 週次レポート生成（Discord通知）

**実装時間**: 継続的（各機能2-3日ずつ）
**リスク**: 低（既存フレームワーク活用）
**優先度**: 中（Phase 44-48後に継続実施）

---

# 🌐 **Phase 51: マルチアセット対応（2-3週間）**

## 背景・目的

**問題**: BTC/JPY専用・他資産に拡大できない
**あいかわひびき記事の洞察**: "初心者や上級者などは関係なくBotはアルトコインから入るべき"
**2025年市場データ**: ETH-BTC相関0.35・XRP-BTC相関0.53（decoupling傾向）

**Phase 51戦略**:
1. **優先**: 海外CEX/DEXマイナーアルトコイン（BTC連動性薄・予測容易）
2. **次点**: bitbank ETH/JPY・XRP/JPY（確定申告簡単・2025年decoupling傾向）

**期待効果**: リスク分散・収益機会拡大+30-50%・予測精度向上

## 実装タスク

### Phase 51.1: アセット抽象化（3-4日・6-8時間）
- [ ] AssetConfigクラス実装（`src/core/config/asset_config.py`）
- [ ] symbol・min_trade_size・fee_rate・exchange_typeの抽象化
- [ ] unified.yaml拡張（multi_asset・multi_exchange設定追加）
- [ ] 品質チェック: アセット切り替えテスト

### Phase 51.2: 海外CEX/DEXマイナーアルトコイン対応（優先）（4-5日・8-10時間）
- [ ] **候補資産選定**:
  - Binance: SOL・AVAX・MATIC・LINK（mid-cap altcoins）
  - Uniswap/PancakeSwap: DeFiトークン（AAVE・UNI・CAKE）
  - BTC相関分析（相関係数0.3未満推奨）
  - 流動性・ボラティリティ分析

- [ ] **取引所API統合**:
  - Binance API対応（ccxt拡張）
  - Uniswap/Web3.py統合（DEX対応）
  - 手数料構造対応（Maker/Taker）

- [ ] **特徴量生成対応**:
  - アルトコイン特有特徴量追加
  - BTC相関係数特徴量（Phase 52.1拡張）
  - DeFi TVL特徴量（DeFiトークン）

- [ ] **戦略パラメータ最適化**:
  - ボラティリティ調整（altcoins > BTC）
  - 流動性フィルター実装

- [ ] **ML再学習**: 選定資産過去180日データ
- [ ] **バックテスト検証**: 180日データで効果検証

**期待効果**:
- ✅ BTC連動性薄い（相関0.3未満）
- ✅ 予測精度向上（参加者少ない）
- ✅ 収益機会拡大+30-50%
- ⚠️ 確定申告複雑化（海外取引所）
- ⚠️ 流動性リスク（マイナーアルトコイン）

### Phase 51.3: bitbank ETH/JPY対応（次点）（3-4日・6-8時間）
- [ ] Bitbank ETH/JPY API対応
- [ ] 特徴量生成ETH対応
- [ ] ETH-BTC相関係数特徴量追加（Phase 52.1拡張）
- [ ] 戦略パラメータETH最適化
- [ ] ML再学習（ETH/JPY過去180日）
- [ ] バックテスト検証（ETH/JPY 180日）

**期待効果**:
- ✅ 確定申告簡単（bitbank国内）
- ✅ 2025年decoupling傾向（相関0.35）
- ⚠️ 歴史的には高相関（リスク中）

### Phase 51.4: bitbank XRP/JPY対応（次点）（3-4日・6-8時間）
- [ ] Bitbank XRP/JPY API対応
- [ ] 特徴量生成XRP対応
- [ ] XRP-BTC相関係数特徴量追加（Phase 52.1拡張）
- [ ] 戦略パラメータXRP最適化
- [ ] ML再学習（XRP/JPY過去180日）
- [ ] バックテスト検証（XRP/JPY 180日）

**期待効果**:
- ✅ 確定申告簡単（bitbank国内）
- ✅ 2025年decoupling傾向（相関0.53）
- ✅ ETHより独立性高い

### Phase 51.5: ポートフォリオ最適化（4-5日・8-10時間）
- [ ] PortfolioOptimizer実装（`src/trading/portfolio/optimizer.py`）
- [ ] 資金配分アルゴリズム（Kelly基準ベース）
- [ ] 相関係数考慮リスク分散
- [ ] 動的リバランシング（週次）
- [ ] バックテスト検証（BTC+altcoinsポートフォリオ）

### Phase 51.6: 段階的ライブ適用（2-3週間）
- [ ] ペーパートレード検証（各資産1週間）
- [ ] 少額ライブ検証（各1万円・1週間）
- [ ] マルチアセット同時運用検証（1-2週間）
- [ ] BTC vs altcoins効果比較（6ヶ月間）
- [ ] 最終デプロイ判断（優れた方に主軸移行）

**Phase 51実施判断条件**:
- Phase 44-52.3完了後・6ヶ月間BTC戦略効果測定
- BTC戦略収益不十分 → Phase 51実施
- BTC戦略収益十分 → Phase 51保留

**実装時間**: 17-21日（34-44時間）
**リスク**: 中-高（確定申告複雑化・流動性リスク・運用複雑化）
**優先度**: 中（Phase 44-52.3完了・6ヶ月効果測定後に実施）

---

# ⭐ **Phase 52: 情報源多様化（低コスト優先実装）**

## 背景・目的

**2025年最先端研究との比較**:
- ✅ あなたのbot: Random Forest・XGBoost・LightGBM（最先端一致）
- ✅ あなたのbot: 55特徴量（Phase 41.8.5完了）
- ❌ 2025年最先端: NLP感情分析・マクロ経済指標・時間的特徴量
- ❌ 2025年最先端: 80-100特徴量

**Phase 52戦略**: 低コスト実装（52.1-52.3）を優先・高コスト実装（52.4+）は保留

**期待効果**: 55 → 75-88特徴量（+36-60%）・2025年最先端レベル到達

---

## Phase 52実装タスク

### Phase 52.1: マクロ経済指標統合（2-3日・4-6時間）⭐最優先・ゼロコスト
- [ ] **無料データソース統合**:
  - ドル円相場（USD/JPY）: Yahoo Finance API（無料）
  - 日経平均株価（N225）: Yahoo Finance API（無料）
  - 米国債10年利回り: FRED API（無料）
  - Fear & Greed Index: Alternative.me API（無料）
  - ビットコインドミナンス: CoinGecko API（無料）

- [ ] **データパイプライン実装**:
  - ファイル: `src/features/macro_economic.py`
  - `MacroEconomicIndicators`クラス実装
  - 日次データ取得・キャッシュ機能
  - 変化率・移動平均計算

- [ ] **特徴量追加**（5-10特徴量）:
  - `usdjpy_price`: ドル円現在価格
  - `usdjpy_change_1d`: ドル円1日変化率
  - `nikkei_price`: 日経平均現在価格
  - `nikkei_change_1d`: 日経平均1日変化率
  - `us_10y_yield`: 米国債10年利回り
  - `fear_greed_index`: Fear & Greed Index（0-100）
  - `btc_dominance`: ビットコインドミナンス（%）
  - `usdjpy_ma7`: ドル円7日移動平均
  - `nikkei_ma7`: 日経平均7日移動平均

- [ ] **feature_order.json更新**: マクロ経済特徴量追加
- [ ] **単体テスト**: データ取得・特徴量計算確認
- [ ] **ML再学習**: 55 → 60-65特徴量対応

**期待効果**:
- ✅ 特徴量数: +5-10（55 → 60-65）
- ✅ BTC予測精度向上: +5-8%（マクロ経済相関反映）
- ✅ コスト: ゼロ円/月
- ✅ リスク: 最低（無料API・データ安定）

---

### Phase 52.2: 時間的特徴量拡張（2-3日・4-6時間）⭐最優先・ゼロコスト
- [ ] **時間的パターン特徴量実装**:
  - ファイル: `src/features/temporal.py`
  - `TemporalFeatures`クラス実装
  - 曜日・時間帯・月・四半期効果

- [ ] **特徴量追加**（5-8特徴量）:
  - `day_of_week`: 曜日（0=月曜, 6=日曜）
  - `hour_of_day`: 時間帯（0-23）
  - `is_weekend`: 週末フラグ（0/1）
  - `is_month_start`: 月初フラグ（1-5日）
  - `is_month_end`: 月末フラグ（26-31日）
  - `is_quarter_end`: 四半期末フラグ（3,6,9,12月末）
  - `week_of_month`: 月内週番号（1-5）
  - `is_asian_trading_hours`: アジア時間帯フラグ（9-15時JST）

- [ ] **feature_order.json更新**: 時間的特徴量追加
- [ ] **単体テスト**: 時間的特徴量計算確認
- [ ] **ML再学習**: 60-65 → 65-73特徴量対応

**期待効果**:
- ✅ 特徴量数: +5-8（60-65 → 65-73）
- ✅ 時間パターン認識精度: +3-5%（曜日・時間帯効果反映）
- ✅ コスト: ゼロ円/月
- ✅ リスク: 最低（内部計算のみ）

**2025年最先端研究での有効性**:
- ✅ 時間的特徴量は標準装備
- ✅ 曜日・時間帯効果は統計的に有意

---

### Phase 52.3: News API統合（3-4日・6-8時間）⚠️中優先・月額$50-100
- [ ] **News API統合**:
  - CryptoCompare News API（無料枠: 50リクエスト/日）
  - Finnhub News API（無料枠: 60リクエスト/分）
  - ファイル: `src/features/news_sentiment.py`

- [ ] **感情分析実装**:
  - `NewsSentimentAnalyzer`クラス実装
  - VADER感情分析（無料・軽量）
  - Positive/Negative/Neutral分類
  - 過去24時間ニュース集約

- [ ] **特徴量追加**（10-15特徴量）:
  - `news_count_24h`: 過去24時間ニュース数
  - `news_positive_ratio`: ポジティブニュース比率
  - `news_negative_ratio`: ネガティブニュース比率
  - `news_neutral_ratio`: ニュートラルニュース比率
  - `news_sentiment_score`: 感情スコア平均（-1～1）
  - `news_sentiment_ma7`: 感情スコア7日移動平均
  - `news_volatility_7d`: 感情スコア7日標準偏差
  - `major_news_flag`: 重大ニュースフラグ（閾値ベース）
  - `news_source_diversity`: ニュースソース多様性
  - `bitcoin_mention_count`: "Bitcoin"言及数

- [ ] **feature_order.json更新**: ニュース感情特徴量追加
- [ ] **単体テスト**: News API接続・感情分析確認
- [ ] **ML再学習**: 65-73 → 75-88特徴量対応

**期待効果**:
- ✅ 特徴量数: +10-15（65-73 → 75-88）
- ✅ 市場センチメント反映: +5-10%（ニュース感情分析）
- ⚠️ コスト: 月額$50-100（無料枠超過時）
- ⚠️ リスク: 中（API依存・感情分析精度）

**2025年最先端研究での有効性**:
- ✅ NLP感情分析は標準装備
- ✅ 2025年AI Trading Bot必須機能

**実施判断条件**:
- Phase 52.1-52.2効果測定後に判断
- 65-73特徴量で十分な精度なら保留
- 精度不足なら実施

---

### Phase 52.4: バックテスト検証・ML再学習（2-3日・4-6時間）
- [ ] **バックテスト実行**: 180日データで効果検証
  - 55特徴量 vs 60-65特徴量（Phase 52.1完了後）
  - 60-65特徴量 vs 65-73特徴量（Phase 52.2完了後）
  - 65-73特徴量 vs 75-88特徴量（Phase 52.3完了後）
  - F1スコア・シャープレシオ・勝率比較

- [ ] **ML再学習**: 最終特徴量セットで本番モデル学習
  - Optuna 50 trials（ハイパーパラメータ最適化）
  - 3モデルアンサンブル（LightGBM・XGBoost・RandomForest）
  - models/production/更新

- [ ] **ペーパートレード検証**: 1-2日動作確認
- [ ] **ライブ適用**: 段階的有効化・継続監視

**Phase 52.1-52.3期待効果（合計）**:
- ✅ 特徴量数: 55 → 75-88（+36-60%）
- ✅ ML予測精度: +15-25%（マクロ経済+時間的+ニュース）
- ✅ 2025年最先端レベル: 到達
- ✅ 月額コスト: 0-100ドル（Phase 52.1-52.2は無料）
- ✅ リスク: 低-中（無料API主体・段階的実装）

**実装場所**:
- `src/features/macro_economic.py`: マクロ経済指標
- `src/features/temporal.py`: 時間的特徴量
- `src/features/news_sentiment.py`: ニュース感情分析
- `config/core/feature_order.json`: 特徴量順序管理

---

# ⚠️ **Phase 52.4+: 高コスト情報源（保留）**

## 背景・目的
**保留理由**: 外部API高コスト・Phase 52.1-52.3効果測定後に再評価
**再評価条件**: Phase 44-52.3効果測定後・収益50万円以上時

## 実装タスク（将来実施時）

### Phase 52.5: SNS感情分析（1週間）⚠️保留
- [ ] Twitter/Reddit API統合（月額$100-200）
- [ ] VADER/FinBERT感情分析
- [ ] 10-15特徴量追加

### Phase 52.6: オンチェーン分析（1週間）⚠️保留
- [ ] Glassnode/CryptoQuant API統合（月額$100-300）
- [ ] On-chain Metrics取得
- [ ] 10-15特徴量追加

**実装時間**: 2週間（Phase 52.3効果測定後に再評価）
**リスク**: **高**（API依存・月額$200-500コスト・品質不安定）
**優先度**: **低**（Phase 44-52.3完了後に再検討）

**📋 保留判断理由**:
- Phase 52.1-52.3（低コスト）効果測定優先
- 外部API月額コスト（$200-500/月）対効果不明
- Phase 52.1-52.3で75-88特徴量確保済み（優先度低下）

---

# 🎯 **開発優先度指針・実装スケジュール**

## 実装順序ロジック（2025/10/21更新）

```
✅ 完了: Phase 40.1-40.6（3週間・2025/10/16完了）
   → 79パラメータ最適化 + 50特徴量拡張完了
   → Optuna包括最適化 + Feature Engineering

✅ 完了: Phase 41.8-41.8.5（2日・2025/10/17完了）
   → 50→55特徴量・Post-Integration問題解決・内部最適化のみ
   → Strategy-Aware ML・ML統合率10%→100%達成

✅ 完了: Phase 42.1-42.5（4日・2025/10/20完了）
   → 統合TP/SL + トレーリングストップ + TP/SL設定最適化
   → 注文数91.7%削減・平均利益+10-20%向上

✅ 完了: Phase 43（1日・2025/10/21完了）
   → 技術的負債削除・SL保護・維持率制限
   → -320行コード削減・クリーンアーキテクチャ実現

📅 実装予定（優先度順）:

1. Phase 44（1週間）: ML統合・戦略バランス最適化 ⭐最優先・次のステップ
   → 最終信頼度+13-17%・戦略バランス改善
   → 低リスク・thresholds.yaml 2行変更のみ・即効性最高

2. Phase 45（1-2週間）: Meta-Learning動的重み最適化 ⭐ML強化
   → ML信頼度+50-100%・市場適応型統合
   → 低リスク・内部最適化のみ・高ROI

3. Phase 46（1週間）: 確定申告対応システム 🔴法的必須
   → 取引履歴記録・CSV出力・損益計算・税務レポート
   → 2025年3月期限・法的義務・高優先度

4. Phase 47（1週間）: Discord通知最適化v2 💰コスト削減
   → 通知頻度削減・バッチ送信・月額コスト-30-40%削減
   → 低リスク・コスト削減効果大

5. Phase 52（2週間）: 情報源多様化（低コスト優先実装） ⭐新規優先
   Phase 52.1: マクロ経済指標（ゼロコスト・5-10特徴量）
   Phase 52.2: 時間的特徴量（ゼロコスト・5-8特徴量）
   Phase 52.3: News API（月額$50-100・10-15特徴量）
   → 55 → 75-88特徴量（+36-60%）・2025年最先端レベル到達
   → 低-中リスク・段階的実装

6. Phase 48（1-2週間）: 3軸マルチタイムフレーム 📈性能向上
   → 5分足追加・エントリー精度+5-10%向上
   → Phase 52効果確認後に実施・中リスク

7. Phase 49（1-2週間）: モバイル管理アプリ（PWA） 📱運用改善
   → スマホからbot制御・緊急対応可能化
   → 低リスク・運用効率大幅向上

8. Phase 50（継続的）: 戦略・特徴量拡張パッケージ 🔧継続改善
   → Ichimoku・Volume Profile等追加
   → 継続的ML精度向上・低リスク

9. Phase 51（2-3週間）: マルチアセット対応 🌐拡張機能
   Phase 51.2: 海外CEX/DEXマイナーアルトコイン（優先・BTC連動性薄）
   Phase 51.3-51.4: bitbank ETH/JPY・XRP/JPY（次点・確定申告簡単）
   → 収益機会+30-50%・予測精度向上
   → 中-高リスク・Phase 44-52.3完了・6ヶ月効果測定後に実施

⚠️ 保留: Phase 52.4+（2週間）: 高コスト情報源 ❌保留
   → SNS感情分析・オンチェーン分析（月額$200-500）
   → Phase 44-52.3効果測定後に再評価・高コスト・高リスク
```

## 期待される段階的効果

```
✅ 現状（Phase 42.1-42.3完了・2025/10/18）:
  ✅ シャープレシオ+50-70%向上（Phase 40期待値）
  ✅ 79パラメータ最適化完了（Phase 40）
  ✅ 55特徴量拡張完了（15→50→55、+267%）
  ✅ F1スコア 0.56-0.61（Phase 41.8実測）
  ✅ ML統合率 10% → 100%（Phase 41.8.5で+900%）
  ✅ Train/Inference一貫性確保（Phase 41.8）
  ✅ Post-Integration問題解決（Phase 41.8）
  ✅ 注文数91.7%削減（Phase 42.1・24→2注文）
  ✅ API呼び出し91.7%削減（Phase 42.1）
  ✅ トレーリングストップ実装（Phase 42.2・平均利益+10-20%向上）
  ✅ ML統合精度向上（Phase 42.3・strict matching）
  ✅ システム安定性向上（Phase 42.3・証拠金チェックリトライ）

1週間後（Phase 45完了予定）:
  🎯 ML信頼度+50-100%追加（Meta-Learning）
  🎯 市場適応型統合実現
  🎯 シャープレシオ+30-50%追加

2週間後（Phase 46完了予定）:
  🎯 確定申告対応完了（法的義務達成）
  🎯 取引履歴自動記録・CSV出力・税務レポート
  🎯 2025年3月期限対応完了

2-3週間後（Phase 47完了予定）:
  🎯 Discord通知コスト-30-40%削減
  🎯 月額運用コスト削減（-¥300-500/月）
  🎯 通知品質向上（バッチ送信・集約）

3-5週間後（Phase 48完了予定）:
  🎯 エントリー精度+5-10%（5分足追加・3軸マルチタイムフレーム）
  🎯 直近市場状況の反映
  🎯 Phase 44効果確認後に実施

6-7週間後（Phase 49完了予定）:
  🎯 スマホからbot制御可能化
  🎯 緊急対応可能化（外出先対応）
  🎯 運用効率大幅向上

Phase 49（継続的）:
  🎯 戦略・特徴量継続追加
  🎯 ML精度継続的向上
  🎯 市場変化への柔軟対応

9-11週間後（Phase 51完了予定）:
  🎯 マルチアセット対応完了（BTC+ETH+XRP）
  🎯 収益機会+30-50%拡大
  🎯 ポートフォリオ最適化・リスク分散

Phase 45-51合計累積効果（推奨実装範囲）:
  ✅ シャープレシオ: +50-70%（Phase 40達成済み）
  🎯 追加向上: +30-50%（Phase 43 Meta-Learning）
      = 合計+80-120%向上期待
  ✅ ML統合率: +900%（Phase 41.8.5達成済み・10% → 100%）
  ✅ 注文数削減: 91.7%（Phase 42.1達成済み・24→2注文）
  ✅ 平均利益向上: +10-20%（Phase 42.2達成済み）
  🎯 ML予測活用: +50-100%（Phase 43 Meta-Learning）
  🎯 市場適応型統合実現（Phase 43）
  🎯 確定申告対応完了（Phase 46・法的必須）
  🎯 運用コスト削減: -30-40%（Phase 47）
  🎯 エントリー精度: +5-10%（Phase 48）
  🎯 運用効率向上（Phase 49・モバイル管理）
  🎯 収益機会拡大: +30-50%（Phase 51・マルチアセット）

Phase 52+（保留・高リスク）:
  ⚠️ 外部API依存リスク高・Phase 44-50完了後に再評価
  🎯 （実施する場合）ML信頼度+30-50%追加（情報源多様化）
  🎯 （実施する場合）特徴量数: 55 → 80-100（+30-50特徴量）
  🎯 （実施する場合）真のアンサンブル効果実現
  ⚠️ 月額コスト増加（$100-300/月API費用）
```

## 優先度まとめ

| 優先度 | Phase | 期間 | 効果 | リスク | 状態 | 推奨 |
|--------|-------|------|------|--------|------|------|
| ✅ 完了 | Phase 40 | 2週間 | シャープレシオ+50-70% | 低 | **完了** | - |
| ✅ 完了 | Phase 40.6 | 1週間 | ML予測精度+8-15% | 低 | **完了** | - |
| ✅ 完了 | Phase 41.8 | 1日 | Train/Inference一貫性・55特徴量 | 低 | **完了** | - |
| ✅ 完了 | Phase 41.8.5 | 0.5日 | ML統合率10%→100%（+900%） | 低 | **完了** | - |
| ✅ 完了 | Phase 42.1 | 2日 | 注文数91.7%削減・UI簡潔化・API削減91.7% | 低 | **完了** | - |
| ✅ 完了 | Phase 42.2 | 1日 | 平均利益額+10-20%・含み益保護 | 低 | **完了** | - |
| ✅ 完了 | Phase 42.3-42.5 | 1日 | TP/SL設定最適化・技術的負債削除 | 低 | **完了** | - |
| ✅ 完了 | Phase 43 | 1日 | SL保護・維持率制限・-320行削減 | 低 | **完了** | - |
| ⭐ 最優先 | Phase 44 | 1週間 | 最終信頼度+13-17%・戦略バランス改善 | **低** | 未着手 | **✅ 実施推奨** |
| ⭐ ML強化 | Phase 45 | 1-2週間 | ML信頼度+50-100%・市場適応型統合 | **低** | 未着手 | **✅ 実施推奨** |
| 🔴 法的必須 | Phase 46 | 1週間 | 確定申告対応完了・法的義務達成 | 低 | 未着手 | **✅ 実施必須** |
| 💰 コスト削減 | Phase 47 | 1週間 | Discord通知コスト-30-40%削減 | 低 | 未着手 | **✅ 実施推奨** |
| ⭐ 新規優先 | Phase 52.1-52.3 | 2週間 | 55→75-88特徴量・2025年最先端レベル | **低-中** | 未着手 | **✅ 実施推奨** |
| 📈 中優先 | Phase 48 | 1-2週間 | エントリー精度+5-10%（3軸マルチTF） | 中 | 未着手 | Phase 52後 |
| 📱 中優先 | Phase 49 | 1-2週間 | 運用効率向上（モバイル管理） | 低 | 未着手 | 運用改善 |
| 🔧 継続 | Phase 50 | 継続的 | ML精度継続向上（戦略・特徴量追加） | 低 | 未着手 | 継続実施 |
| 🌐 中優先 | Phase 51 | 2-3週間 | 収益機会+30-50%（マルチアセット） | 中-高 | 未着手 | Phase 52後・6ヶ月測定後 |
| ⚠️ 保留 | Phase 52.4+ | 2週間 | SNS感情分析・オンチェーン分析 | **高** | 未着手 | **❌ 後回し** |

---

**🎉 Phase 40-43完了！次はPhase 44（ML統合最適化）から開始**

**✅ Phase 43完了（2025/10/21）**:
- 技術的負債削除・SL保護・維持率制限実装
- -320行コード削減・クリーンアーキテクチャ実現
- 1,141テスト100%成功・69.47%カバレッジ達成

**✅ Phase 42.1-42.5完了（2025/10/20）**:
- 統合TP/SL実装（注文数91.7%削減・UI簡潔化）
- トレーリングストップ実装（含み益保護・平均利益+10-20%向上）
- TP/SL設定最適化（SL 2%・TP 3%・RR比1.5:1）

**✅ Phase 41.8.5完了（2025/10/17）**:
- 55特徴量システム稼働中（50基本 + 5戦略信号）
- ML統合閾値最適化（0.6→0.45）・ML統合率100%達成

**📋 Phase 44-52+ 実装計画（2025/10/21更新）**:

**Week 1**: Phase 44（ML統合・戦略バランス最適化） ⭐最優先・次のステップ
- 最終信頼度+13-17%・戦略バランス改善
- 実装時間: 1週間（3-5時間）・thresholds.yaml 2行変更のみ

**Week 1-2**: Phase 45（Meta-Learning動的重み最適化） ⭐ML強化
- ML信頼度+50-100%・市場適応型統合
- 実装時間: 1-2週間（8-10時間）

**Week 2-3**: Phase 46（確定申告対応システム） 🔴法的必須
- 取引履歴記録・CSV出力・損益計算・税務レポート
- 実装時間: 1週間（8-10時間）

**Week 3-4**: Phase 47（Discord通知最適化v2） 💰コスト削減
- 通知頻度削減・バッチ送信・月額コスト-30-40%削減
- 実装時間: 1週間（4-6時間）

**Week 4-6**: Phase 52（情報源多様化・低コスト優先） ⭐新規優先
- Phase 52.1: マクロ経済指標（ゼロコスト・5-10特徴量）
- Phase 52.2: 時間的特徴量（ゼロコスト・5-8特徴量）
- Phase 52.3: News API（月額$50-100・10-15特徴量）
- 55 → 75-88特徴量（+36-60%）・2025年最先端レベル到達
- 実装時間: 2週間（12-20時間）

**Week 6-8**: Phase 48（3軸マルチタイムフレーム） 📈性能向上
- 5分足追加・エントリー精度+5-10%向上
- 実装時間: 1-2週間（10-14時間）

**Week 8-10**: Phase 49（モバイル管理アプリ） 📱運用改善
- PWA実装・スマホからbot制御可能化
- 実装時間: 1-2週間（18-26時間）

**継続的**: Phase 50（戦略・特徴量拡張） 🔧継続改善
- Ichimoku・Volume Profile等追加
- 実装時間: 継続的（各機能2-3日）

**Month 3-**: Phase 51（マルチアセット対応） 🌐拡張機能
- Phase 51.2: 海外CEX/DEXマイナーアルトコイン（優先・BTC連動性薄）
- Phase 51.3-51.4: bitbank ETH/JPY・XRP/JPY（次点・確定申告簡単）
- 実装時間: 2-3週間（34-44時間）
- 実施条件: Phase 44-52.3完了・6ヶ月間BTC効果測定後

**保留**: Phase 52.4+（高コスト情報源） ⚠️高リスク・後回し
- SNS感情分析・オンチェーン分析（月額$200-500）
- Phase 44-52.3効果測定後に再評価

**📊 現在の基準**:
- 55特徴量システム稼働中（Phase 41.8.5完了済み）
- 統合TP/SL + トレーリングストップ稼働中（Phase 42完了済み）
- ML統合率100%達成（Phase 41.8.5完了済み）
- 1,141テスト100%成功・69.47%カバレッジ達成

**詳細**: `docs/開発履歴/Phase_40-43.md` 参照

---

**最終更新**: 2025年10月21日 - Phase 43完了・Phase 44-52+再編成（44→45→46→47→52.1-52.3→48→49→50→51→52.4+）・Phase 52分割（低コスト優先52.1-52.3・高コスト保留52.4+）・Phase 51優先度変更（海外CEX/DEXマイナーアルトコイン優先）
