# 暗号資産取引Bot - 未達成タスク一覧

## 📋 このファイルの目的

**使用場面**:
- 未達成開発タスク確認
- 実装優先度の把握
- 進捗管理とタスク追跡

**ルール**:
- **未完了タスクのみ記載**（達成済み: `docs/開発履歴/Phase_40-46.md`参照）
- **実装順序**に沿って記載（Phase 47 → 48 → 49...）
- 定期的にタスク状況を更新

**🎯 2025/10/22更新**: Phase 40-46完了 → 次はPhase 47（確定申告対応システム）から開始

---

## 🔥 **未達成タスク一覧**（実装優先度順）

---

# 🔴 **Phase 47: 確定申告対応システム（1週間）** 法的必須

## 背景・目的

**法的要件**: 暗号資産取引の確定申告義務
- 年間20万円以上の利益で確定申告必須
- 期限: 2025年3月15日（2024年分確定申告）
- 現状: 手作業で10時間以上

**解決策**: 完全自動化された確定申告サポートシステム

## 実装タスク

### Phase 47.1: 取引履歴記録システム（1日・2-3時間）
- [ ] TradeHistoryRecorder実装（SQLite・`data/trade_history.db`）
- [ ] エントリー・エグジット・TP/SL発動を記録
- [ ] 日時・取引種別・数量・価格・手数料・損益保存
- [ ] ExecutionServiceに自動記録機能追加

### Phase 47.2: CSV出力機能（0.5日・1-2時間）
- [ ] CSVエクスポーター実装（`scripts/tax/export_trade_history.py`）
- [ ] 期間指定（例: 2024年1月1日～12月31日）
- [ ] 国税庁推奨フォーマット対応

### Phase 47.3: 損益計算エンジン（1日・2-3時間）
- [ ] PnLCalculator実装（`src/tax/pnl_calculator.py`）
- [ ] 移動平均法対応（国税庁推奨）
- [ ] 年間損益集計・月別サマリー

### Phase 47.4: 税務レポート生成（1日・2-3時間）
- [ ] TaxReportGenerator実装（PDF出力）
- [ ] 国税庁フォーマット対応
- [ ] サマリーレポート生成

### Phase 47.5: Discord通知統合・自動化（0.5日・1時間）
- [ ] 年末自動通知（12月31日23:59）
- [ ] 月次サマリー通知（毎月1日）

**期待効果**:
- ✅ 確定申告作業時間: 10時間 → 30分（-95%）
- ✅ 計算精度: 100%（ミスリスク0）
- ✅ 法的コンプライアンス: 100%達成

---

# 💰 **Phase 48: Discord通知最適化v2（1週間）** コスト削減

## 背景・目的

**Phase 37.3完了**: 月700-900円削減 → 月額1,100-1,300円達成
**Phase 48目標**: さらに-20-30%削減 → 月額880-1,040円へ

## 実装タスク

### Phase 48.1: 通知戦略見直し（0.5日・1-2時間）
- [ ] Warning通知集約ロジック（1時間に1回まで）
- [ ] 同種Warning集約実装

### Phase 48.2: 通知バッチ送信実装（0.5日・1-2時間）
- [ ] 5分ごとのバッチ送信
- [ ] Discord Embed活用（3通知 → 1通知）

### Phase 48.3: Discord Webhook代替検討（0.5日・1時間）
- [ ] Slack/Telegram/LINE Notify調査
- [ ] コスト比較・移行判断

**期待効果**:
- ✅ 月額コスト: -20-30%削減（月880-1,040円へ）
- ✅ 通知ノイズ: -60%削減
- ✅ Discord API呼び出し: -40%削減

---

# 📈 **Phase 49: 3軸マルチタイムフレーム戦略（1-2週間）** 性能向上

## 背景・目的

**問題**: 5分間隔実行だが4h/15m足の2軸のみ
**解決**: 5分足を活用して直近市場状況を反映
**期待効果**: エントリー精度+5-10%向上

## 実装タスク

### Phase 49.1: 5分足補助指標実装（3-4日）
- [ ] DataPipeline拡張: 5分足OHLCV取得
- [ ] 5分足分析ロジック: EMA5/10クロス・RSI
- [ ] MultiTimeframe戦略拡張: 3軸構成（4h:60%, 15m:30%, 5m:10%）
- [ ] フィルターモード実装

### Phase 49.2: バックテスト検証（2-3日）
- [ ] 2軸 vs 3軸比較
- [ ] ノイズ影響評価

### Phase 49.3: ペーパートレード検証（1-2週間）
- [ ] 実動作確認

### Phase 49.4: 段階的ライブ適用
- [ ] 効果確認時のみ有効化

---

# 📱 **Phase 50: モバイル管理アプリ（PWA）（1-2週間）** 運用改善

## 背景・目的

**問題**: 外出先でbotの停止・確認ができない
**解決**: スマホからbot制御可能なPWA実装

## 実装タスク

### Phase 50.1: 認証システム実装（2-3日）
- [ ] JWT認証実装
- [ ] 環境変数でパスワード管理

### Phase 50.2: REST API実装（2-3日）
- [ ] FastAPI実装
- [ ] エンドポイント: status/start/stop/balance/positions

### Phase 50.3: PWAフロントエンド実装（3-4日）
- [ ] HTML/CSS/JavaScript実装
- [ ] Material Design Lite使用
- [ ] レスポンシブデザイン

### Phase 50.4: Cloud Runデプロイ（1日）
- [ ] Dockerfile拡張
- [ ] HTTPSアクセス確認

### Phase 50.5: セキュリティ強化（1日）
- [ ] レート制限実装
- [ ] 監査ログ実装

**期待効果**:
- ✅ 運用効率大幅向上
- ✅ 緊急対応可能化

---

# 🔧 **Phase 51: 戦略・特徴量拡張パッケージ（継続的改善）**

## 背景・目的

**問題**: 5戦略55特徴量で固定
**解決**: 継続的に戦略・特徴量を追加

## 実装タスク

### Phase 51.1: 戦略追加候補（各2-3日）
- [ ] Ichimoku Cloud Strategy（一目均衡表）
- [ ] Volume Profile Strategy（出来高プロファイル）
- [ ] Elliott Wave Strategy（エリオット波動）

### Phase 51.2: 特徴量追加候補（各1-2日）
- [ ] 時間的特徴量（5-8特徴量）
- [ ] マクロ経済特徴量（3-5特徴量）
- [ ] オンチェーン特徴量（5-10特徴量）

### Phase 51.3: 継続的評価フレームワーク（1週間）
- [ ] AB Testing実装
- [ ] バックテスト自動評価
- [ ] 週次レポート生成

---

# 🌐 **Phase 52: マルチアセット対応（2-3週間）** 拡張機能

## 背景・目的

**問題**: BTC/JPY専用
**解決**: ETH/JPY・XRP/JPY対応

## 実装タスク

### Phase 52.1: アセット抽象化（3-4日）
- [ ] AssetConfigクラス実装
- [ ] unified.yaml拡張

### Phase 52.2: 海外CEX/DEXマイナーアルトコイン対応（4-5日）
- [ ] 候補資産選定（SOL・AVAX・MATIC・LINK）
- [ ] BTC相関分析（相関係数0.3未満推奨）
- [ ] Binance/Uniswap API統合

### Phase 52.3: bitbank ETH/JPY対応（3-4日）
- [ ] ETH/JPY API対応
- [ ] ETH-BTC相関係数特徴量追加

### Phase 52.4: bitbank XRP/JPY対応（3-4日）
- [ ] XRP/JPY API対応
- [ ] XRP-BTC相関係数特徴量追加

### Phase 52.5: ポートフォリオ最適化（4-5日）
- [ ] PortfolioOptimizer実装
- [ ] Kelly基準ベース資金配分
- [ ] 相関係数考慮リスク分散

### Phase 52.6: 段階的ライブ適用（2-3週間）
- [ ] ペーパートレード検証（各資産1週間）
- [ ] 少額ライブ検証（各1万円・1週間）

**期待効果**:
- ✅ 収益機会+30-50%拡大
- ✅ リスク分散

---

# ⭐ **Phase 53: 情報源多様化（2週間）** 新規優先

## 背景・目的

**2025年最先端研究との比較**:
- ✅ あなたのbot: Random Forest・XGBoost・LightGBM（最先端一致）
- ✅ あなたのbot: 55特徴量（Phase 45完了）
- ❌ 2025年最先端: NLP感情分析・マクロ経済指標・時間的特徴量
- ❌ 2025年最先端: 80-100特徴量

**Phase 53戦略**: 低コスト実装（53.1-53.3）を優先

**期待効果**: 55 → 75-88特徴量（+36-60%）

## 実装タスク

### Phase 53.1: マクロ経済指標統合（2-3日）⭐最優先・ゼロコスト
- [ ] 無料データソース統合（Yahoo Finance・FRED API）
- [ ] ドル円・日経平均・米国債利回り・Fear & Greed Index
- [ ] 5-10特徴量追加

### Phase 53.2: 時間的特徴量拡張（2-3日）⭐最優先・ゼロコスト
- [ ] 時間的パターン特徴量実装
- [ ] 曜日・時間帯・月・四半期効果
- [ ] 5-8特徴量追加

### Phase 53.3: News API統合（3-4日）⚠️中優先・月額$50-100
- [ ] CryptoCompare/Finnhub News API統合
- [ ] VADER感情分析実装
- [ ] 10-15特徴量追加

### Phase 53.4: バックテスト検証・ML再学習（2-3日）
- [ ] 55特徴量 vs 60-65特徴量比較
- [ ] ML再学習（Optuna 50 trials）
- [ ] ペーパートレード検証

**Phase 53期待効果（合計）**:
- ✅ 特徴量数: 55 → 75-88（+36-60%）
- ✅ ML予測精度: +15-25%
- ✅ 2025年最先端レベル到達
- ✅ 月額コスト: 0-100ドル（Phase 53.1-53.2は無料）

---

## 🎯 **開発優先度指針・実装スケジュール**

### 実装順序ロジック（2025/10/22更新）

```
✅ 完了: Phase 40-46（2025/10/22完了）
   → Phase 46: デイトレード特化設計完了（-1,172行コード削減・個別TP/SL実装・SL2%/TP4%/RR2.0）
   → トレーリングSTOP削除・TP/SL統合削除・コードベース大幅簡略化
   → 1,101テスト100%成功・68.93%カバレッジ達成

📅 実装予定（優先度順）:

1. Phase 47（1週間）: 確定申告対応システム 🔴法的必須
   → 2025年3月期限・法的義務

2. Phase 48（1週間）: Discord通知最適化v2 💰コスト削減
   → 月額コスト-20-30%削減

3. Phase 49（1-2週間）: 3軸マルチタイムフレーム 📈性能向上
   → エントリー精度+5-10%

4. Phase 50（1-2週間）: モバイル管理アプリ 📱運用改善
   → スマホからbot制御

5. Phase 51（継続的）: 戦略・特徴量拡張 🔧継続改善
   → ML精度継続向上

6. Phase 52（2-3週間）: マルチアセット対応 🌐拡張機能
   → 収益機会+30-50%

7. Phase 53（2週間）: 情報源多様化 ⭐新規優先
   → 55 → 75-88特徴量・2025年最先端レベル
```

### 優先度まとめ

| 優先度 | Phase | 期間 | 効果 | リスク | 状態 | 推奨 |
|--------|-------|------|------|--------|------|------|
| 🔴 法的必須 | Phase 47 | 1週間 | 確定申告対応完了 | 低 | 未着手 | **✅ 実施必須** |
| 💰 コスト削減 | Phase 48 | 1週間 | 月額コスト-20-30%削減 | 低 | 未着手 | **✅ 実施推奨** |
| 📈 性能向上 | Phase 49 | 1-2週間 | エントリー精度+5-10% | 中 | 未着手 | Phase 47後 |
| 📱 運用改善 | Phase 50 | 1-2週間 | 運用効率向上 | 低 | 未着手 | 運用改善 |
| 🔧 継続 | Phase 51 | 継続的 | ML精度継続向上 | 低 | 未着手 | 継続実施 |
| 🌐 拡張 | Phase 52 | 2-3週間 | 収益機会+30-50% | 中-高 | 未着手 | Phase 53後 |
| ⭐ 新規優先 | Phase 53 | 2週間 | 55→75-88特徴量 | 低-中 | 未着手 | **✅ 実施推奨** |

---

**🎉 Phase 40-46完了！次はPhase 47（確定申告対応システム）へ**

**📊 現在の基準**:
- Phase 46完了: デイトレード特化設計・コード大幅簡略化（-1,041行純削減・-88.8%）
- 設定最適化: SL 2%・TP 4%・RR 2.0:1（BTC 15分足デイトレード最適化）
- 1,101テスト100%成功・68.93%カバレッジ達成
- CI/CD自動デプロイ実行中

**詳細**: `docs/開発履歴/Phase_40-46.md` 参照

---

**最終更新**: 2025年10月22日 - Phase 46完了・本番デプロイ中（CI/CD Pipeline実行中）
