# 暗号資産取引Bot - 開発計画

## 現在の状態

**Phase 58.8完了** → Phase 59実装中

※ 完了済みタスクの詳細は `docs/開発履歴/` を参照

---

## Phase 59: 戦略改善・信頼度修正期

### 目的

Phase 58.5/58.6のTP/SL変更後のバックテスト分析に基づき、戦略とML信頼度設定を最適化する。

### 基準値（Phase 58.6バックテスト: 2025/07/01〜2025/12/31）

| 指標 | Phase 58.6結果 | Phase 59目標 |
|------|---------------|-------------|
| 総損益 | ¥+35,105 | **≥¥+38,000** |
| PF | 1.38 | **≥1.42** |
| 勝率 | 50.9% | **≥52%** |
| 取引数 | 589件 | - |

### TP/SL変更の効果（Phase 58.4 → 58.6）

| 戦略 | 変更前勝率 | 変更後勝率 | 変更前損益 | 変更後損益 |
|------|-----------|-----------|-----------|-----------|
| BBReversal | 8.3% | **50.0%** | ¥-5,451 | ¥-1,331 |
| DonchianChannel | 42.0% | **49.1%** | ¥-3,560 | **¥+6,711** |
| ATRBased | 47.0% | **54.1%** | ¥+13,000 | **¥+29,192** |

### Phase 59.1: BBReversal normal_range無効化

#### 背景（Phase 58.6分析）

| レジーム | 取引数 | 勝率 | 損益 | 対応 |
|---------|--------|------|------|------|
| tight_range | 12件 | **58.3%** | ¥+379 | 維持 |
| normal_range | 2件 | **0%** | ¥-1,710 | **無効化** |

tight_rangeでは機能するが、normal_rangeでは全敗。

#### 実装内容

| ファイル | 変更内容 |
|---------|---------|
| `config/core/thresholds.yaml` | normal_range BBReversal重みを0に設定 |

#### 期待効果

- 損益改善: +¥1,710
- BBReversal損益: ¥-1,331 → ¥+379

### Phase 59.2: 信頼度逆転問題修正

#### 背景

| 信頼度帯 | 取引数 | 勝率 |
|---------|--------|------|
| 低（<50%） | 136件 | **51.5%** |
| 高（≥65%） | 44件 | **45.5%** |

高信頼度帯の勝率が低信頼度帯より低い逆転現象が継続。

#### 原因

```yaml
# 現在の設定
disagreement_penalty: 0.96   # 弱すぎる（4%減）
agreement_bonus: 1.18        # 強すぎる（18%増）
```

#### 実装内容

| ファイル | 変更内容 |
|---------|---------|
| `config/core/thresholds.yaml` | penalty 0.96→0.80、bonus 1.18→1.10 |

#### 期待効果

- 高信頼度帯の勝率改善（45.5% → 50%+）
- PF改善: 1.38 → 1.42+

### Phase 59.3: DonchianChannel（対応不要）

| 指標 | Phase 58.4 | Phase 58.6 | 判断 |
|------|-----------|-----------|------|
| 勝率 | 42.0% | 49.1% | 改善 |
| 損益 | ¥-3,560 | **¥+6,711** | **黒字化** |

TP/SL変更により黒字化。**無効化計画を撤回**し現状維持。

---

## 実装ステップ

- [x] Phase 59計画策定
- [ ] Phase 59.1: BBReversal normal_range無効化
- [ ] Phase 59.2: 信頼度penalty/bonus修正
- [ ] バックテスト実行・効果確認
- [ ] GCPデプロイ

---

## 保留タスク

| タスク | 優先度 | 備考 |
|--------|--------|------|
| ~~DonchianChannel重み削減~~ | ~~中~~ | **撤回**: 黒字化により対応不要 |
| 戦略分析とバックテストの乖離調査 | 低 | 戦略帰属ルールの影響 |
| ML重み全体見直し | 低 | 信頼度修正の効果確認後 |

---

## 関連ファイル

| ファイル | 内容 |
|---------|------|
| `docs/開発履歴/Phase_58.md` | Phase 58完了記録 |
| `docs/開発履歴/Phase_59.md` | Phase 59開発記録（作成予定） |
| `config/core/thresholds.yaml` | 戦略重み設定 |
| `docs/検証記録/analysis_20260112_124411.json` | Phase 58.6分析結果 |
| `docs/検証記録/analysis_history.csv` | 分析履歴 |

---

**最終更新**: 2026年1月13日 - Phase 58.8完了・Phase 59実装中
