# 暗号資産取引Bot - 未達成タスク一覧

## 📋 このファイルの目的

**使用場面**:
- 未達成開発タスク確認
- 実装優先度の把握
- 進捗管理とタスク追跡

**ルール**:
- **未完了タスクのみ記載**（完了済み: `docs/開発履歴/Phase_47-49.md`参照）
- **実装順序**に沿って記載（Phase 50 → 51 → 53...）
- 定期的にタスク状況を更新

**🎯 2025/10/30更新**: Phase 50.1-50.6完了（70特徴量・外部API統合・証拠金維持率80%完全修正） → Phase 50.7簡易版（基本性能確認）→ Phase 51（戦略最適化）実施予定 ⭐最優先

---

## ✅ Phase 49完了サマリー

### Phase 49: バックテスト完全改修・証拠金維持率80%遵守（2025/10/26完了）
- TradeTracker実装（エントリー/エグジットペアリング・損益計算）
- matplotlib可視化（エクイティカーブ・損益分布・ドローダウン・価格チャート）
- バックテスト信頼性100%達成・維持率80%確実遵守
- 4層検証システム実装（Dockerfile・特徴量・戦略・モジュール）

**品質基準**: 1,065テスト100%成功・66.72%カバレッジ達成

**詳細**: `docs/開発履歴/Phase_49.md`参照

---

## 🎯 開発方針・品質基準（全Phase共通）

### KISS原則の徹底
- **少ない機能×高精度**を目指す
- 必要最小限の要素に絞る
- Phase 46のシンプル設計方針を継続

### 品質保証プロセス
1. **バックテスト必須**: 全機能追加時に効果検証
2. **段階的導入**: paper → 少額live → 本番の3段階
3. **テスト100%維持**: 新機能は必ず単体・統合テスト追加
4. **カバレッジ維持**: 66%以上を維持

### 複雑化リスク管理
- 各Phase実装後に複雑性評価
- 設定ファイル化の徹底（ハードコード禁止）
- コードレビュー強化

---

## 🔥 未達成タスク一覧（実装優先度順）

---

# ⭐ Phase 50: 情報源多様化（2週間）【最優先・基盤強化】

## 目的

**問題**: 55特徴量で固定・テクニカル指標のみ依存
**解決**: 特徴量55→60-65拡張（時間・マクロ経済）・ML予測精度+15-25%向上
**期待効果**: すべての取引判断の精度向上・後続Phase性能向上

## 実装タスク

### Phase 50.1: MLモデル3段階Graceful Degradation・TP/SL修正・証拠金維持率修正（完了）✅

**実装内容**:
- [x] 3段階Graceful Degradation実装（62/57/Dummy特徴量）
- [x] executor.py: Phase 42ハードコード値削除（TP 0.67/0.01に修正）
- [x] strategy_utils.py: Phase 42ハードコード値削除（TP 0.67/0.01に修正）
- [x] manager.py: BTC価格・残高ハードコード削除（実値使用）
- [x] manager.py: API実ポジション取得実装
- [x] TP 1.0%・SL 1.5%・RR比0.67:1正常化
- [x] 証拠金維持率80%チェック有効化

**完了日**: 2025/10/27

**品質基準**: ✅ 1049テスト100%成功・66.40%カバレッジ達成

### Phase 50.2: 時間的特徴量拡張（完了）✅

**実装内容**:
- [x] 曜日（月-日）: 週次取引パターン
- [x] 時間帯（0-23時）: 日次取引パターン
- [x] 月（1-12月）: 季節性効果
- [x] 四半期（Q1-Q4）: 四半期効果
- [x] 週末フラグ: 市場開閉パターン
- [x] アジア・欧州・米国時間帯フラグ: 地域別市場影響
- [x] 5-8特徴量追加

**完了日**: 2025/10/27

**品質基準**: タイムゾーン処理の正確性確認（JST）・Look-ahead bias防止確認

### Phase 50.3: マクロ経済指標統合（完了）✅

**実装内容**:
- [x] 無料データソース統合（Yahoo Finance・Alternative.me API）
- [x] USD/JPY（ドル円）: BTC価格との相関分析
- [x] 日経平均株価（^N225）: リスクオン・オフ指標
- [x] 米国債10年利回り（^TNX）: 金利環境把握
- [x] Fear & Greed Index: 市場センチメント定量化
- [x] 8特徴量追加（70特徴量システム実現）
- [x] 4段階Graceful Degradation実装（Level 1: 70 → Level 2: 62 → Level 3: 57 → Level 4: Dummy）
- [x] Yahoo Finance 1日変化率・BTC相関係数・市場センチメント計算実装

**完了日**: 2025/10/28

**品質基準**: ✅ 1088テスト100%成功・67.11%カバレッジ達成

**MLモデル再学習完了**:
- LightGBM: Test F1=0.370, CV F1=0.498±0.084
- XGBoost: Test F1=0.377, CV F1=0.540±0.048
- RandomForest: Test F1=0.413, CV F1=0.549±0.065（最高性能）

**詳細**: feature_order.json 70特徴量定義完了・external_api.py実装完了

### Phase 50.3.1: 未約定注文蓄積問題解決（完了）✅

**実装内容**:
- [x] executor.py: TP/SL注文ID保存処理追加（lines 404-491, 91行修正）
- [x] virtual_positionsにtp_order_id/sl_order_idフィールド追加
- [x] position_tracker.update_position_stop_orders()呼び出し実装
- [x] Phase 49.6クリーンアップ機能の完全化

**問題分析**:
- 本番環境: 23個の未約定注文（期待14個 + 余剰9個）
- 根本原因: executor.pyでTP/SL注文IDを保存していなかった
- Phase 49.6のクリーンアップ機能が動作していなかった

**完了日**: 2025/10/28

**品質基準**: ✅ 1,107テスト100%成功・66.72%カバレッジ維持

**期待効果**:
- 未約定注文削減: 23個 → 14個（-39%）
- Phase 49.6クリーンアップ機能の正常動作開始
- ポジション決済時にTP/SL注文自動キャンセル
- UI簡潔化・運用負荷削減

**詳細**: docs/開発履歴/Phase_50.md Phase 50.3.1セクション参照

### Phase 50.4: 証拠金維持率80%チェック完全修正（完了）✅

**実装内容**:
- [x] monitor.py: API直接取得方式に変更（`/user/margin/status`）
- [x] fetch_margin_ratio_from_api()実装（maintenance_margin_ratio直接取得）
- [x] 逆算ポジション価値推定実装
- [x] 500%固定返却問題の根本解決
- [x] 旧メソッド削除（_get_current_position_value・_estimate_current_position_value）

**問題分析**:
- Phase 50.1修正が不完全（BTC価格ハードコード削除のみ）
- monitor.pyの500%固定返却が残存（ポジション価値過小推定時）
- fetch_margin_positions() Error 20003（GET認証未対応）
- 結果: 証拠金維持率80%チェック無効化・含み損295円（期待150円の197%超過）

**完了日**: 2025/10/30

**品質基準**: ✅ 1,087テスト100%成功・67.11%カバレッジ維持

**期待効果**:
- 証拠金維持率80%チェック完全有効化
- ポジション蓄積防止 → 含み損150円遵守
- 青天井リスク完全解消

**詳細**: docs/開発履歴/Phase_50.md Phase 50.4セクション参照

### Phase 50.5: SL注文保護・Phase 42完全削除（完了）✅

**実装内容**:
- [x] cleanup.py: Phase 37.5.3クリーンアップ機能を一時無効化
- [x] executor.py: Phase 42統合TP/SL参照を完全削除
- [x] stop_manager.py: Phase 42統合TP/SL参照を完全削除
- [x] tracker.py: Phase 42統合TP/SL参照を完全削除
- [x] SL注文保護（Phase 46個別TP/SL優先）

**問題分析**:
- bitbank UIでSL注文が0個存在（TP注文は10個存在）
- 含み損569円（期待150円の379%・無制限損失リスク）
- Phase 37.5.3がSL注文を誤削除（TP注文のみ保護）
- Phase 42統合TP/SL参照が残存（Phase 42.4で削除したはずが残っていた）

**完了日**: 2025/10/30

**品質基準**: ✅ 1,087テスト100%成功・67.11%カバレッジ維持

**期待効果**:
- SL注文保護完了（Phase 46個別TP/SL優先）
- Phase 42レガシーコード完全削除
- 無制限損失リスク解消

**詳細**: docs/開発履歴/Phase_50.md Phase 50.5セクション参照

### Phase 50.6: 外部API特徴量取得完全修正（完了）✅

**実装内容**:
- [x] external_api.py: asyncio.to_thread()実装（yfinance同期処理対応）
- [x] fetch_usd_jpy(): _sync_fetch_usd_jpy()を別スレッド実行
- [x] fetch_nikkei_225(): _sync_fetch_nikkei()を別スレッド実行
- [x] fetch_us_10y_yield(): _sync_fetch_us_10y()を別スレッド実行
- [x] イベントループブロック回避

**問題分析**:
- Phase 50.3デプロイ後、外部API成功率2/8（25%）
- yfinanceライブラリが同期ライブラリ → asyncイベントループブロック
- RuntimeWarning: coroutine 'fetch_usd_jpy' was never awaited
- 結果: Level 2（62特徴量）フォールバック継続

**完了日**: 2025/10/30

**品質基準**: ✅ 1,087テスト100%成功・67.11%カバレッジ維持

**期待効果**:
- 外部API成功率: 2/8（25%）→ 8/8（100%）
- Level 1（70特徴量）正常稼働
- イベントループブロック解消

**詳細**: docs/開発履歴/Phase_50.md Phase 50.6セクション参照

### Phase 50.7: バックテスト基本検証（簡易版）（1-2日）⭐次回実施

**実装内容**:
- [ ] 70特徴量バックテスト基本性能確認（Phase 50.6完了後）
- [ ] 既存バックテストツールで検証（Phase 49基盤活用）
- [ ] F1スコア・シャープレシオ確認
- [ ] ドローダウン悪化がないことを確認
- [ ] ペーパートレード検証（1週間）

**注**:
- Phase 50.3でMLモデル再学習は完了済み（Optuna 50 trials実施済み）
- **ウォークフォワード検証はPhase 51.4で本格実装予定**（Phase 51戦略最適化と統合）

**品質基準**:
- F1スコア0.56-0.61 → 0.60-0.65目標（基本改善確認のみ）
- ドローダウン悪化がないこと
- 1-2日で完了（簡易版）

## Phase 50達成効果（Phase 50.1-50.7完了予定 ✅）

- **特徴量数**: 55 → 70（Phase 50.3完了）→ Phase 50.7基本検証 → Phase 51戦略最適化（65-68特徴量）
- **外部API統合**: 8特徴量（USD/JPY・日経平均・米10年債・Fear & Greed Index + 派生指標4個）
- **外部API成功率**: 100%達成（Phase 50.6完了・asyncio.to_thread()実装）
- **証拠金維持率80%**: 完全修正（Phase 50.4完了・API直接取得方式）
- **SL注文保護**: 完了（Phase 50.5完了・Phase 42レガシーコード完全削除）
- **ML予測精度**: Phase 50.7基本検証 → Phase 51.4ウォークフォワード検証で確認予定
- **2025年最先端レベル**: マクロ経済指標・時間特徴量統合完了
- **月額コスト**: 0円（完全無料・Yahoo Finance・Alternative.me API使用）
- **Graceful Degradation**: 4段階対応（Level 1: 70 → Level 2: 62 → Level 3: 57 → Level 4: Dummy）
- **特徴量選択**: Phase 53.2で実施予定（Phase 51戦略最適化完了後）

## リスクと対策

**リスク**:
- 特徴量増加による過学習
- データ取得障害（Yahoo Finance/Alternative.me API）

**対策**:
- Phase 50.7で基本性能確認（簡易版）
- Phase 51.4でウォークフォワード検証を本格実装
- Phase 53.2で特徴量選択・最適化実施（戦略最適化後）
- データ取得エラーハンドリング実装（Phase 50.3完了）
- 4段階Graceful Degradation実装（Phase 50.3完了）
- 24時間キャッシュフォールバック（Phase 50.3完了）

---

# 🎯 Phase 51: 戦略見直し・最適化（1-2週間）【Phase 50完了後・最優先】

## 目的

**問題**: 既存5戦略の性能・独立性が未検証
**解決**: 戦略個別分析・低性能戦略削除・新戦略追加・最適組み合わせ決定
**期待効果**: 戦略精度+10-20%・ML予測精度+5-10%・KISS原則達成

## アンサンブル学習の原理（重要）

**Wisdom of Crowds効果**:
- 独立した予測者の平均は、個々の予測者より正確
- **条件**: 予測者が独立（相関係数0.7未満）

**Quality over Quantity**:
- 高品質な3戦略（相関0.5未満）> 低品質な7戦略（相関0.8以上）
- 戦略数の最適範囲: **3-7戦略**（機械学習の一般原則）
- 本システムの目標: **3-4戦略に絞る**（KISS原則徹底）

**Strategy-Aware MLとの関係**:
- 戦略シグナル = MLの入力特徴量
- 低品質戦略 = ノイズ特徴量 → ML予測精度低下
- 高相関戦略 = 冗長特徴量 → 過学習リスク
- **戦略最適化 = ML最適化**（相乗効果）

## 実装タスク

### Phase 51.1: 既存5戦略個別パフォーマンス分析（2-3日）

**実装内容**:
- [ ] 各戦略の個別バックテスト実行（過去180日）
- [ ] 勝率・損益率・シャープレシオ・最大ドローダウン測定
- [ ] 戦略間相関分析（相関係数マトリクス作成）
- [ ] アンサンブルへの貢献度分析（除外時の性能変化測定）
- [ ] **削除候補リスト作成**（積極的削除方針）

**分析対象**:
1. ATRBased Strategy
2. MochipoyAlert Strategy
3. MultiTimeframe Strategy
4. DonchianChannel Strategy
5. ADXTrendStrength Strategy

**評価基準**:
- 個別勝率50%以上
- 個別シャープレシオ1.0以上
- 相関係数0.7未満（独立性確保）
- 除外時の性能悪化10%以上（貢献度確認）

**品質基準**:
- 相関分析の統計的有意性確認
- バックテストの信頼性確認（Phase 49基盤活用）

### Phase 51.2: 新戦略候補リサーチ・実装（3-4日）

**実装内容**:

**ユーザー選択戦略**:
- [ ] **Ichimoku Cloud Strategy**（一目均衡表）
  - 雲・転換線・基準線でサポレジ・トレンド・モメンタム統合
  - 日本発祥の総合的トレンド分析
- [ ] **Bollinger Bands Mean Reversion**
  - ボラティリティベース逆張り
  - バンド拡大時の反発狙い・レンジ相場で有効

**短期トレード推奨戦略**（5分間隔実行・デイトレード特化に最適）:
- [ ] **Stochastic Oscillator Strategy**
  - 短期的な買われすぎ（80%以上）・売られすぎ（20%以下）判定
  - 反転シグナル生成・短期トレードで高精度
- [ ] **RSI Divergence Strategy**
  - RSIダイバージェンス検出（価格とRSIの乖離分析）
  - 短期反転予測・トレンド転換点捕捉
- [ ] **EMA Crossover Strategy**
  - 短期EMA（5/10/20）クロス
  - 高頻度シグナル・トレンド初動捕捉

**実装方針**:
- SignalBuilder統一パターン適用（Phase 32方針継承）
- 15m ATR優先使用（全戦略統一）
- SL/TP機能完全実装
- 単体テスト追加（各戦略にtest_*.py作成）

**品質基準**:
- 各新戦略の個別バックテスト実行
- 既存5戦略との相関分析
- シャープレシオ1.0以上確認

### Phase 51.3: 戦略組み合わせ最適化（3-4日）

**実装内容**:
- [ ] 全10戦略（既存5 + 新規5）のバックテスト実行
- [ ] 組み合わせパターン比較:
  - **3戦略構成**（KISS原則・最もシンプル・推奨）
  - **4戦略構成**（バランス型）
  - 5戦略構成（現状維持・比較用）
- [ ] Optunaによる戦略重み最適化（100 trials）
- [ ] 相関係数マトリクス分析（0.7未満で独立性確保）
- [ ] **最終決定: 3-4戦略に積極的に絞る**

**最適化目標**:
- シャープレシオ最大化
- 最大ドローダウン最小化
- 相関係数0.7未満の独立性確保
- シンプル性維持（KISS原則・Phase 46方針継承）

**品質基準**:
- 戦略数削減（5戦略 → 3-4戦略）
- シャープレシオ維持または向上
- ドローダウン悪化なし
- F1スコア0.65以上達成

### Phase 51.4: ML再学習・ウォークフォワード検証（3-4日）

**実装内容**:
- [ ] 戦略シグナル特徴量更新（5戦略 → 3-4戦略）
- [ ] feature_order.json更新（70特徴量 → 65+N特徴量）
  - 62基本特徴量（50テクニカル+7時間+5派生指標） + N戦略シグナル特徴量（N=3-4）
- [ ] MLモデル再学習（Optuna 50 trials）
- [ ] **ウォークフォワード検証実装**（Phase 50.7から移動・本格実装）
  - TimeSeriesSplit強化（n_splits=5継続）
  - 過学習検証（train vs validation vs test）
  - モデル汎化性能評価
- [ ] バックテスト総合検証（Phase 49基盤活用）
- [ ] F1スコア・収益性・リスク指標評価

**ウォークフォワード検証実装**:
```python
# ローリングウィンドウによる検証
for train_end in rolling_windows:
    train_data = data[:train_end]
    test_data = data[train_end:train_end + test_period]
    model.fit(train_data)
    predictions = model.predict(test_data)
    evaluate_performance(predictions, test_data)
```

**品質基準**:
- F1スコア0.65-0.70維持または向上
- シャープレシオ改善確認
- ドローダウン悪化なし
- 汎化性能の向上確認（ウォークフォワード検証）
- テストカバレッジ66%以上維持
- 1,087テスト100%成功維持

**注**: Phase 53.2で特徴量選択実施後、最終調整の可能性あり

### Phase 51.5: ペーパートレード検証（1週間）

**実装内容**:
- [ ] 新戦略構成（3-4戦略）のペーパートレード
- [ ] 実市場での動作確認
- [ ] 取引精度・収益性測定
- [ ] エラーハンドリング確認
- [ ] Discord通知動作確認

**品質基準**:
- 実市場での安定動作確認
- 想定通りの取引パターン確認
- エラー発生時の復旧確認

## Phase 51期待効果

**Phase 51単独**:
- 戦略精度: +10-20%向上
- ML予測精度: +5-10%向上（最適化された戦略シグナル特徴量）
- リスク管理: 低性能戦略削除でドローダウン削減
- シンプル性向上: 5戦略 → 3-4戦略（KISS原則達成）

**Phase 50+51複合効果**:
- ML予測精度: +25-40%向上（Phase 50特徴量拡張 + Phase 51戦略最適化）
- 収益性: +30-50%向上
- Phase 49比で大幅な性能向上実現

## リスクと対策

**リスク**:
- 戦略削除による多様性低下
- 新戦略の過学習リスク
- Phase 52以降への影響（ML再学習必要）

**対策**:
- 相関分析による独立性確保（相関0.7未満）
- ウォークフォワード検証で汎化性確認
- Phase 51.4でML再学習を完了（Phase 52実施前）
- features.yamlでトグル管理（新戦略のオン・オフ切り替え）

---

# 📈 Phase 52: 3軸マルチタイムフレーム戦略（1-2週間）【Phase 51完了後】

## 目的

**問題**: 5分間隔実行だが4h/15m足の2軸のみ
**解決**: 5分足を活用して直近市場状況を反映
**期待効果**: エントリー精度+8-15%向上

## 実装タスク

### Phase 52.1: 5分足補助指標実装（3-4日）

**実装内容**:
- [ ] DataPipeline拡張: **5分足OHLCV取得**
- [ ] 5分足分析ロジック: EMA5/10クロス・RSI
- [ ] MultiTimeframe戦略拡張: 3軸構成（4h:60%, 15m:30%, 5m:10%）
- [ ] フィルターモード実装（エントリー可否判定）
- [ ] **代替案検討**: 1時間足の効果も評価

**品質基準**:
- bitbank API 5分足取得確認
- キャッシュ戦略実装
- ノイズフィルタリング実装

### Phase 52.2: バックテスト検証（2-3日）

**実装内容**:
- [ ] **2軸 vs 3軸（5m）比較**
- [ ] **1時間足も試験的に検証**（代替案）
- [ ] ノイズ影響評価
- [ ] エントリー精度測定
- [ ] 取引回数・勝率・損益比較

**比較パターン**:
1. 現状: 4h（トレンド）+ 15m（エントリー）
2. 提案: 4h（60%）+ 15m（30%）+ 5m（10%）
3. 代替: 4h（60%）+ 15m（30%）+ 1h（10%）

**品質基準**:
- ノイズ増加が許容範囲内
- エントリー精度+5%以上向上
- ドローダウン悪化なし

### Phase 52.3: ペーパートレード検証（1-2週間）

**実装内容**:
- [ ] 実動作確認（5分足または1時間足）
- [ ] エントリータイミング精度測定
- [ ] 誤検知率測定

### Phase 52.4: 段階的ライブ適用

**実装内容**:
- [ ] 効果確認時のみ有効化
- [ ] features.yamlでトグル管理

## Phase 52期待効果

- **エントリー精度**: +8-15%向上
- **Phase 50+51+52複合効果**: +34-58%
- **直近変動対応**: 急激な価格変動への対応力強化

## リスクと対策

**リスク**:
- 5分足ノイズ増加
- API呼び出し増加

**対策**:
- バックテストで十分な検証
- 1時間足も代替案として検証
- features.yamlでオン・オフ切り替え可能

---

# 🔧 Phase 53: 特徴量拡張・継続的改善（Phase 52完了後）【継続的】

## 目的

**問題**: 60-65特徴量で固定・市場変化への適応不足
**解決**: 継続的に特徴量を追加・評価・モデル性能監視
**期待効果**: ML精度継続向上・市場変化への適応・長期安定運用

**注**: Phase 53.1（戦略追加候補）は**Phase 51に統合済み**・削除

## 実装タスク

### Phase 53.1: オンチェーン指標追加（3-4日）【Phase 50から移動】

**実装内容**:
- [ ] ファンディングレート: 先物プレミアム
- [ ] 建玉比率（ロング/ショート比率）: 市場センチメント
- [ ] アクティブアドレス数: ネットワーク活性度
- [ ] 流動性指標: 取引所残高推移
- [ ] 5-10特徴量追加

**データソース**:
- CryptoQuant API
- Glassnode API
- 無料枠で取得可能なデータ優先

**品質基準**:
- データ品質確認
- 欠損値処理実装
- バックテストで効果検証

### Phase 53.2: 特徴量選択・最適化（2-3日）【Phase 50.8から移動・Phase 51完了後実施】

**実装内容**:
- [ ] **ミューチュアルインフォメーション分析**
- [ ] **逐次特徴量削減**（Recursive Feature Elimination）
- [ ] 相関分析・冗長性排除
- [ ] L1正則化による特徴量選択
- [ ] 最適特徴量セット決定（過学習防止）

**実装例**:
```python
from sklearn.feature_selection import mutual_info_classif, RFE
from sklearn.linear_model import LassoCV

# ミューチュアルインフォメーション
mi_scores = mutual_info_classif(X, y)
top_features = select_top_k_features(mi_scores, k=60)

# 逐次特徴量削減
rfe = RFE(estimator=model, n_features_to_select=60)
selected_features = rfe.fit_transform(X, y)
```

**品質基準**:
- 特徴量数削減（65-70 → 60-65最適化）
- モデル精度維持または向上
- 過学習指標改善

**注**: Phase 51（戦略最適化）完了後に実施・戦略数削減（5→3-4）を反映した特徴量選択

### Phase 53.3: モデルドリフト検知システム（4-5日）【新規追加】

**実装内容**:
- [ ] **データ分布変化検出**
- [ ] **モデル性能劣化検知**
- [ ] 自動再学習トリガー実装
- [ ] 統計的モニタリング（Kolmogorov-Smirnov検定等）
- [ ] Discord通知統合

**実装例**:
```python
from scipy.stats import ks_2samp

# データ分布変化検出
train_distribution = X_train.mean(axis=0)
current_distribution = X_current.mean(axis=0)
statistic, p_value = ks_2samp(train_distribution, current_distribution)

if p_value < 0.05:
    trigger_retraining()
    send_discord_alert("Model drift detected")
```

**品質基準**:
- モデル劣化を1週間以内に検知
- 再学習の自動トリガー実装
- 誤検知率を低く保つ

### Phase 53.4: ABテスト・継続的評価フレームワーク（1週間）【拡張】

**実装内容**:
- [ ] ABテスト実装（新旧戦略・特徴量比較）
- [ ] バックテスト自動評価
- [ ] 週次パフォーマンスレポート拡張
- [ ] シャープレシオ・ドローダウン監視強化
- [ ] 勝率・平均利益率トラッキング

**品質基準**:
- 自動化された評価プロセス
- 統計的有意性検定
- 可視化ダッシュボード

### Phase 53.5: 先進的手法研究（研究課題）【新規追加】

**研究対象**:
- [ ] RNN/LSTM: 時系列パターン学習
- [ ] CNN: 価格チャートパターン認識
- [ ] Transformer/Attention機構
- [ ] 強化学習（Reinforcement Learning）

**注意事項**:
- **小規模実験のみ**
- 複雑性・過学習リスク高い
- 効果検証後に本番導入判断
- 現在のGBDT系で十分な性能

**品質基準**:
- 実験環境での検証のみ
- 本番導入は慎重に判断
- KISS原則との両立確認

## Phase 53期待効果

- **継続的ML精度向上**: 市場変化への適応
- **モデル安定性向上**: ドリフト検知・自動再学習
- **資産別戦略最適化**: 将来のマルチアセット対応準備
- **先進技術キャッチアップ**: 研究レベルでの技術評価

## リスクと対策

**リスク**:
- 複雑化による保守性低下
- 過学習リスク増加

**対策**:
- 各追加機能をfeatures.yamlでトグル管理
- KISS原則チェックを徹底
- 効果不十分なら削除も検討

---

# 🌐 Phase 53.6: マルチアセット対応（2-3週間）【Phase 52から移動・優先度低】

## 目的

**問題**: BTC/JPY専用
**解決**: ETH/JPY・XRP/JPY・海外アルトコイン対応
**期待効果**: 収益機会+30-50%拡大

## 実装タスク

### Phase 53.6.1: アセット抽象化（3-4日）

**実装内容**:
- [ ] AssetConfigクラス実装
- [ ] unified.yaml拡張
- [ ] 資産別パラメータ管理

### Phase 53.6.2: bitbank ETH/JPY対応（3-4日）

**実装内容**:
- [ ] ETH/JPY API対応
- [ ] ETH-BTC相関係数特徴量追加
- [ ] 流動性確認

### Phase 53.6.3: bitbank XRP/JPY対応（3-4日）

**実装内容**:
- [ ] XRP/JPY API対応
- [ ] XRP-BTC相関係数特徴量追加
- [ ] 流動性確認

### Phase 53.6.4: 海外CEX/DEXマイナーアルトコイン対応（4-5日）

**実装内容**:
- [ ] 候補資産選定（SOL・AVAX・MATIC・LINK）
- [ ] BTC相関分析（相関係数0.3未満推奨）
- [ ] Binance/Uniswap API統合
- [ ] 法規制確認

### Phase 53.6.5: ポートフォリオ最適化（4-5日）

**実装内容**:
- [ ] PortfolioOptimizer実装
- [ ] Kelly基準ベース資金配分
- [ ] 相関係数考慮リスク分散

### Phase 53.6.6: 段階的ライブ適用（2-3週間）

**実装内容**:
- [ ] ペーパートレード検証（各資産1週間）
- [ ] 少額ライブ検証（各1万円・1週間）

## Phase 53.6期待効果

- **収益機会**: +30-50%拡大
- **リスク分散**: 相関係数考慮
- **Phase 50+51+53.6複合効果**: +62-116%

## リスクと対策

**リスク**:
- 複雑化リスク大
- 流動性リスク（ETH/JPY・XRP/JPY）
- 法規制リスク（海外CEX）

**対策**:
- **Phase 53完了後に実施**
- BTC/JPY専用を先に極める
- 効果不十分なら見送りも検討

## 実装判断基準

以下の条件を満たす場合のみ実装:
1. Phase 50-51-53でBTC/JPY精度が十分向上
2. システムが安定稼働（3ヶ月以上）
3. 資金規模が10万円以上
4. 流動性・法規制問題をクリア

---

# 📱 Phase 54: モバイル管理アプリ（PWA）（1-2週間）【運用改善】

## 目的

**問題**: 外出先でbotの停止・確認ができない
**解決**: スマホからbot制御可能なPWA実装
**期待効果**: 運用効率向上・緊急対応可能化

## 実装タスク

### Phase 54.1: 認証システム実装（2-3日）

**実装内容**:
- [ ] JWT認証実装
- [ ] 環境変数でパスワード管理
- [ ] Secret Manager統合

### Phase 54.2: REST API実装（2-3日）

**実装内容**:
- [ ] FastAPI実装
- [ ] エンドポイント: status/start/stop/balance/positions
- [ ] API認証・レート制限

### Phase 54.3: PWAフロントエンド実装（3-4日）

**実装内容**:
- [ ] HTML/CSS/JavaScript実装
- [ ] Material Design Lite使用
- [ ] レスポンシブデザイン
- [ ] オフライン対応

### Phase 54.4: Cloud Runデプロイ（1日）

**実装内容**:
- [ ] Dockerfile拡張
- [ ] HTTPSアクセス確認
- [ ] Cloud Run設定更新

### Phase 54.5: セキュリティ強化（1日）

**実装内容**:
- [ ] レート制限実装
- [ ] 監査ログ実装
- [ ] CORS設定

## Phase 54期待効果

- **運用効率**: 大幅向上
- **緊急対応**: 外出先から即座に停止可能
- **稼働率**: 99.9%達成

---

## 🎯 開発優先度まとめ

| 優先度 | Phase | 期間 | 効果 | リスク | 推奨 |
|--------|-------|------|------|--------|------|
| ⭐ 最優先 | Phase 50 | 2週間 | 70特徴量・完全無料・Graceful Degradation | 低 | **✅ Phase 50.1-50.3完了・Phase 50.4実施予定** |
| 🎯 最優先 | **Phase 51** | 1-2週間 | **戦略精度+10-20%・ML精度+5-10%・KISS原則達成** | 中 | **Phase 50完了後即実施** |
| 📈 性能向上 | Phase 52 | 1-2週間 | エントリー精度+8-15%（3軸マルチタイムフレーム） | 中 | Phase 51完了後実施 |
| 🔧 継続改善 | Phase 53 | 継続的 | ML精度継続向上・ドリフト検知 | 低 | Phase 52後継続実施 |
| 🌐 拡張 | Phase 53.5 | 2-3週間 | 収益機会+30-50% | 高 | **Phase 53後・条件付き実施** |
| 📱 運用改善 | Phase 54 | 1-2週間 | 運用効率向上 | 低 | 性能向上後実施 |

## 期待される効果

**Phase別効果**:
- **Phase 50単独**: ML予測精度+15-25%（時間・マクロ経済特徴量拡張）
- **Phase 51単独**: 戦略精度+10-20%・ML予測精度+5-10%（戦略最適化・3-4戦略に絞る）
- **Phase 52単独**: エントリー精度+8-15%（3軸マルチタイムフレーム）

**複合効果**:
- **Phase 50+51複合**: ML予測精度+25-40%・収益性+30-50%（特徴量拡張 + 戦略最適化）
- **Phase 50+51+52複合**: エントリー精度+34-58%（特徴量 + 戦略 + マルチタイムフレーム）
- **Phase 50+51+52+53継続改善**: 長期的な精度向上維持・市場変化への適応
- **Phase 53.5（条件付き）**: 収益機会+30-50%（BTC/JPY完成後のマルチアセット対応）

## 重要な設計原則

### KISS原則の徹底
- Phase 46の「デイトレード特化・シンプル設計回帰」方針を継続
- 複雑化する機能は慎重に検討
- 効果不十分なら削除も躊躇しない

### トレーリングストップについて
- **Phase 46で削除済み・再導入しない**
- デイトレード特化設計と相性が悪い
- シンプル性を優先

### マルチアセットについて
- **Phase 53完了後に実施**
- BTC/JPY専用を極めることを優先
- 実装判断は慎重に

---

**最終更新**: 2025年10月30日 - Phase 50.1-50.6完了（70特徴量・外部API統合・証拠金維持率80%完全修正・SL注文保護・外部API成功率100%達成）・Phase 50.7簡易版 → Phase 51 → Phase 53.2（Phase 50.8移動）実施順序決定
