# 暗号資産取引Bot - 未達成タスク一覧

## 📋 このファイルの目的

**使用場面**:
- 未達成開発タスク確認
- 実装優先度の把握
- 進捗管理とタスク追跡

**ルール**:
- **未完了タスクのみ記載**（達成済み: `docs/開発履歴/Phase_40-46.md`参照）
- **実装順序**に沿って記載（Phase 47 → 48 → 49...）
- 定期的にタスク状況を更新

**🎯 2025/10/22更新**: Phase 40-48完了 → 次はPhase 49（バックテスト完全改修）から開始 ⭐最優先・基盤修正

---

## 🔥 **未達成タスク一覧**（実装優先度順）

---

# ⭐ **Phase 49: バックテスト完全改修（1週間）** 最優先・基盤修正

## 背景・目的

**問題**: バックテストとライブモードの動作完全乖離
- バックテスト: 568 BUY / 0 SELL（戦略シグナル0埋め問題）
- ライブモード: SELL偏重（実戦略シグナル使用）
- Phase 41.8のStrategy-Aware ML（55特徴量）が破綻

**解決**: バックテストで実際の戦略を実行してライブモード完全一致
**期待効果**: **信頼できるバックテスト基盤確立・Phase 50以降の精度向上**

## 実装タスク

### Phase 49.1: 戦略シグナル実行実装（2-3日）⭐最優先
- [ ] backtest_runner.py戦略シグナル0埋め削除（line 256-267）
- [ ] _precompute_strategy_signals()メソッド追加
- [ ] 各タイムスタンプで5戦略実行（look-ahead bias防止）
- [ ] 実戦略シグナル特徴量生成（Phase 41.8準拠）

### Phase 49.2: ポジション決済ロジック実装（2-3日）⭐最優先
- [ ] _check_tp_sl_triggers()メソッド追加
- [ ] TP/SLトリガーチェック・決済シミュレーション
- [ ] bitbank API準拠（stop注文・limit注文シミュレーション）
- [ ] SELL注文生成・完全な取引サイクル実現

### Phase 49.3: 損益計算・レポート実装（2日）
- [ ] BacktestReporter拡張（TradeTracker追加）
- [ ] エントリー/エグジットペアリング・取引毎損益計算
- [ ] パフォーマンス指標計算（勝率・プロフィットファクター・最大DD等）
- [ ] 詳細テキストレポート生成

### Phase 49.4: matplotlib可視化実装（1-2日）
- [ ] src/backtest/visualizer.py新規作成
- [ ] エクイティカーブ・損益分布ヒストグラム
- [ ] 価格チャート + エントリー/エグジットマーカー
- [ ] ドローダウンチャート・統計サマリー

### Phase 49.5: 維持率問題解決（1日）⚠️重要
- [ ] MarginMonitor確認（80%維持率が遵守されない原因特定）
- [ ] 現在53%の根本原因調査（ログ調査・ロジック確認）
- [ ] 80%確実遵守ロジック実装・修正
- [ ] ペーパートレード検証（80%以下でエントリー拒否確認）

### Phase 49.6: TP/SL設定検証（半日）⚠️重要
- [ ] ライブモードTP/SL設定確認（SL 2%・TP 4%が実際に稼働しているか）
- [ ] ハードコード値調査（20ファイル確認・thresholds.yaml以外の設定値）
- [ ] order_strategy.py完全検証（Phase 42.4修正が正しく動作しているか）
- [ ] 実際の注文ログ確認（TP/SL価格が設定通りか検証）

**Phase 49期待効果**:
- ✅ バックテスト信頼性100%（ライブモード完全一致）
- ✅ SELL判定正常化（戦略シグナル実行）
- ✅ 完全な損益分析・グラフ可視化
- ✅ **Phase 50以降の信頼できる基盤確立**

---

# 📊 **Phase 50: 情報源多様化（2週間）** 基盤強化

## 背景・目的

**問題**: 55特徴量で固定・2025年最先端研究との差異
**解決**: 特徴量55→75-88拡張・ML予測精度+15-25%向上
**期待効果**: **すべての取引判断の精度向上・後続Phase性能向上**

**2025年最先端研究との比較**:
- ✅ あなたのbot: Random Forest・XGBoost・LightGBM（最先端一致）
- ✅ あなたのbot: 55特徴量（Phase 45完了）
- ❌ 2025年最先端: NLP感情分析・マクロ経済指標・時間的特徴量
- ❌ 2025年最先端: 80-100特徴量

**Phase 50戦略**: 低コスト実装（50.1-50.2）を優先

## 実装タスク

### Phase 50.1: マクロ経済指標統合（2-3日）⭐最優先・ゼロコスト
- [ ] 無料データソース統合（Yahoo Finance・FRED API）
- [ ] ドル円・日経平均・米国債利回り・Fear & Greed Index
- [ ] 5-10特徴量追加

### Phase 50.2: 時間的特徴量拡張（2-3日）⭐最優先・ゼロコスト
- [ ] 時間的パターン特徴量実装
- [ ] 曜日・時間帯・月・四半期効果
- [ ] 5-8特徴量追加

### Phase 50.3: News API統合（3-4日）⚠️中優先・月額$50-100
- [ ] CryptoCompare/Finnhub News API統合
- [ ] VADER感情分析実装
- [ ] 10-15特徴量追加

### Phase 50.4: バックテスト検証・ML再学習（2-3日）
- [ ] 55特徴量 vs 75-88特徴量比較
- [ ] ML再学習（Optuna 50 trials）
- [ ] ペーパートレード検証


**Phase 50期待効果（合計）**:
- ✅ 特徴量数: 55 → 75-88（+36-60%）
- ✅ ML予測精度: +15-25%
- ✅ 2025年最先端レベル到達
- ✅ 月額コスト: 0-100ドル（Phase 50.1-50.2は無料）
- ✅ **Phase 51-54すべての性能を底上げ**

---

# 📈 **Phase 51: 3軸マルチタイムフレーム戦略（1-2週間）** 性能向上

## 背景・目的

**問題**: 5分間隔実行だが4h/15m足の2軸のみ
**解決**: 5分足を活用して直近市場状況を反映
**期待効果**: エントリー精度+8-15%向上（**Phase 50後は+8-15%に向上**）

**Phase 50効果**: 75-88特徴量で5分足分析 → ノイズ判定精度向上

## 実装タスク

### Phase 51.1: 5分足補助指標実装（3-4日）
- [ ] DataPipeline拡張: 5分足OHLCV取得
- [ ] 5分足分析ロジック: EMA5/10クロス・RSI（**75-88特徴量ベース**）
- [ ] MultiTimeframe戦略拡張: 3軸構成（4h:60%, 15m:30%, 5m:10%）
- [ ] フィルターモード実装

### Phase 51.2: バックテスト検証（2-3日）
- [ ] 2軸 vs 3軸比較（**75-88特徴量ベース**）
- [ ] ノイズ影響評価

### Phase 51.3: ペーパートレード検証（1-2週間）
- [ ] 実動作確認

### Phase 51.4: 段階的ライブ適用
- [ ] 効果確認時のみ有効化

**Phase 51期待効果**:
- ✅ エントリー精度: +8-15%（Phase 50前は+5-10%）
- ✅ **Phase 50+51複合効果: +24-43%**

---

# 🌐 **Phase 52: マルチアセット対応（2-3週間）** 拡張機能

## 背景・目的

**問題**: BTC/JPY専用
**解決**: ETH/JPY・XRP/JPY・海外アルトコイン対応
**期待効果**: 収益機会+30-50%拡大

**Phase 50+51効果**: 75-88特徴量+3軸マルチタイムフレームで高精度マルチアセット取引

## 実装タスク

### Phase 52.1: アセット抽象化（3-4日）
- [ ] AssetConfigクラス実装
- [ ] unified.yaml拡張

### Phase 52.2: 海外CEX/DEXマイナーアルトコイン対応（4-5日）
- [ ] 候補資産選定（SOL・AVAX・MATIC・LINK）
- [ ] BTC相関分析（相関係数0.3未満推奨）
- [ ] Binance/Uniswap API統合

### Phase 52.3: bitbank ETH/JPY対応（3-4日）
- [ ] ETH/JPY API対応
- [ ] ETH-BTC相関係数特徴量追加

### Phase 52.4: bitbank XRP/JPY対応（3-4日）
- [ ] XRP/JPY API対応
- [ ] XRP-BTC相関係数特徴量追加

### Phase 52.5: ポートフォリオ最適化（4-5日）
- [ ] PortfolioOptimizer実装
- [ ] Kelly基準ベース資金配分
- [ ] 相関係数考慮リスク分散

### Phase 52.6: 段階的ライブ適用（2-3週間）
- [ ] ペーパートレード検証（各資産1週間）
- [ ] 少額ライブ検証（各1万円・1週間）

**Phase 52期待効果**:
- ✅ 収益機会+30-50%拡大
- ✅ リスク分散
- ✅ **Phase 50+51+52複合効果: +62-116%**

---

# 🔧 **Phase 53: 戦略・特徴量拡張パッケージ（継続的改善）**

## 背景・目的

**問題**: 5戦略固定
**解決**: 継続的に戦略・特徴量を追加
**期待効果**: ML精度継続向上

**Phase 50-52効果**: 75-88特徴量+マルチアセット基盤で効率的に新戦略開発

## 実装タスク

### Phase 53.1: 戦略追加候補（各2-3日）
- [ ] Ichimoku Cloud Strategy（一目均衡表）
- [ ] Volume Profile Strategy（出来高プロファイル）
- [ ] Elliott Wave Strategy（エリオット波動）

### Phase 53.2: 特徴量追加候補（各1-2日）
- [ ] 追加時間的特徴量（5-8特徴量）
- [ ] 追加マクロ経済特徴量（3-5特徴量）
- [ ] オンチェーン特徴量（5-10特徴量）

### Phase 53.3: 継続的評価フレームワーク（1週間）
- [ ] AB Testing実装
- [ ] バックテスト自動評価
- [ ] 週次レポート生成

**Phase 53期待効果**:
- ✅ 継続的ML精度向上
- ✅ 資産別戦略最適化

---

# 📱 **Phase 54: モバイル管理アプリ（PWA）（1-2週間）** 運用改善

## 背景・目的

**問題**: 外出先でbotの停止・確認ができない
**解決**: スマホからbot制御可能なPWA実装
**期待効果**: 運用効率向上

## 実装タスク

### Phase 54.1: 認証システム実装（2-3日）
- [ ] JWT認証実装
- [ ] 環境変数でパスワード管理

### Phase 54.2: REST API実装（2-3日）
- [ ] FastAPI実装
- [ ] エンドポイント: status/start/stop/balance/positions

### Phase 54.3: PWAフロントエンド実装（3-4日）
- [ ] HTML/CSS/JavaScript実装
- [ ] Material Design Lite使用
- [ ] レスポンシブデザイン

### Phase 54.4: Cloud Runデプロイ（1日）
- [ ] Dockerfile拡張
- [ ] HTTPSアクセス確認

### Phase 54.5: セキュリティ強化（1日）
- [ ] レート制限実装
- [ ] 監査ログ実装

**Phase 54期待効果**:
- ✅ 運用効率大幅向上
- ✅ 緊急対応可能化

---

## 🎯 **開発優先度指針・実装スケジュール**

### 実装順序ロジック（2025/10/22更新・Phase 49追加）

```
✅ 完了: Phase 40-48（2025/10/22完了）
   → Phase 47: 確定申告対応システム完了（税務システム実装・95%時間削減）
   → Phase 48: Discord週間レポート実装（通知99%削減・月額コスト-35%）
   → 1,065テスト100%成功・67.36%カバレッジ達成

📅 実装予定（**Phase 49追加・番号繰り下げ**）:

1. Phase 49（1週間）: バックテスト完全改修 ⭐最優先・基盤修正
   → バックテストとライブモード完全一致・SELL判定正常化
   → **信頼できるバックテスト基盤確立**

2. Phase 50（2週間）: 情報源多様化 📊基盤強化
   → ML予測精度+15-25%・特徴量55→75-88
   → **すべての取引判断の精度向上・後続Phase強化**

3. Phase 51（1-2週間）: 3軸マルチタイムフレーム 📈性能向上
   → エントリー精度+8-15%（**Phase 50後は+8-15%に向上**）
   → **Phase 50+51複合効果: +24-43%**

4. Phase 52（2-3週間）: マルチアセット対応 🌐拡張機能
   → 収益機会+30-50%
   → **Phase 50+51+52複合効果: +62-116%**

5. Phase 53（継続的）: 戦略・特徴量拡張 🔧継続改善
   → ML精度継続向上
   → **75-88特徴量基盤で効率的に新戦略開発**

6. Phase 54（1-2週間）: モバイル管理アプリ 📱運用改善
   → 運用効率向上
```

### 優先度まとめ（Phase 49追加後）

| 優先度 | Phase | 期間 | 効果 | リスク | 状態 | 推奨 |
|--------|-------|------|------|--------|------|------|
| ⭐ 最優先 | Phase 49 | 1週間 | バックテスト信頼性100% | 低 | **実装中** | **✅ 最優先実施** |
| 📊 基盤強化 | Phase 50 | 2週間 | ML精度+15-25%・55→75-88特徴量 | 低 | 未着手 | **✅ Phase 49後実施** |
| 📈 性能向上 | Phase 51 | 1-2週間 | エントリー精度+8-15% | 中 | 未着手 | **✅ Phase 50後実施** |
| 🌐 拡張 | Phase 52 | 2-3週間 | 収益機会+30-50% | 中-高 | 未着手 | **✅ Phase 50+51後実施** |
| 🔧 継続 | Phase 53 | 継続的 | ML精度継続向上 | 低 | 未着手 | 継続実施 |
| 📱 運用改善 | Phase 54 | 1-2週間 | 運用効率向上 | 低 | 未着手 | 性能向上後実施 |

### Phase 49を最優先にする理由

**バックテスト信頼性が全ての基盤**:
- 現状: バックテスト結果がライブモードと完全乖離（BUY偏重 vs SELL偏重）
- 影響: Phase 50以降の全ての改善がバックテストで正しく評価できない
- 解決: Phase 49でバックテスト修正 → Phase 50以降の開発が信頼できるデータに基づいて進行
- リスク最小: 既存ロジックの修正のみ（新機能追加なし）

**期待される複合効果**:
- **旧順序（Phase 49なし）**: バックテスト不正確 → 改善効果測定不能 → 総合効果不明
- **新順序（Phase 49先行）**: バックテスト正確 → 全Phase効果測定可能 → **総合効果+62-116%達成**

---

**🎉 Phase 40-48完了！次はPhase 49（バックテスト完全改修）へ** ⭐最優先

**📊 現在の基準**:
- Phase 47完了: 確定申告対応システム実装（税務計算95%時間削減・100%精度）
- Phase 48完了: Discord週間レポート実装（通知99%削減・月額コスト-35%）
- 1,065テスト100%成功・67.36%カバレッジ達成
- CI/CD自動デプロイ実行中

**🚀 Phase 49実装により**:
- バックテスト信頼性100%達成 → ライブモード完全一致
- SELL判定正常化 → 戦略シグナル実行による正しい判定
- 完全な損益分析・グラフ可視化 → 詳細なパフォーマンス評価
- Phase 50以降の信頼できる基盤確立 → 総合収益効果+62-116%達成への第一歩

**詳細**: `docs/開発履歴/Phase_49-XX.md` 参照（作成予定）

---

**最終更新**: 2025年10月22日 - Phase 49実装開始・バックテスト完全改修着手
