# bitbank API ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

## ğŸ“‹ ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ç›®çš„

**ä½¿ç”¨å ´é¢**:
- APIã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ç¢ºèª
- APIä»•æ§˜ï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ã®èª¿æŸ»
- æ³¨æ–‡ã‚¿ã‚¤ãƒ—ãƒ»èªè¨¼æ–¹å¼ã®ç¢ºèª

**ãƒ«ãƒ¼ãƒ«**:
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®URLä¸€è¦§ã‚’ç¶­æŒ
- ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»•æ§˜ã‚’æœ€æ–°ã«ä¿ã¤
- å®Ÿè£…ä¾‹ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¯è¨˜è¼‰ã—ãªã„ï¼ˆå®Ÿè£…ã¯`src/data/bitbank_client.py`ã€å±¥æ­´ã¯é–‹ç™ºå±¥æ­´ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§ï¼‰

---

## ğŸ“š å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### åŸºæœ¬ä»•æ§˜
- [READMEï¼ˆæ¦‚è¦ï¼‰](https://github.com/bitbankinc/bitbank-api-docs/blob/master/README_JP.md)
- [REST APIä»•æ§˜](https://github.com/bitbankinc/bitbank-api-docs/blob/master/rest-api_JP.md)
- [ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§](https://github.com/bitbankinc/bitbank-api-docs/blob/master/errors_JP.md)

### APIç¨®åˆ¥
- [Public APIï¼ˆèªè¨¼ä¸è¦ï¼‰](https://github.com/bitbankinc/bitbank-api-docs/blob/master/public-api_JP.md)
- [Public Streamï¼ˆWebSocketï¼‰](https://github.com/bitbankinc/bitbank-api-docs/blob/master/public-stream_JP.md)
- [Private Streamï¼ˆèªè¨¼ä»˜ãWebSocketï¼‰](https://github.com/bitbankinc/bitbank-api-docs/blob/master/private-stream_JP.md)

---

## ğŸ” èªè¨¼æ–¹å¼ï¼ˆPrivate APIï¼‰

### èªè¨¼ãƒ˜ãƒƒãƒ€ãƒ¼æ§‹æˆ
```
ACCESS-KEY: <API Key>
ACCESS-NONCE: <Unix timestamp (milliseconds)>
ACCESS-SIGNATURE: <HMAC-SHA256 signature>
```

### ç½²åç”Ÿæˆãƒ«ãƒ¼ãƒ«

| ãƒ¡ã‚½ãƒƒãƒ‰ | ç½²åå¯¾è±¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | ä¾‹ |
|---------|------------------|-----|
| **GET** | `{nonce}{endpoint}` | `1696723200000/user/margin/status` |
| **POST** | `{nonce}{request_body}` | `1696723200000{"pair":"btc_jpy",...}` |

**ç½²åã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: HMAC-SHA256ï¼ˆhexdigestï¼‰

**âš ï¸ é‡è¦**: GET/POSTç½²åã®é•ã„ã‚’å³å®ˆï¼ˆèª¤ã‚‹ã¨ã‚¨ãƒ©ãƒ¼20003ç™ºç”Ÿï¼‰

---

## ğŸ“¡ ä¸»è¦Private APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ä¿¡ç”¨å–å¼•é–¢é€£
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/user/margin/status` | GET | è¨¼æ‹ é‡‘ç¶­æŒç‡ãƒ»åˆ©ç”¨å¯èƒ½æ®‹é«˜å–å¾— |
| `/user/spot/order` | POST | æ³¨æ–‡ä½œæˆï¼ˆç¾ç‰©ãƒ»ä¿¡ç”¨å–å¼•ä¸¡å¯¾å¿œï¼‰ |

### æ³¨æ–‡ç®¡ç†
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/user/spot/active_orders` | GET | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ³¨æ–‡ä¸€è¦§ |
| `/user/spot/cancel_order` | POST | æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ« |
| `/user/spot/orders_info` | POST | æ³¨æ–‡è©³ç´°å–å¾— |
| `/user/spot/trade_history` | GET | å–å¼•å±¥æ­´ |

### è³‡ç”£æƒ…å ±
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|--------------|---------|------|
| `/user/assets` | GET | è³‡ç”£æ®‹é«˜ |
| `/user/withdrawal_account` | GET | å‡ºé‡‘å…ˆä¸€è¦§ |

---

## ğŸ“ æ³¨æ–‡ã‚¿ã‚¤ãƒ—ï¼ˆOrder Typesï¼‰

### åŸºæœ¬æ³¨æ–‡ã‚¿ã‚¤ãƒ—
| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä½¿ç”¨å ´é¢ |
|--------|------|----------|
| `limit` | æŒ‡å€¤æ³¨æ–‡ | æŒ‡å®šä¾¡æ ¼ã§æ³¨æ–‡ãƒ»ç´„å®šç¢ºå®Ÿæ€§â†‘ |
| `market` | æˆè¡Œæ³¨æ–‡ | ç¾åœ¨ä¾¡æ ¼ã§å³æ™‚ç´„å®šãƒ»ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸ãƒªã‚¹ã‚¯ |

### é€†æŒ‡å€¤æ³¨æ–‡
| ã‚¿ã‚¤ãƒ— | èª¬æ˜ | ä½¿ç”¨å ´é¢ |
|--------|------|----------|
| `stop` | é€†æŒ‡å€¤æˆè¡Œæ³¨æ–‡ | ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹å®Ÿè£…ãƒ»ãƒˆãƒªã‚¬ãƒ¼ä¾¡æ ¼åˆ°é”ã§æˆè¡Œç´„å®š |
| `stop_limit` | é€†æŒ‡å€¤æŒ‡å€¤æ³¨æ–‡ | ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ï¼ˆä¾¡æ ¼æŒ‡å®šï¼‰ãƒ»ãƒˆãƒªã‚¬ãƒ¼ä¾¡æ ¼åˆ°é”å¾Œã«æŒ‡å€¤æ³¨æ–‡ |

### æ³¨æ–‡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
```python
{
    "pair": "btc_jpy",
    "amount": "0.0001",           # æ³¨æ–‡æ•°é‡
    "side": "buy" | "sell",       # å£²è²·æ–¹å‘
    "type": "limit" | "market" | "stop" | "stop_limit",

    # limit/stop_limit æ™‚ã®ã¿
    "price": "1000000",           # æ³¨æ–‡ä¾¡æ ¼

    # stop/stop_limit æ™‚ã®ã¿
    "trigger_price": "950000",    # ãƒˆãƒªã‚¬ãƒ¼ä¾¡æ ¼

    # ä¿¡ç”¨å–å¼•ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    "post_only": True | False,    # PostOnlyãƒ•ãƒ©ã‚°
}
```

### âš ï¸ æ³¨æ„äº‹é …
- **stopæ³¨æ–‡**: `trigger_price`å¿…é ˆãƒ»ä¾¡æ ¼åˆ°é”ã§æˆè¡Œç´„å®š
- **stop_limitæ³¨æ–‡**: `trigger_price` + `price`ä¸¡æ–¹å¿…é ˆ
- **limitæ³¨æ–‡**: SLç”¨é€”ã§ã¯èª¤èªè­˜ãƒªã‚¹ã‚¯ï¼ˆæ–°è¦ãƒã‚¸ã‚·ãƒ§ãƒ³é–‹è¨­ã¨è§£é‡ˆã•ã‚Œã‚‹å¯èƒ½æ€§ï¼‰

---

## âš ï¸ ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§

### èªè¨¼ã‚¨ãƒ©ãƒ¼
| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ | ä¸»ãªåŸå›  |
|--------|------|---------|
| 20003 | ACCESS-KEY not found | GET/POSTç½²åãƒ­ã‚¸ãƒƒã‚¯æ··åŒãƒ»API Keyæœªè¨­å®š |
| 20005 | Invalid API key | API Keyç„¡åŠ¹ãƒ»æœŸé™åˆ‡ã‚Œ |
| 20014 | Invalid nonce | nonceå€¤ãŒéå»ã¾ãŸã¯æœªæ¥ã™ãã‚‹ãƒ»ã‚·ã‚¹ãƒ†ãƒ æ™‚åˆ»ã‚ºãƒ¬ |

### å–å¼•ã‚¨ãƒ©ãƒ¼
| ã‚³ãƒ¼ãƒ‰ | èª¬æ˜ | ä¸»ãªåŸå›  |
|--------|------|---------|
| 30101 | ãƒˆãƒªã‚¬ãƒ¼ä¾¡æ ¼ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ | `stop`æ³¨æ–‡ã§`trigger_price`æœªæŒ‡å®š |
| 50061 | åˆ©ç”¨å¯èƒ½æ–°è¦å»ºç‰å¯èƒ½é¡ã‚’è¶…é | è¨¼æ‹ é‡‘æ®‹é«˜ä¸è¶³ |
| 50062 | ä¿æœ‰å»ºç‰æ•°é‡ã‚’è¶…é | æ±ºæ¸ˆæ³¨æ–‡æ•°é‡ > ä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³ãƒ»`limit`æ³¨æ–‡ã§æ±ºæ¸ˆæ™‚ |
| 50063 | æ³¨æ–‡ä¾¡æ ¼ãŒä¸æ­£ | ä¾¡æ ¼ç¯„å›²å¤–ãƒ»æœ€å°ä¾¡æ ¼å˜ä½é•å |

---

## ğŸš¦ ãƒ¬ãƒ¼ãƒˆåˆ¶é™

| APIç¨®åˆ¥ | åˆ¶é™å€¤ | åˆ¶é™è¶…éæ™‚ |
|---------|-------|-----------|
| å–å¾—ç³»API | 10ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’ | HTTP 429ã‚¨ãƒ©ãƒ¼ |
| æ›´æ–°ç³»API | 6ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’ | HTTP 429ã‚¨ãƒ©ãƒ¼ |

---

## ğŸ¯ æ³¨æ–‡ã‚¿ã‚¤ãƒ—é¸æŠã‚¬ã‚¤ãƒ‰

| ç”¨é€” | æ¨å¥¨ã‚¿ã‚¤ãƒ— | ç†ç”± |
|------|----------|------|
| ã‚¨ãƒ³ãƒˆãƒªãƒ¼ | `limit`ï¼ˆæŒ‡å€¤ï¼‰ | ç´„å®šç¢ºå®Ÿæ€§â†‘ãƒ»Makeræ‰‹æ•°æ–™é‚„å…ƒ |
| ãƒ†ã‚¤ã‚¯ãƒ—ãƒ­ãƒ•ã‚£ãƒƒãƒˆ | `limit`ï¼ˆæŒ‡å€¤ï¼‰ | åˆ©ç›Šç¢ºä¿ãƒ»æ‰‹æ•°æ–™é‚„å…ƒ |
| ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹ | `stop`ï¼ˆé€†æŒ‡å€¤æˆè¡Œï¼‰ | ç¢ºå®Ÿãªæåˆ‡ã‚Šå®Ÿè¡Œ |
| ç·Šæ€¥æ±ºæ¸ˆ | `market`ï¼ˆæˆè¡Œï¼‰ | å³æ™‚ç´„å®šå„ªå…ˆ |
