# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å®Ÿè¡Œãƒ»åˆ†æãƒãƒ‹ãƒ¥ã‚¢ãƒ«

**AIè‡ªå‹•å–å¼•ã‚·ã‚¹ãƒ†ãƒ ** ã®ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰æ©Ÿèƒ½ã®è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã€çµæœåˆ†æã€é‹ç”¨æ‰‹é †ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### **çµ±åˆå®Ÿè¡Œç’°å¢ƒ (Phase 21)**

**å…±é€šåŸºç›¤**: æœ¬ç•ªãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãŒåŒä¸€ãƒ­ã‚¸ãƒƒã‚¯ã§å‹•ä½œ
- **çµ±åˆã‚·ã‚¹ãƒ†ãƒ **: `TradingCycleManager` ã«ã‚ˆã‚‹å®Œå…¨åŒä¸€å‡¦ç†
- **15ç‰¹å¾´é‡**: 7ã‚«ãƒ†ã‚´ãƒªçµ±ä¸€ç®¡ç†ãƒ»`feature_order.json` æº–æ‹ 
- **5æˆ¦ç•¥çµ±åˆ**: ATRãƒ»ã‚‚ã¡ã½ã‚ˆãƒ»MultiTimeframeãƒ»DonchianChannelãƒ»ADXTrend
- **MLäºˆæ¸¬**: 3ãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ï¼ˆLightGBM 50%ãƒ»XGBoost 30%ãƒ»RandomForest 20%ï¼‰
- **å‹•çš„ä¿¡é ¼åº¦**: å¸‚å ´é©å¿œå‹0.25-0.6ä¿¡é ¼åº¦è¨ˆç®—

### **å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰æ¯”è¼ƒ**

| æ©Ÿèƒ½ | ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ | ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ | ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰ |
|------|-------------|----------------|---------------|
| **ãƒ‡ãƒ¼ã‚¿æº** | å›ºå®šCSV | Bitbank API | Bitbank API |
| **å–å¼•å®Ÿè¡Œ** | ä»®æƒ³ï¼ˆç„¡åˆ¶é™ï¼‰ | ä»®æƒ³ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰ | å®Ÿéš›ã®å–å¼• |
| **å®Ÿè¡Œæ™‚é–“** | é«˜é€Ÿï¼ˆæ•°åˆ†ï¼‰ | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  |
| **ç”¨é€”** | æˆ¦ç•¥æ¤œè¨¼ãƒ»æœ€é©åŒ– | æœ¬ç•ªå‰æ¤œè¨¼ | å®Ÿé‹ç”¨ |
| **ãƒªã‚¹ã‚¯** | ãªã— | ãªã— | å®Ÿè³‡é‡‘ |

## ğŸš€ ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### **1. åŸºæœ¬å®Ÿè¡Œ**

```bash
# å³åº§ã«å®Ÿè¡Œå¯èƒ½ï¼ˆæ—¢å­˜CSVãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼‰
python main.py --mode backtest

# ãƒ¬ãƒãƒ¼ãƒˆç¢ºèª
ls -t src/backtest/logs/backtest_*.json | head -1 | xargs cat | jq '.performance_stats'
```

### **2. ã‚«ã‚¹ã‚¿ãƒ æœŸé–“å®Ÿè¡Œ**

```bash
# 3ãƒ¶æœˆãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
python src/backtest/scripts/collect_historical_csv.py --days 90
python main.py --mode backtest

# 6ãƒ¶æœˆãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œ  
python src/backtest/scripts/collect_historical_csv.py --days 180
python main.py --mode backtest
```

### **3. æœŸé–“çµ±ä¸€å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰**

```bash
# 4æ™‚é–“è¶³ã¨15åˆ†è¶³ã®æœŸé–“ã‚’è‡ªå‹•çµ±ä¸€
python src/backtest/scripts/collect_historical_csv.py --match-4h --timeframes 15m
python main.py --mode backtest
```

### **4. ãƒ‡ãƒ¼ã‚¿ç¢ºèª**

```bash
# CSVãƒ‡ãƒ¼ã‚¿çŠ¶æ³ç¢ºèª
python -c "
import pandas as pd
df_4h = pd.read_csv('src/backtest/data/historical/BTC_JPY_4h.csv')
df_15m = pd.read_csv('src/backtest/data/historical/BTC_JPY_15m.csv')
print(f'4æ™‚é–“è¶³: {len(df_4h)}ä»¶ ({df_4h[\"datetime\"].iloc[0]} - {df_4h[\"datetime\"].iloc[-1]})')
print(f'15åˆ†è¶³: {len(df_15m)}ä»¶ ({df_15m[\"datetime\"].iloc[0]} - {df_15m[\"datetime\"].iloc[-1]})')
"
```

## ğŸ“Š ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å®Ÿè¡Œ

### **1. åŸºæœ¬å®Ÿè¡Œ**

```bash
# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰é–‹å§‹ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
python main.py --mode paper

# ãƒ­ã‚°ç¢ºèªï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
tail -f logs/crypto_bot.log | grep -E "(BUY|SELL|HOLD)"
```

### **2. è¨­å®šç¢ºèªå®Ÿè¡Œ**

```bash
# Discordé€šçŸ¥ç¢ºèª
python -c "
import os
print('Discordè¨­å®š:')
print('DISCORD_WEBHOOK_URL:', 'ã‚ã‚Š' if os.getenv('DISCORD_WEBHOOK_URL') else 'ãªã—')
print('é‹ç”¨ãƒ¢ãƒ¼ãƒ‰:', os.getenv('TRADING_MODE', 'development'))
"

# è³‡é‡‘ãƒ»è¨­å®šç¢ºèª
python main.py --mode paper --dry-run
```

### **3. æœŸé–“é™å®šå®Ÿè¡Œ**

```bash
# 1æ™‚é–“ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
timeout 3600 python main.py --mode paper
echo "1æ™‚é–“ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å®Œäº†"

# 1æ—¥ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
nohup python main.py --mode paper > logs/paper_trading_$(date +%Y%m%d).log 2>&1 &
```

### **4. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**

```bash
# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¼•ç›£è¦–
watch -n 30 "tail -10 logs/crypto_bot.log | grep -E 'Final decision|Balance'"

# Discordé€šçŸ¥ç¢ºèª
python -c "
import asyncio, sys; sys.path.insert(0, '.')
from src.monitoring.discord_notifier import DiscordNotifier

async def test_notification():
    notifier = DiscordNotifier()
    await notifier.send_info_notification('ğŸ“Š ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ç›£è¦–ãƒ†ã‚¹ãƒˆ', 'ã‚·ã‚¹ãƒ†ãƒ æ­£å¸¸å‹•ä½œä¸­')

asyncio.run(test_notification())
"
```

## ğŸ“‚ çµæœã®ä¿å­˜å ´æ‰€ãƒ»æ§‹æˆ

### **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ**

```
src/backtest/logs/
â”œâ”€â”€ backtest_20250912_061234.json     # å®Ÿè¡Œçµ±è¨ˆãƒ»JSONå½¢å¼
â”œâ”€â”€ progress_20250912_061234.json     # é€²æ—æƒ…å ±
â”œâ”€â”€ error_20250912_061234.json        # ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ï¼ˆç™ºç”Ÿæ™‚ï¼‰
â””â”€â”€ [ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—åˆ¥è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«]
```

### **ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰çµæœ**

```
logs/
â”œâ”€â”€ crypto_bot.log                     # çµ±åˆãƒ­ã‚°ï¼ˆå…¨ãƒ¢ãƒ¼ãƒ‰å…±é€šï¼‰
â”œâ”€â”€ paper_trading_reports/             # ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å°‚ç”¨ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ daily_summary_YYYYMMDD.json   # æ—¥æ¬¡ã‚µãƒãƒªãƒ¼
â”‚   â”œâ”€â”€ trades_YYYYMMDD.csv           # å–å¼•å±¥æ­´
â”‚   â””â”€â”€ performance_YYYYMMDD.json     # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹çµ±è¨ˆ
â””â”€â”€ discord_notifications.log         # Discordé€šçŸ¥ãƒ­ã‚°
```

### **å…±é€šãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼**

**1. JSONçµ±è¨ˆãƒ¬ãƒãƒ¼ãƒˆ**
```json
{
  "execution_stats": {
    "mode": "backtest",
    "period": "2025-03-15 - 2025-09-11",
    "total_cycles": 1080,
    "buy_signals": 45,
    "sell_signals": 42,
    "hold_decisions": 993,
    "processing_time_avg": 0.08
  },
  "strategy_performance": {
    "atr_based": {"signals": 15, "confidence_avg": 0.67},
    "multi_timeframe": {"signals": 12, "confidence_avg": 0.72}
  },
  "ml_performance": {
    "predictions": 1080,
    "buy_probability_avg": 0.34,
    "sell_probability_avg": 0.31,
    "hold_probability_avg": 0.35
  }
}
```

**2. å–å¼•CSVï¼ˆå…±é€šå½¢å¼ï¼‰**
```csv
timestamp,action,price,confidence,strategy_votes,ml_prediction,risk_assessment
2025-09-12T06:00:00,BUY,16904200,0.75,"atr_based:0.8,multi_timeframe:0.7",0.68,ACCEPTABLE
2025-09-12T10:00:00,HOLD,16920000,0.45,"mixed_signals",0.52,LOW_CONFIDENCE
```

## ğŸ“Š åˆ†ææ‰‹æ³•ãƒ»ãƒ„ãƒ¼ãƒ«

### **1. çµ±åˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**

```python
import json
import pandas as pd
from pathlib import Path
from datetime import datetime

def analyze_trading_performance(mode='backtest'):
    """ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰çµæœã®çµ±åˆåˆ†æ"""
    
    if mode == 'backtest':
        report_dir = Path('src/backtest/logs')
        pattern = 'backtest_*.json'
    else:
        report_dir = Path('logs/paper_trading_reports')
        pattern = 'performance_*.json'
    
    # æœ€æ–°ãƒ¬ãƒãƒ¼ãƒˆå–å¾—
    reports = sorted(report_dir.glob(pattern))
    if not reports:
        print(f"{mode}ãƒ¬ãƒãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return
    
    latest = reports[-1]
    with open(latest, 'r', encoding='utf-8') as f:
        data = json.load(f)
    
    print(f"ğŸ“Š {mode.upper()}ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ")
    print(f"ãƒ¬ãƒãƒ¼ãƒˆ: {latest.name}")
    
    if 'execution_stats' in data:
        stats = data['execution_stats']
        print(f"å®Ÿè¡ŒæœŸé–“: {stats.get('period', 'N/A')}")
        print(f"å‡¦ç†ã‚µã‚¤ã‚¯ãƒ«æ•°: {stats.get('total_cycles', 0):,}")
        print(f"BUYã‚·ã‚°ãƒŠãƒ«: {stats.get('buy_signals', 0)}")
        print(f"SELLã‚·ã‚°ãƒŠãƒ«: {stats.get('sell_signals', 0)}")
        print(f"HOLDã‚·ã‚°ãƒŠãƒ«: {stats.get('hold_decisions', 0)}")
        print(f"å¹³å‡å‡¦ç†æ™‚é–“: {stats.get('processing_time_avg', 0):.3f}ç§’")
    
    # æˆ¦ç•¥åˆ¥åˆ†æ
    if 'strategy_performance' in data:
        print("\nğŸ¯ æˆ¦ç•¥åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹")
        for strategy, metrics in data['strategy_performance'].items():
            signals = metrics.get('signals', 0)
            confidence = metrics.get('confidence_avg', 0)
            print(f"{strategy}: {signals}ã‚·ã‚°ãƒŠãƒ«, å¹³å‡ä¿¡é ¼åº¦{confidence:.2f}")

# ä½¿ç”¨ä¾‹
analyze_trading_performance('backtest')
analyze_trading_performance('paper')
```

### **2. æ¯”è¼ƒåˆ†æï¼ˆãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ vs ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼‰**

```python
def compare_backtest_vs_paper():
    """ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¨ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ã®æ¯”è¼ƒåˆ†æ"""
    
    # ãƒ‡ãƒ¼ã‚¿å–å¾—
    def load_latest_results(mode):
        if mode == 'backtest':
            files = sorted(Path('src/backtest/logs').glob('backtest_*.json'))
        else:
            files = sorted(Path('logs/paper_trading_reports').glob('performance_*.json'))
        
        if files:
            with open(files[-1], 'r', encoding='utf-8') as f:
                return json.load(f)
        return None
    
    backtest_data = load_latest_results('backtest')
    paper_data = load_latest_results('paper')
    
    if not backtest_data or not paper_data:
        print("æ¯”è¼ƒç”¨ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™")
        return
    
    print("ğŸ“Š ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ vs ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰æ¯”è¼ƒ")
    print("=" * 50)
    
    # å®Ÿè¡Œçµ±è¨ˆæ¯”è¼ƒ
    bt_stats = backtest_data.get('execution_stats', {})
    pt_stats = paper_data.get('execution_stats', {})
    
    metrics = ['total_cycles', 'buy_signals', 'sell_signals', 'processing_time_avg']
    
    for metric in metrics:
        bt_value = bt_stats.get(metric, 0)
        pt_value = pt_stats.get(metric, 0)
        print(f"{metric}:")
        print(f"  ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ: {bt_value}")
        print(f"  ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰: {pt_value}")
        
        if isinstance(bt_value, (int, float)) and isinstance(pt_value, (int, float)) and bt_value > 0:
            diff_pct = ((pt_value - bt_value) / bt_value) * 100
            print(f"  å·®ç•°: {diff_pct:+.1f}%")
        print()

compare_backtest_vs_paper()
```

### **3. æ™‚ç³»åˆ—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ**

```python
import matplotlib.pyplot as plt
import seaborn as sns

def plot_performance_timeline():
    """æ™‚ç³»åˆ—ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯è¦–åŒ–"""
    
    # ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ­ã‚°åˆ†æ
    log_file = 'logs/crypto_bot.log'
    if not Path(log_file).exists():
        print("ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")
        return
    
    # ãƒ­ã‚°ã‹ã‚‰BUY/SELL/HOLDæ±ºå®šã‚’æŠ½å‡º
    decisions = []
    prices = []
    timestamps = []
    
    with open(log_file, 'r', encoding='utf-8') as f:
        for line in f:
            if 'Final decision:' in line:
                # ãƒ­ã‚°è§£æãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰
                pass
    
    # å¯è¦–åŒ–
    plt.figure(figsize=(15, 10))
    
    # ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆ1: ä¾¡æ ¼ãƒãƒ£ãƒ¼ãƒˆ
    plt.subplot(2, 1, 1)
    plt.plot(timestamps, prices, label='BTCä¾¡æ ¼', linewidth=1)
    plt.title('ä¾¡æ ¼æ¨ç§»ã¨å–å¼•æ±ºå®š')
    plt.ylabel('ä¾¡æ ¼ï¼ˆå††ï¼‰')
    plt.legend()
    plt.grid(True, alpha=0.3)
    
    # ã‚µãƒ–ãƒ—ãƒ­ãƒƒãƒˆ2: æ±ºå®šåˆ†å¸ƒ
    plt.subplot(2, 1, 2)
    decision_counts = pd.Series(decisions).value_counts()
    plt.bar(decision_counts.index, decision_counts.values, 
            color=['green', 'red', 'blue'])
    plt.title('å–å¼•æ±ºå®šåˆ†å¸ƒ')
    plt.ylabel('å›æ•°')
    plt.grid(True, alpha=0.3)
    
    plt.tight_layout()
    plt.show()

plot_performance_timeline()
```

## ğŸ”§ è¨­å®šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### **çµ±åˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (config/core/unified.yaml)**

```yaml
# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å…±é€šè¨­å®š
trading:
  initial_balance: 500000      # åˆæœŸè³‡é‡‘ï¼ˆ50ä¸‡å††ï¼‰
  max_order_size: 0.002        # æœ€å¤§æ³¨æ–‡ã‚µã‚¤ã‚º
  risk_per_trade: 0.01         # 1å–å¼•ãƒªã‚¹ã‚¯ï¼ˆ1%ï¼‰

# ãƒªã‚¹ã‚¯ç®¡ç†
risk_management:
  kelly_max_fraction: 0.03     # KellyåŸºæº–æœ€å¤§ï¼ˆ3%ï¼‰
  max_drawdown: 0.20           # æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ï¼ˆ20%ï¼‰
  consecutive_loss_limit: 5    # é€£ç¶šæå¤±é™ç•Œ

# æˆ¦ç•¥çµ±åˆ
strategies:
  weights:
    atr_based: 0.25           # ATRæˆ¦ç•¥é‡ã¿
    mochipoy_alert: 0.20      # ã‚‚ã¡ã½ã‚ˆæˆ¦ç•¥é‡ã¿
    multi_timeframe: 0.25     # ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ é‡ã¿
    donchian_channel: 0.15    # ãƒ‰ãƒ³ãƒãƒ£ãƒ³ãƒãƒ£ãƒãƒ«é‡ã¿
    adx_trend: 0.15           # ADXãƒˆãƒ¬ãƒ³ãƒ‰é‡ã¿

# ãƒ‡ãƒ¼ã‚¿è¨­å®š
data:
  timeframes: ['4h', '15m']    # ä½¿ç”¨æ™‚é–“è»¸
  lookback_periods:
    fast: 20                   # çŸ­æœŸæœŸé–“
    slow: 50                   # é•·æœŸæœŸé–“
```

### **ãƒ¢ãƒ¼ãƒ‰åˆ¥ã‚«ã‚¹ã‚¿ãƒ è¨­å®š**

**ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå°‚ç”¨è¨­å®š**
```yaml
# config/backtest/custom.yaml
backtest:
  fast_mode: true             # é«˜é€Ÿå®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
  skip_ml_prediction: false   # MLäºˆæ¸¬ã‚¹ã‚­ãƒƒãƒ—ï¼ˆfalse=å®Ÿè¡Œï¼‰
  detailed_logging: true      # è©³ç´°ãƒ­ã‚°æœ‰åŠ¹

data:
  csv_cache: true            # CSVã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹
  validation: true           # ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
```

**ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å°‚ç”¨è¨­å®š**
```yaml
# config/paper/custom.yaml  
paper_trading:
  real_time_mode: true       # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å®Ÿè¡Œ
  api_timeout: 30            # API ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
  notification_level: 'INFO' # Discordé€šçŸ¥ãƒ¬ãƒ™ãƒ«

monitoring:
  heartbeat_interval: 300    # ç”Ÿå­˜ç¢ºèªé–“éš”ï¼ˆ5åˆ†ï¼‰
  error_notification: true   # ã‚¨ãƒ©ãƒ¼æ™‚é€šçŸ¥æœ‰åŠ¹
```

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆé–¢é€£**

**1. CSVãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ©ãƒ¼**
```bash
# ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
python -c "
from src.backtest.data.csv_data_loader import get_csv_loader
loader = get_csv_loader()
result_4h = loader.validate_data_integrity('BTC/JPY', '4h')
result_15m = loader.validate_data_integrity('BTC/JPY', '15m')
print('4hæ•´åˆæ€§:', result_4h)
print('15mæ•´åˆæ€§:', result_15m)
"

# ãƒ‡ãƒ¼ã‚¿å†åé›†
python src/backtest/scripts/collect_historical_csv.py --match-4h
```

**2. ãƒ¡ãƒ¢ãƒªä¸è¶³**
```bash
# ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºç¢ºèª
du -h src/backtest/data/historical/

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
python -c "
from src.backtest.data.csv_data_loader import get_csv_loader
get_csv_loader().clear_cache()
print('ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢å®Œäº†')
"
```

### **ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰é–¢é€£**

**1. APIæ¥ç¶šã‚¨ãƒ©ãƒ¼**
```bash
# Bitbank APIæ¥ç¶šãƒ†ã‚¹ãƒˆ
python -c "
import asyncio, sys; sys.path.insert(0, '.')
from src.data.bitbank_client import BitbankClient

async def test_api():
    client = BitbankClient()
    ticker = await client.fetch_ticker('BTC/JPY')
    print(f'ç¾åœ¨ä¾¡æ ¼: {ticker[\"last\"]:,}å††')
    print('APIæ¥ç¶š: OK')

asyncio.run(test_api())
"
```

**2. Discordé€šçŸ¥ã‚¨ãƒ©ãƒ¼**
```bash
# Discordè¨­å®šç¢ºèª
python -c "
import os, asyncio, sys; sys.path.insert(0, '.')
from src.monitoring.discord_notifier import DiscordNotifier

webhook = os.getenv('DISCORD_WEBHOOK_URL')
print('Discord Webhook:', 'ã‚ã‚Š' if webhook else 'ãªã—')

if webhook:
    async def test_discord():
        notifier = DiscordNotifier()
        await notifier.send_info_notification('ğŸ”§ ãƒ†ã‚¹ãƒˆé€šçŸ¥', 'Discordæ¥ç¶šç¢ºèª')
    asyncio.run(test_discord())
"
```

**3. ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†**
```bash
# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ ãƒ—ãƒ­ã‚»ã‚¹ç¢ºèª
ps aux | grep "main.py --mode paper"

# å®‰å…¨åœæ­¢
pkill -f "main.py --mode paper"

# ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œç¢ºèª
jobs -l | grep python
```

## ğŸ“Š ç¶™ç¶šçš„æ”¹å–„ãƒ»ç›£è¦–

### **å®šæœŸå®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**

```bash
# crontab è¨­å®šä¾‹
# æ¯æ—¥åˆå‰6æ™‚: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
0 6 * * * cd /path/to/bot && python main.py --mode backtest

# é€±æ¬¡: ãƒ‡ãƒ¼ã‚¿æ›´æ–°ãƒ»é•·æœŸãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
0 0 * * 0 cd /path/to/bot && python src/backtest/scripts/collect_historical_csv.py --days 180 && python main.py --mode backtest

# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰: 24æ™‚é–“ç›£è¦–ï¼ˆå†èµ·å‹•ä»˜ãï¼‰
*/30 * * * * pgrep -f "main.py --mode paper" || (cd /path/to/bot && nohup python main.py --mode paper &)
```

### **ç›£è¦–æŒ‡æ¨™ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ**

```python
def monitoring_dashboard():
    """çµ±åˆç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"""
    
    print("ğŸ–¥ï¸  AIè‡ªå‹•å–å¼•ã‚·ã‚¹ãƒ†ãƒ ç›£è¦–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")
    print("=" * 60)
    
    # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ€æ–°çµæœ
    bt_files = sorted(Path('src/backtest/logs').glob('backtest_*.json'))
    if bt_files:
        with open(bt_files[-1]) as f:
            bt_data = json.load(f)
        
        bt_stats = bt_data.get('execution_stats', {})
        print(f"ğŸ“Š ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ€æ–°çµæœ ({bt_files[-1].name})")
        print(f"  æœŸé–“: {bt_stats.get('period', 'N/A')}")
        print(f"  BUY/SELLæ¯”ç‡: {bt_stats.get('buy_signals', 0)}/{bt_stats.get('sell_signals', 0)}")
    
    # ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰çŠ¶æ³
    paper_files = sorted(Path('logs/paper_trading_reports').glob('performance_*.json'))
    if paper_files:
        print(f"\nğŸ’¹ ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰æœ€æ–°çŠ¶æ³ ({paper_files[-1].name})")
        # è©³ç´°åˆ†æãƒ­ã‚¸ãƒƒã‚¯
    
    # ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹
    print(f"\nğŸ¥ ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹")
    print(f"  CSVãƒ‡ãƒ¼ã‚¿: {Path('src/backtest/data/historical/BTC_JPY_4h.csv').exists()}")
    print(f"  MLãƒ¢ãƒ‡ãƒ«: {Path('models/production/production_ensemble.pkl').exists()}")
    print(f"  Discordè¨­å®š: {'DISCORD_WEBHOOK_URL' in os.environ}")

# æ¯æ—¥å®Ÿè¡Œ
monitoring_dashboard()
```

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„æŒ‡æ¨™**

**é‡è¦æŒ‡æ¨™ï¼ˆç›®æ¨™å€¤ï¼‰**
1. **å‡¦ç†é€Ÿåº¦**: å¹³å‡0.1ç§’ä»¥å†…/ã‚µã‚¤ã‚¯ãƒ«
2. **ã‚·ã‚°ãƒŠãƒ«ç²¾åº¦**: BUY/SELLä¿¡é ¼åº¦0.6ä»¥ä¸Š
3. **æˆ¦ç•¥ãƒãƒ©ãƒ³ã‚¹**: 5æˆ¦ç•¥ã®ä¿¡é ¼åº¦åˆ†æ•£0.2ä»¥å†…
4. **MLäºˆæ¸¬ç²¾åº¦**: 3ã‚¯ãƒ©ã‚¹äºˆæ¸¬ç²¾åº¦50%ä»¥ä¸Š
5. **ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡**: 99%ä»¥ä¸Šï¼ˆãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼‰

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ ](../../src/backtest/README.md)**: Phase 21å¯¾å¿œãƒ»CSVå‡¦ç†ãƒ»å›ºå®šãƒ•ã‚¡ã‚¤ãƒ«å
- **[æˆ¦ç•¥ã‚·ã‚¹ãƒ†ãƒ ](../../src/strategies/README.md)**: 5æˆ¦ç•¥çµ±åˆãƒ»å‹•çš„ä¿¡é ¼åº¦è¨ˆç®—
- **[å–å¼•ã‚·ã‚¹ãƒ†ãƒ ](../../src/trading/README.md)**: ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»KellyåŸºæº–ãƒ»ç•°å¸¸æ¤œçŸ¥
- **[ML ã‚·ã‚¹ãƒ†ãƒ ](../../src/ml/README.md)**: 3ãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ»é€±æ¬¡è‡ªå‹•å­¦ç¿’
- **[é–‹ç™ºã‚¬ã‚¤ãƒ‰](../../CLAUDE.md)**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãƒ»625ãƒ†ã‚¹ãƒˆãƒ»CI/CD

---

**çµ±åˆå®Ÿè¡Œã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆæˆ¦ç•¥æ¤œè¨¼ï¼‰ãƒ»ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼ˆæœ¬ç•ªå‰æ¤œè¨¼ï¼‰ãƒ»ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰ï¼ˆå®Ÿé‹ç”¨ï¼‰ãŒå®Œå…¨åŒä¸€ãƒ­ã‚¸ãƒƒã‚¯ã§å‹•ä½œã€‚15ç‰¹å¾´é‡ãƒ»5æˆ¦ç•¥ãƒ»å‹•çš„ä¿¡é ¼åº¦ãƒ»MLäºˆæ¸¬ã«ã‚ˆã‚‹åŒ…æ‹¬çš„å–å¼•åˆ¤æ–­ã‚·ã‚¹ãƒ†ãƒ  ğŸš€