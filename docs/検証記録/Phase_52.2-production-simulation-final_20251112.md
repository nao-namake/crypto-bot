# Phase 52.2-production-simulation-final バックテスト記録

**Phase 52.4**

**実施日**: 2025年11月12日

**注**: 特徴量数・戦略数・システム設定は`config/core/feature_order.json`・`config/core/strategies.yaml`・`config/core/thresholds.yaml`を参照

---

## 実施目的

Phase 52.2-production-simulation-final実装の効果検証を目的としたバックテスト実行。
BTC/JPY 15分足データを使用し、本番環境と同一ロジックで検証。

---

## 実行概要

- **バックテスト期間**: 2025/05/16 ~ 2025/11/12 (0日間)
- **データソース**: CSV (15分足 + 4時間足)
- **初期残高**: ¥100,000
- **取引ペア**: BTC/JPY
- **レバレッジ**: 1.0倍

---

## 設定値

### TP/SL設定

レジーム別動的TP/SL設定（Phase 52.0実装）:

| レジーム | TP | SL | 適用ケース |
|----------|----|----|-----------|
| tight_range | 0.8% | 0.6% | レンジ相場（狭い値動き） |
| normal_range | 1.0% | 0.7% | 通常相場 |
| trending | 1.5% | 1.0% | トレンド相場 |

### レジーム別エントリー制限

- tight_range: 最大1ポジション（Phase 51.8実装）
- normal_range: 最大2ポジション
- trending: 最大3ポジション

### ML統合設定

- アンサンブルモデル: LightGBM (50%) + XGBoost (30%) + RandomForest (20%)
- 最小信頼度閾値: 0.45
- 高信頼度閾値: 0.60

---

## エントリー統計

- **総エントリー数**: 717件
- **勝ちトレード**: 356件
- **負けトレード**: 361件
- **勝率**: 49.7%

---

## レジーム別パフォーマンス（Phase 51.8-J4-G）

| レジーム | エントリー数 | 勝率 | 平均損益/取引 | 総損益 |
|---------|------------|------|-------------|--------|
| レンジ（狭） | 704件 | 49.9% | ¥+2 | ¥+1,161 |
| レンジ（通常） | 13件 | 38.5% | ¥-1 | ¥-19 |


---

## パフォーマンス指標

### 損益サマリー

- **総損益**: ¥+1,142
- **総利益**: ¥+5,426
- **総損失**: ¥-4,284
- **平均損益/取引**: ¥+2

### リスク指標

- **最大ドローダウン**: ¥367 (60.73%)
- **プロフィットファクター**: 1.27
- **平均勝ちトレード**: ¥+15
- **平均負けトレード**: ¥-12

### 取引品質

- **勝率**: 49.7%
- **リスクリワード比**: 1.28:1 (平均)

---

## 結論

### 総合評価: 収益性あり

- **プロフィットファクター 1.27**: 良好
- **勝率 49.7%**: 中程度
- **最大DD 60.73%**: 要注意

### レジーム別評価

最も収益性が高いレジーム: **レンジ（狭）** (平均¥+2/取引)

### Phase 52.0実装効果

レジーム別動的TP/SL調整の効果を検証。

- tight_rangeでのTP 0.8%/SL 0.6%設定による早期利確・損切り
- trendingでのTP 1.5%/SL 1.0%設定によるトレンドフォロー

---

## 関連ファイル

### 設定ファイル
- `config/core/feature_order.json`: 特徴量定義（Single Source of Truth）
- `config/core/strategies.yaml`: 戦略定義（Single Source of Truth）
- `config/core/thresholds.yaml`: TP/SL設定・ML統合設定

### 開発履歴
- `docs/開発履歴/Phase_52.md`: Phase 52実装詳細

### バックテストシステム
- `src/backtest/`: バックテスト実装
- `logs/backtest/`: バックテストログ

---

**作成日**: 2025年11月12日（Phase 52.4更新: 2025年11月15日）
**作成者**: Claude Code
**タグ**: Phase 52.2, バックテスト, 本番シミュレーション
