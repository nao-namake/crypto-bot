# tests/ - ãƒ†ã‚¹ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**Phase 13å®Œäº†**: sklearnè­¦å‘Šè§£æ¶ˆãƒ»306ãƒ†ã‚¹ãƒˆ100%æˆåŠŸãƒ»å“è³ªä¿è¨¼å®Œæˆã€‚ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®å“è³ªä¿è¨¼ã‚’æ‹…å½“ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚æ®µéšçš„é–‹ç™ºã«å¯¾å¿œã—ãŸãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ»CI/CDæœ¬ç•ªç¨¼åƒãƒ»å“è³ªã‚²ãƒ¼ãƒˆã‚’æ¡ç”¨ã—ã€306ãƒ†ã‚¹ãƒˆ100%ãƒ»58.88%ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’é”æˆã—ã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
tests/
â”œâ”€â”€ manual/            # æ‰‹å‹•ãƒ†ã‚¹ãƒˆãƒ»é–‹ç™ºç”¨ãƒ†ã‚¹ãƒˆ âœ… å®Ÿè£…æ¸ˆã¿
â”‚   â”œâ”€â”€ test_phase2_components.py     # Phase 2ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆï¼ˆ5ç¨®é¡ãƒ»100%åˆæ ¼ï¼‰
â”‚   â””â”€â”€ README.md                     # æ‰‹å‹•ãƒ†ã‚¹ãƒˆèª¬æ˜ âœ…
â”œâ”€â”€ unit/             # å˜ä½“ãƒ†ã‚¹ãƒˆ âœ… Phase 13å®Œäº†ï¼ˆ306ãƒ†ã‚¹ãƒˆ100%ãƒ»58.88%ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»CI/CDæœ¬ç•ªç¨¼åƒï¼‰
â”‚   â”œâ”€â”€ strategies/   # æˆ¦ç•¥ãƒ†ã‚¹ãƒˆï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»CI/CDæœ¬ç•ªç¨¼åƒï¼‰
â”‚   â”‚   â”œâ”€â”€ implementations/  # æˆ¦ç•¥å®Ÿè£…ãƒ†ã‚¹ãƒˆï¼ˆ62ãƒ†ã‚¹ãƒˆï¼‰
â”‚   â”‚   â”œâ”€â”€ utils/           # å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆ33ãƒ†ã‚¹ãƒˆï¼‰
â”‚   â”‚   â””â”€â”€ base/            # æˆ¦ç•¥åŸºç›¤ãƒ†ã‚¹ãƒˆï¼ˆ18ãƒ†ã‚¹ãƒˆï¼‰
â”‚   â”œâ”€â”€ ml/           # æ©Ÿæ¢°å­¦ç¿’ãƒ†ã‚¹ãƒˆï¼ˆ89ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»sklearnè­¦å‘Šè§£æ¶ˆï¼‰
â”‚   â”‚   â”œâ”€â”€ models/          # å€‹åˆ¥ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ ensemble/        # ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ README.md        # MLãƒ†ã‚¹ãƒˆè©³ç´° âœ…
â”‚   â”œâ”€â”€ backtest/     # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ†ã‚¹ãƒˆï¼ˆ84ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰âœ… Phase 13å®Œäº†
â”‚   â”‚   â”œâ”€â”€ test_engine.py          # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_evaluator.py       # è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_data_loader.py     # ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_reporter.py        # ãƒ¬ãƒãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ README.md               # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ†ã‚¹ãƒˆè©³ç´° âœ…
â”‚   â”œâ”€â”€ trading/      # å–å¼•å®Ÿè¡Œãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ãƒ†ã‚¹ãƒˆï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»Phase 13å®Œäº†ï¼‰
â”‚   â”‚   â”œâ”€â”€ test_risk.py            # ãƒªã‚¹ã‚¯ç®¡ç†ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_position_sizing.py # ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚¸ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_drawdown_manager.py # ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ç®¡ç†ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”œâ”€â”€ test_anomaly_detector.py # ç•°å¸¸æ¤œçŸ¥ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ README.md               # å–å¼•ãƒ†ã‚¹ãƒˆè©³ç´° âœ…
â”‚   â”œâ”€â”€ core/         # åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆï¼ˆPhase 13å®Œäº†ï¼‰
â”‚   â”œâ”€â”€ data/         # ãƒ‡ãƒ¼ã‚¿å±¤ãƒ†ã‚¹ãƒˆï¼ˆPhase 13å®Œäº†ï¼‰
â”‚   â””â”€â”€ features/     # ç‰¹å¾´é‡ãƒ†ã‚¹ãƒˆï¼ˆPhase 13å®Œäº†ï¼‰
â”œâ”€â”€ integration/      # çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆPhase 8äºˆå®šï¼‰
â”‚   â”œâ”€â”€ api/          # APIçµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ pipeline/     # ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ e2e/          # ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ
â””â”€â”€ performance/      # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆPhase 8äºˆå®šï¼‰
    â”œâ”€â”€ load/         # è² è·ãƒ†ã‚¹ãƒˆ
    â””â”€â”€ memory/       # ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ãƒ†ã‚¹ãƒˆ
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### Phaseåˆ¥ãƒ†ã‚¹ãƒˆæ–¹é‡

**Phase 1-2å®Œäº†**: æ‰‹å‹•ãƒ†ã‚¹ãƒˆä¸­å¿ƒ
- âœ… åŸºç›¤ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œç¢ºèª
- âœ… APIæ¥ç¶šãƒ†ã‚¹ãƒˆï¼ˆèªè¨¼ä¸è¦ã®å…¬é–‹APIï¼‰
- âœ… åŸºæœ¬æ©Ÿèƒ½æ¤œè¨¼ï¼ˆ5ç¨®é¡ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰

**Phase 3-11å®Œäº†**: æˆ¦ç•¥ãƒ»MLãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»å–å¼•å®Ÿè¡Œå˜ä½“ãƒ†ã‚¹ãƒˆãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–
- âœ… æˆ¦ç•¥ã‚·ã‚¹ãƒ†ãƒ å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ï¼‰
- âœ… MLå±¤å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ89ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»ç›£è¦–çµ±åˆï¼‰
- âœ… ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ84ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»CI/CDå¯¾å¿œï¼‰
- âœ… å–å¼•å®Ÿè¡Œãƒ»ãƒªã‚¹ã‚¯ç®¡ç†å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»Phase 12å®Œäº†ï¼‰
- âœ… ãƒ¢ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ–æ´»ç”¨ãƒ»åŒ…æ‹¬çš„å“è³ªç®¡ç†ãƒ»GitHub Actionsçµ±åˆ

**Phase 6-7**: å®Ÿè¡Œãƒ»çµ±åˆãƒ†ã‚¹ãƒˆè¿½åŠ 
- ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»å–å¼•å®Ÿè¡Œã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- APIçµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…
- ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

**Phase 8**: åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ
- çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè£…
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ¤œè¨¼

### ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«

1. **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ**: é–‹ç™ºæ™‚ã®å‹•ä½œç¢ºèª
2. **å˜ä½“ãƒ†ã‚¹ãƒˆ**: å€‹åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
3. **çµ±åˆãƒ†ã‚¹ãƒˆ**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é–“é€£æºãƒ†ã‚¹ãƒˆ
4. **E2Eãƒ†ã‚¹ãƒˆ**: å…¨ä½“ãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆ

## ğŸ“Š ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆçŠ¶æ³

### âœ… å®Ÿè£…æ¸ˆã¿ï¼ˆPhase 1-5å®Œäº†ï¼‰

**manual/test_phase2_components.py**ï¼ˆ5ç¨®é¡ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰:
- âœ… è¨­å®šã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆï¼ˆConfigãƒ»ç’°å¢ƒå¤‰æ•°ãƒ»YAMLèª­ã¿è¾¼ã¿ï¼‰
- âœ… BitbankClientåŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆå…¬é–‹APIæ¥ç¶šãƒ»å¸‚å ´æƒ…å ±å–å¾—ï¼‰
- âœ… DataPipelineæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆOHLCVå–å¾—ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥é€£æºï¼‰
- âœ… DataCacheæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆï¼ˆãƒ¡ãƒ¢ãƒªãƒ»ãƒ‡ã‚£ã‚¹ã‚¯æ°¸ç¶šåŒ–ï¼‰
- âœ… çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆç°¡æ˜“APIãƒ»ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ï¼‰

**unit/strategies/**ï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰:
- âœ… æˆ¦ç•¥å®Ÿè£…ãƒ†ã‚¹ãƒˆï¼ˆ62ãƒ†ã‚¹ãƒˆï¼‰: ATRãƒ»ã‚‚ã¡ã½ã‚ˆãƒ»ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»ãƒ•ã‚£ãƒœãƒŠãƒƒãƒ
- âœ… å…±é€šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ†ã‚¹ãƒˆï¼ˆ33ãƒ†ã‚¹ãƒˆï¼‰: RiskManagerãƒ»SignalBuilderãƒ»constants
- âœ… æˆ¦ç•¥åŸºç›¤ãƒ†ã‚¹ãƒˆï¼ˆ18ãƒ†ã‚¹ãƒˆï¼‰: StrategyBaseãƒ»StrategyManager

**unit/ml/**ï¼ˆ89ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰:
- âœ… å€‹åˆ¥ãƒ¢ãƒ‡ãƒ«ãƒ†ã‚¹ãƒˆ: LightGBMãƒ»XGBoostãƒ»RandomForest
- âœ… ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ†ã‚¹ãƒˆ: é‡ã¿ä»˜ã‘æŠ•ç¥¨ãƒ»ä¿¡é ¼åº¦é–¾å€¤ãƒ»ãƒ¢ãƒ‡ãƒ«ç®¡ç†
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆãƒ»MLçµ±è¨ˆæ¤œè¨¼

**unit/backtest/**ï¼ˆ84ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰âœ… Phase 12 CI/CDå¯¾å¿œ:
- âœ… ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³ãƒ†ã‚¹ãƒˆ: ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ãƒ»å–å¼•å®Ÿè¡Œãƒ»æ€§èƒ½æœ€é©åŒ–ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–
- âœ… è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ: ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³è¨ˆç®—ãƒ»çµ±è¨ˆæŒ‡æ¨™ãƒ»ãƒªã‚¹ã‚¯è©•ä¾¡ãƒ»å“è³ªã‚²ãƒ¼ãƒˆ
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ†ã‚¹ãƒˆ: 6ãƒ¶æœˆãƒ‡ãƒ¼ã‚¿ãƒ»å“è³ªç®¡ç†ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹ç‡ãƒ»GitHub Actionså¯¾å¿œ
- âœ… ãƒ¬ãƒãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ: CSV/JSON/Discordå‡ºåŠ›ãƒ»çµ±åˆæ©Ÿèƒ½ãƒ»ç›£è¦–çµ±åˆ

**unit/trading/**ï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰âœ… Phase 13å®Œäº†:
- âœ… ãƒªã‚¹ã‚¯ç®¡ç†ãƒ†ã‚¹ãƒˆ: KellyåŸºæº–ãƒ»ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³åˆ¶å¾¡ãƒ»ç•°å¸¸æ¤œçŸ¥ãƒ»CI/CDæœ¬ç•ªç¨¼åƒ
- âœ… ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚¸ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ: å‹•çš„èª¿æ•´ãƒ»å®‰å…¨ä¿‚æ•°ãƒ»ãƒªã‚¹ã‚¯åˆ¶é™ãƒ»å“è³ªä¿è¨¼
- âœ… å–å¼•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ: ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ»æ³¨æ–‡ç®¡ç†ãƒ»ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ç›£è¦–ãƒ»GitHub Actionså¯¾å¿œ
- âœ… çµ±åˆãƒªã‚¹ã‚¯è©•ä¾¡ãƒ†ã‚¹ãƒˆ: 3æ®µéšåˆ¤å®šãƒ»æ‰¿èªåˆ¶å¾¡ãƒ»Discordé€šçŸ¥ãƒ»å“è³ªã‚²ãƒ¼ãƒˆ

### ğŸ“‹ æœªå®Ÿè£…ï¼ˆPhase 6-8è¨ˆç”»ï¼‰

**å˜ä½“ãƒ†ã‚¹ãƒˆ** (ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸: 80%):
```
unit/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ test_config.py      # è¨­å®šç®¡ç†ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_logger.py      # ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test_exceptions.py  # ä¾‹å¤–å‡¦ç†ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ test_bitbank_client.py  # Bitbank APIãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ test_data_pipeline.py   # ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ test_data_cache.py      # ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
â””â”€â”€ [ãã®ä»–Phaseå®Ÿè£…æ™‚ã«è¿½åŠ ]
```

**çµ±åˆãƒ†ã‚¹ãƒˆ**:
```
integration/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ test_bitbank_integration.py    # Bitbank APIçµ±åˆ
â”œâ”€â”€ pipeline/
â”‚   â””â”€â”€ test_data_flow.py               # ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
â””â”€â”€ e2e/
    â””â”€â”€ test_trading_workflow.py       # å–å¼•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
```

## ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### Phase 1-5å®Ÿè£…æ¸ˆã¿ãƒ†ã‚¹ãƒˆ

```bash
# Phase 2æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆ5ç¨®é¡ãƒ»100%åˆæ ¼ï¼‰
cd /Users/nao/Desktop/bot
python tests/manual/test_phase2_components.py

# Phase 3-4æˆ¦ç•¥ãƒ†ã‚¹ãƒˆï¼ˆ113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰
python -m pytest tests/unit/strategies/ -v

# Phase 5-8 MLãƒ†ã‚¹ãƒˆï¼ˆ89ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰
python -m pytest tests/unit/ml/ -v

# Phase 8 ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ†ã‚¹ãƒˆï¼ˆ84ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰
python -m pytest tests/unit/backtest/ -v

# å…¨å®Ÿè£…æ¸ˆã¿ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ438ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ï¼‰
python tests/manual/test_phase2_components.py && python -m pytest tests/unit/strategies/ tests/unit/ml/ tests/unit/backtest/ -v

# å€‹åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå‹•ä½œç¢ºèª
python -c "from src.core.config import Config; print('âœ… è¨­å®šOK')"
python -c "from src.data.bitbank_client import BitbankClient; print('âœ… BitbankClient OK')"
python -c "from src.strategies.implementations.atr_based import ATRBasedStrategy; print('âœ… ATRæˆ¦ç•¥OK')"
python -c "from src.ml.ensemble.ensemble_model import EnsembleModel; print('âœ… MLã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«OK')"
python -c "from src.backtest.engine import BacktestEngine; print('âœ… ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ã‚¸ãƒ³OK')"
```

### å°†æ¥ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆï¼ˆPhase 8ï¼‰

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest

# å˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿
pytest tests/unit/

# çµ±åˆãƒ†ã‚¹ãƒˆã®ã¿
pytest tests/integration/

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãå®Ÿè¡Œ
pytest --cov=src --cov-report=html

# ç‰¹å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã¿
pytest tests/unit/data/test_bitbank_client.py
```

## ğŸ”§ ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š

### å¿…è¦ãªä¾å­˜é–¢ä¿‚

```bash
# ãƒ†ã‚¹ãƒˆç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆPhase 8ã§è¿½åŠ äºˆå®šï¼‰
pip install pytest pytest-cov pytest-mock

# ç¾åœ¨ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆã¯æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã¿ä½¿ç”¨
```

### ç’°å¢ƒå¤‰æ•°ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

```bash
# APIèªè¨¼æƒ…å ±ï¼ˆå®Ÿéš›ã®ãƒ†ã‚¹ãƒˆã§ã¯ä¸è¦ï¼‰
export BITBANK_API_KEY=test_key
export BITBANK_API_SECRET=test_secret

# ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰
export TEST_MODE=1
```

### ãƒ¢ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ–æˆ¦ç•¥

**å¤–éƒ¨API**: Bitbank APIã¯ãƒ¢ãƒƒã‚¯åŒ–
```python
# ä¾‹: Bitbank APIãƒ¢ãƒƒã‚¯
@pytest.fixture
def mock_bitbank():
    with patch('ccxt.bitbank') as mock:
        mock.return_value.fetch_ticker.return_value = {
            'last': 12345678, 'bid': 12345000, 'ask': 12346000
        }
        yield mock
```

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªDBä½¿ç”¨
**ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ **: ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½¿ç”¨

## ğŸ“ˆ å“è³ªæŒ‡æ¨™

### Phase 12ï¼ˆå®Œäº†ï¼‰
- **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ**: 5ç¨®é¡å®Ÿè£…æ¸ˆã¿ãƒ»100%åˆæ ¼ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–
- **æˆ¦ç•¥å˜ä½“ãƒ†ã‚¹ãƒˆ**: 113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»0.44ç§’é«˜é€Ÿå®Ÿè¡Œãƒ»GitHub Actionså¯¾å¿œ
- **MLå˜ä½“ãƒ†ã‚¹ãƒˆ**: 89ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»ç›£è¦–çµ±åˆãƒ»Phase 12æœ€é©åŒ–å®Œäº†
- **ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå˜ä½“ãƒ†ã‚¹ãƒˆ**: 84ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»CI/CDå¯¾å¿œãƒ»å“è³ªã‚²ãƒ¼ãƒˆ
- **å–å¼•å®Ÿè¡Œå˜ä½“ãƒ†ã‚¹ãƒˆ**: 113ãƒ†ã‚¹ãƒˆãƒ»100%åˆæ ¼ãƒ»Phase 12æ–°è¦å®Ÿè£…ãƒ»ç›£è¦–çµ±åˆ
- **åˆæ ¼åŸºæº–**: å…¨438ãƒ†ã‚¹ãƒˆé€šéãƒ»68.13%å“è³ªä¿è¨¼ãƒ»CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–

### Phase 6-8ï¼ˆç›®æ¨™ï¼‰
- **å…¨ä½“ã‚«ãƒãƒ¬ãƒƒã‚¸**: 80%ä»¥ä¸Š
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ç¶²ç¾…
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: å‡¦ç†æ™‚é–“1ç§’ä»¥å†…
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: æœ€å¤§2GBä»¥å†…

### ç¶™ç¶šçš„å“è³ªç®¡ç†ï¼ˆPhase 12 CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–ï¼‰
- **æ¯ã‚³ãƒŸãƒƒãƒˆ**: å®Ÿè£…æ¸ˆã¿ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆæ‰‹å‹•ãƒ»æˆ¦ç•¥ãƒ»MLãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆãƒ»å–å¼•å®Ÿè¡Œï¼‰ãƒ»GitHub Actionsè‡ªå‹•å®Ÿè¡Œ
- **æ¯ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: å…¨438ãƒ†ã‚¹ãƒˆé€šéãƒ»68.13%å“è³ªä¿è¨¼ãƒ»CI/CDå“è³ªã‚²ãƒ¼ãƒˆãƒ»è‡ªå‹•ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **æ¯ãƒªãƒªãƒ¼ã‚¹**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆãƒ»ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ¤œè¨¼ãƒ»çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æ®µéšçš„ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»æ‰‹å‹•å®Ÿè¡Œç›£è¦–

## ğŸ§© ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç®¡ç†

### ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æˆ¦ç•¥

**æœ¬ç‰©APIä¸è¦**: å…¬é–‹APIã®ã¿ä½¿ç”¨
```python
# å®Ÿéš›ã®BTC/JPYä¾¡æ ¼ã‚’å–å¾—ã—ã¦ãƒ†ã‚¹ãƒˆ
ticker = client.fetch_ticker('BTC/JPY')
assert ticker['last'] > 0
```

**ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿**: äºˆæ¸¬å¯èƒ½ãªãƒ‡ãƒ¼ã‚¿
```python
# OHLCVå½¢å¼ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
mock_ohlcv = [
    [1692000000000, 12340000, 12350000, 12330000, 12345000, 1.5],
    [1692003600000, 12345000, 12355000, 12340000, 12350000, 2.1],
    # ...
]
```

### ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

```python
# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆPhase 8ã§å®Ÿè£…äºˆå®šï¼‰
def generate_ohlcv_data(count=100, base_price=12000000):
    """ãƒ†ã‚¹ãƒˆç”¨OHLCV ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ"""
    
def generate_market_scenarios():
    """å¸‚å ´ã‚·ãƒŠãƒªã‚ª ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ"""
```

## ğŸ” ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

**ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼**:
```bash
# Pythonãƒ‘ã‚¹ã®ç¢ºèª
export PYTHONPATH=/Users/nao/Desktop/bot:$PYTHONPATH

# ã¾ãŸã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰å®Ÿè¡Œ
cd /Users/nao/Desktop/bot
python tests/manual/test_phase2_components.py
```

**APIæ¥ç¶šã‚¨ãƒ©ãƒ¼**:
```bash
# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šç¢ºèª
curl https://api.bitbank.cc/v1/ticker/btc_jpy

# DNSç¢ºèª
nslookup api.bitbank.cc
```

**ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æœªå®Ÿè£…ã‚¨ãƒ©ãƒ¼**:
```bash
# å®Ÿè£…çŠ¶æ³ç¢ºèª
ls -la src/data/
ls -la src/core/
```

### ãƒ­ã‚°ç¢ºèª

```python
# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«èª¿æ•´
import logging
logging.getLogger('src').setLevel(logging.DEBUG)

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python tests/manual/test_phase2_components.py
```

## ğŸ“ ãƒ†ã‚¹ãƒˆä½œæˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### æ–°ã—ã„ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

1. **æ‰‹å‹•ãƒ†ã‚¹ãƒˆ** (Phase 2-7):
```python
def test_new_feature():
    """æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ"""
    try:
        # ãƒ†ã‚¹ãƒˆå®Ÿè£…
        result = new_feature()
        print("âœ… æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆæˆåŠŸ")
        return True
    except Exception as e:
        print(f"âŒ æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: {e}")
        return False
```

2. **å˜ä½“ãƒ†ã‚¹ãƒˆ** (Phase 8):
```python
import pytest
from src.module import Function

def test_function_success():
    """æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ"""
    result = Function.method("valid_input")
    assert result == expected_value

def test_function_error():
    """ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆ"""
    with pytest.raises(CustomException):
        Function.method("invalid_input")
```

### ãƒ†ã‚¹ãƒˆå‘½åè¦å‰‡

- **ãƒ•ã‚¡ã‚¤ãƒ«å**: `test_*.py`
- **é–¢æ•°å**: `test_*`
- **ã‚¯ãƒ©ã‚¹å**: `Test*`
- **èª¬æ˜**: æ—¥æœ¬èªdocstringæ¨å¥¨

### ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³æŒ‡é‡

- **æ˜ç¢ºãªæœŸå¾…å€¤**: å…·ä½“çš„ãªå€¤ã‚’æ¤œè¨¼
- **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹**: é©åˆ‡ãªä¾‹å¤–ã®ç™ºç”Ÿã‚’ç¢ºèª
- **å¢ƒç•Œå€¤**: æœ€å°ãƒ»æœ€å¤§å€¤ã§ã®ãƒ†ã‚¹ãƒˆ
- **å‹ãƒã‚§ãƒƒã‚¯**: æˆ»ã‚Šå€¤ã®å‹ã‚’ç¢ºèª

## ğŸš€ ä»Šå¾Œã®äºˆå®š

### Phase 3é–‹å§‹æ™‚
- ç‰¹å¾´é‡ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã®æ‰‹å‹•ãƒ†ã‚¹ãƒˆè¿½åŠ 

### Phase 8å®Ÿè£…æ™‚
- pytestç’°å¢ƒæ§‹ç¯‰
- å…¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè£…
- çµ±åˆãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰
- CI/CDãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–

---

*æ®µéšçš„é–‹ç™ºã«å¯¾å¿œã—ãŸæŸ”è»Ÿãªãƒ†ã‚¹ãƒˆæˆ¦ç•¥*