{
  "timestamp": "2025-08-13T06:55:38.588982",
  "phases": {
    "phase1": {
      "phase_name": "ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»åŸºç›¤ç¢ºèª",
      "weight": 25,
      "checks": {
        "gcp_cloud_run_status": {
          "status": "healthy",
          "active_revision": "crypto-bot-service-prod-00044-8z5",
          "latest_revision": "crypto-bot-service-prod-00044-8z5",
          "revision_switch_ok": true,
          "revision_age_hours": 0.03023604833333333,
          "service_url": "https://crypto-bot-service-prod-lufv3saz7q-an.a.run.app",
          "details": "Active: crypto-bot-service-prod-00044-8z5, Age: 0.0h"
        },
        "api_connectivity": {
          "status": "healthy",
          "checks": {
            "basic_health": {
              "status": "healthy",
              "mode": "live",
              "details": "HTTP 200, Mode: live"
            },
            "detailed_health": {
              "status": "healthy",
              "api_auth": true,
              "margin_mode": true,
              "trading_status": "warning",
              "details": "Auth: True, Margin: True"
            },
            "response_time": 0.19872093200683594
          },
          "details": "Response time: 0.20s"
        },
        "system_health": {
          "status": "degraded",
          "error": "Health check script failed",
          "return_code": 1,
          "stderr": "",
          "details": "Exit code: 1"
        },
        "resource_usage": {
          "status": "unknown",
          "memory": {
            "status": "unknown",
            "details": "No memory info available"
          },
          "cpu": {
            "status": "unknown",
            "details": "CPU metrics not available"
          },
          "details": "No memory info available"
        }
      },
      "score": 67.5,
      "status": "warning",
      "issues": [
        {
          "check": "resource_usage",
          "severity": "CRITICAL",
          "message": "No memory info available",
          "score": 0,
          "phase": "phase1"
        }
      ]
    },
    "phase2": {
      "phase_name": "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å‹•ä½œç¢ºèª",
      "weight": 30,
      "checks": {
        "log_analysis": {
          "status": "healthy",
          "error_count": 0,
          "details": "No significant errors detected"
        },
        "data_fetching_efficiency": {
          "status": "healthy",
          "issues": [],
          "latest_progress": null,
          "details": "Data fetching appears normal"
        },
        "signal_generation_health": {
          "status": "healthy",
          "health_score": 80,
          "details": "Signal monitoring passed"
        },
        "main_loop_status": {
          "status": "healthy",
          "init_status": {
            "INIT-5": "unknown",
            "INIT-6": "unknown",
            "INIT-7": "unknown",
            "INIT-8": "unknown"
          },
          "main_loop_reached": "[\n  {\n    \"insertId\": \"689bb82400067b6b865ccef8\",\n    \"labels\": {\n      \"instanceId\": \"0069c7a9882a6c72c6bdac590849c35a657d4f104ef04e795afba637c4f2519f5d27fcb4fef20abba9a05a7260bbab4cedd684341d5050c9c23f66ef2f123329d1c0c3932833d491b1356fdc42d88059b9f7\"\n    },\n    \"logName\": \"projects/my-crypto-bot-project/logs/run.googleapis.com%2Fstdout\",\n    \"receiveTimestamp\": \"2025-08-12T21:54:44.695468997Z\",\n    \"resource\": {\n      \"labels\": {\n        \"configuration_name\": \"crypto-bot-service-prod\",\n        \"location\": \"asia-northeast1\",\n        \"project_id\": \"my-crypto-bot-project\",\n        \"revision_name\": \"crypto-bot-service-prod-00044-8z5\",\n        \"service_name\": \"crypto-bot-service-prod\"\n      },\n      \"type\": \"cloud_run_revision\"\n    },\n    \"textPayload\": \"[2025-08-12 21:54:44] INFO     crypto_bot.cli.live : ğŸš€ [INIT-COMPLETE] Initialization complete, starting main loop...\",\n    \"timestamp\": \"2025-08-12T21:54:44.424811Z\"\n  },\n  {\n    \"insertId\": \"689bb261000a849d3352b6d3\",\n    \"labels\": {\n      \"instanceId\": \"0069c7a9889191f2db538a4e2376f59b4ca1fd2abbe4125a5b7d10081b60e46b2b21abef68224403b160a1a78929d1aaef8aca51b9fc8bb6dfc1136c4df8e4a3dec03b88637843f8fccf46e82a85f3ea281886\"\n    },\n    \"logName\": \"projects/my-crypto-bot-project/logs/run.googleapis.com%2Fstdout\",\n    \"receiveTimestamp\": \"2025-08-12T21:30:10.026749471Z\",\n    \"resource\": {\n      \"labels\": {\n        \"configuration_name\": \"crypto-bot-service-prod\",\n        \"location\": \"asia-northeast1\",\n        \"project_id\": \"my-crypto-bot-project\",\n        \"revision_name\": \"crypto-bot-service-prod-00043-2tz\",\n        \"service_name\": \"crypto-bot-service-prod\"\n      },\n      \"type\": \"cloud_run_revision\"\n    },\n    \"textPayload\": \"[2025-08-12 21:30:09] INFO     crypto_bot.cli.live : ğŸ“¦ [INIT-ATR] Cached 168 records for main loop reuse\",\n    \"timestamp\": \"2025-08-12T21:30:09.689309Z\"\n  }\n]",
          "details": "Initialization and main loop normal"
        }
      },
      "score": 100.0,
      "status": "healthy",
      "issues": []
    },
    "phase3": {
      "phase_name": "éš ã‚ŒãŸå•é¡Œæ¤œå‡º",
      "weight": 30,
      "checks": {
        "hidden_error_patterns": {
          "status": "critical",
          "patterns_detected": 5,
          "critical_patterns": 2,
          "high_patterns": 1,
          "detected_patterns": [
            {
              "id": "data_fetch_stagnation",
              "name": "ãƒ‡ãƒ¼ã‚¿å–å¾—åœæ»ï¼ˆ48/300å•é¡Œï¼‰",
              "severity": "CRITICAL",
              "description": "APIåˆ¶é™ã¾ãŸã¯æ¥ç¶šå•é¡Œã«ã‚ˆã‚Š48ä»¶ã§åœæ»ã€Empty batché€£ç¶šç™ºç”Ÿ",
              "detection_details": {
                "detected": true,
                "evidence": "Found 3 instances of 48/300 stagnation",
                "latest_timestamp": "2025-08-12T03:15:17.585940Z"
              },
              "past_solutions": [
                "APIæ¥ç¶šç¢ºèªãƒ»èªè¨¼æƒ…å ±ãƒã‚§ãƒƒã‚¯",
                "ãƒ¬ãƒ¼ãƒˆåˆ¶é™å›é¿ãƒ»ãƒãƒƒã‚¯ã‚ªãƒ•èª¿æ•´",
                "ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½å®Ÿè£…"
              ]
            },
            {
              "id": "model_compatibility_error",
              "name": "ãƒ¢ãƒ‡ãƒ«äº’æ›æ€§ã‚¨ãƒ©ãƒ¼ï¼ˆmonotonic_cstå±æ€§ï¼‰",
              "severity": "CRITICAL",
              "description": "scikit-learnãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸æ•´åˆã«ã‚ˆã‚‹ãƒ¢ãƒ‡ãƒ«äºˆæ¸¬å¤±æ•—ã€ãƒˆãƒ¬ãƒ¼ãƒ‰ä¸èƒ½",
              "detection_details": {
                "detected": true,
                "evidence": "Pattern 'Trading prediction failed for base model' found in logs",
                "matches": 2
              },
              "past_solutions": [
                "scripts/model_tools/retrain_97_features_model.py --fix-compatibility-onlyå®Ÿè¡Œ",
                "ãƒ¢ãƒ‡ãƒ«å†å­¦ç¿’ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³çµ±ä¸€",
                "crypto_bot/ml/ensemble.pyã«ãƒ‘ãƒƒãƒé©ç”¨"
              ]
            },
            {
              "id": "frequent_instance_restart",
              "name": "é »ç¹ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹å†èµ·å‹•ï¼ˆSIGTERMï¼‰",
              "severity": "HIGH",
              "description": "Cloud Runã®min-instances=0ã«ã‚ˆã‚‹ã‚¢ã‚¤ãƒ‰ãƒ«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã€çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ",
              "detection_details": {
                "detected": true,
                "evidence": "Pattern 'Received signal 15' found in logs",
                "matches": 2
              },
              "past_solutions": [
                "gcloud run services update --min-instances=1",
                "CPU throttlingç„¡åŠ¹åŒ–",
                "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•·ï¼ˆ--timeout=3600ï¼‰"
              ]
            },
            {
              "id": "confidence_below_threshold_chronic",
              "name": "confidenceå€¤æ…¢æ€§çš„é–¾å€¤æœªé”",
              "severity": "MEDIUM",
              "description": "äºˆæ¸¬confidenceãŒå¸¸ã«é–¾å€¤ã‚’ä¸‹å›ã‚Šã€ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆã•ã‚Œãš",
              "detection_details": {
                "detected": true,
                "evidence": "Pattern 'Entry order details: side=None, price=None, lot=0\\.0' found in logs",
                "matches": 2
              },
              "past_solutions": [
                "confidence_thresholdå¼•ãä¸‹ã’ï¼ˆ0.35â†’0.25ï¼‰",
                "ãƒ¢ãƒ‡ãƒ«æ€§èƒ½æ”¹å–„ãƒ»å†å­¦ç¿’",
                "ãƒ‡ãƒ¼ã‚¿å“è³ªå‘ä¸Šãƒ»å–å¾—é‡å¢—åŠ "
              ]
            },
            {
              "id": "ensemble_model_degraded",
              "name": "ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«åŠ£åŒ–ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¤šç”¨ï¼‰",
              "severity": "MEDIUM",
              "description": "ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å†…ã®è¤‡æ•°ãƒ¢ãƒ‡ãƒ«ãŒå¤±æ•—ã€äºˆæ¸¬å“è³ªä½ä¸‹",
              "detection_details": {
                "detected": true,
                "evidence": "Pattern 'Trading prediction failed for base model' found in logs",
                "matches": 2
              },
              "past_solutions": [
                "ãƒ¢ãƒ‡ãƒ«äº’æ›æ€§ä¿®æ­£ãƒ»å†å­¦ç¿’",
                "sklearn versionçµ±ä¸€",
                "ensemble.py ãƒ‘ãƒƒãƒå¼·åŒ–"
              ]
            }
          ],
          "details": "5 hidden patterns detected"
        },
        "performance_anomalies": {
          "status": "healthy",
          "anomalies": [],
          "anomaly_count": 0,
          "details": "No performance anomalies detected"
        },
        "future_data_leaks": {
          "status": "healthy",
          "leak_count": 0,
          "details": "No future data leaks detected"
        },
        "config_integrity": {
          "status": "healthy",
          "issues": [],
          "issue_count": 0,
          "details": "Configuration integrity OK"
        }
      },
      "score": 77.5,
      "status": "warning",
      "issues": [
        {
          "check": "hidden_error_patterns",
          "severity": "CRITICAL",
          "message": "5 hidden patterns detected",
          "score": 10,
          "phase": "phase3"
        }
      ]
    },
    "phase4": {
      "phase_name": "ç·åˆåˆ¤å®šãƒ»ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ",
      "weight": 15,
      "checks": {
        "overall_scoring": {
          "status": "healthy",
          "overall_score": 82.5,
          "overall_status": "healthy",
          "phase_scores": {
            "phase1": {
              "score": 67.5,
              "weight": 25,
              "status": "warning",
              "weighted_score": 1687.5
            },
            "phase2": {
              "score": 100.0,
              "weight": 30,
              "status": "healthy",
              "weighted_score": 3000.0
            },
            "phase3": {
              "score": 77.5,
              "weight": 30,
              "status": "warning",
              "weighted_score": 2325.0
            }
          },
          "total_weight": 85,
          "details": "Overall score: 82.5/100 (healthy)"
        },
        "risk_assessment": {
          "status": "healthy",
          "risk_level": "HIGH",
          "total_issues": 2,
          "critical_count": 2,
          "high_count": 0,
          "medium_count": 0,
          "problem_categories": {
            "Other": 1,
            "Hidden Issues": 1
          },
          "critical_issues": [
            {
              "check": "resource_usage",
              "severity": "CRITICAL",
              "message": "No memory info available",
              "score": 0,
              "phase": "phase1"
            },
            {
              "check": "hidden_error_patterns",
              "severity": "CRITICAL",
              "message": "5 hidden patterns detected",
              "score": 10,
              "phase": "phase3"
            }
          ],
          "details": "Risk level: HIGH (2 total issues)"
        },
        "action_recommendations": {
          "status": "healthy",
          "urgent_actions": [
            {
              "action": "Review resource_usage issue",
              "command": "Investigate: No memory info available...",
              "category": "General",
              "priority": "IMMEDIATE"
            },
            {
              "action": "Address detected hidden error patterns",
              "command": "Review specific pattern and apply past solutions",
              "category": "Hidden Issues",
              "priority": "IMMEDIATE"
            }
          ],
          "recommendations": [],
          "total_actions": 2,
          "details": "2 urgent actions, 0 recommendations"
        },
        "report_generation": {
          "status": "healthy",
          "html_report_path": "logs/operational_reports/operational_status_20250813_065710.html",
          "json_report_path": "logs/operational_reports/operational_status_20250813_065710.json",
          "report_timestamp": "20250813_065710",
          "details": "Detailed report generated: logs/operational_reports/operational_status_20250813_065710.html"
        }
      },
      "score": 100.0,
      "status": "healthy",
      "issues": []
    }
  },
  "overall_status": "healthy",
  "overall_score": 85.125,
  "critical_issues": [],
  "recommendations": []
}