# requirements/ - ä¾å­˜é–¢ä¿‚ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

## ğŸ“‹ æ¦‚è¦

**Phase 12.5: Environment Parity & Dependency Management System**  
æœ¬ãƒ•ã‚©ãƒ«ãƒ€ã¯ crypto-bot ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾å­˜é–¢ä¿‚ç®¡ç†ã‚’çµ±ä¸€çš„ã«è¡Œã†ä¸­å¤®é›†ç´„ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ğŸ¯ è¨­è¨ˆåŸå‰‡

### **å˜ä¸€çœŸå®Ÿæº (Single Source of Truth)**
- `base.txt`: æœ¬ç•ªç’°å¢ƒã®æœ€å°ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©
- `dev.txt`: é–‹ç™ºãƒ»CIç’°å¢ƒã®ä¾å­˜é–¢ä¿‚ã‚’å®šç¾©ï¼ˆbase.txtã‚’ç¶™æ‰¿ï¼‰
- **æ‰‹å‹•ç®¡ç†æ’é™¤**: Dockerfile ã§ã®ä¾å­˜é–¢ä¿‚æ‰‹å‹•è¨˜è¿°ã‚’å»ƒæ­¢

### **ç’°å¢ƒçµ±ä¸€ (Environment Parity)**
```
ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º â‰ˆ CIç’°å¢ƒ â‰ˆ æœ¬ç•ªç’°å¢ƒ
     â†“           â†“        â†“
  dev.txt â†’ base.txt â†’ Dockerfile
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### `base.txt` - æœ¬ç•ªç’°å¢ƒæœ€å°ä¾å­˜é–¢ä¿‚
```bash
# æœ¬ç•ªç’°å¢ƒã§å‹•ä½œã«å¿…è¦ãªæœ€å°é™ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
# Dockeræœ¬ç•ªã‚¤ãƒ¡ãƒ¼ã‚¸ã§ä½¿ç”¨
numpy>=1.24.0,<2.0      # æ•°å€¤è¨ˆç®—åŸºç›¤
pandas>=1.5.0,<2.0      # ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†
scikit-learn==1.7.1     # æ©Ÿæ¢°å­¦ç¿’ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®šï¼‰
ccxt>=2.10.0            # å–å¼•æ‰€API
fastapi>=0.100.0        # Web APIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
lightgbm>=4.0.0         # æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«
xgboost>=1.7.0          # æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«
# ... ä»–34ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```

### `dev.txt` - é–‹ç™ºãƒ»CIç’°å¢ƒä¾å­˜é–¢ä¿‚
```bash
# æœ¬ç•ªä¾å­˜é–¢ä¿‚ã‚’ç¶™æ‰¿ + é–‹ç™ºå°‚ç”¨ãƒ„ãƒ¼ãƒ«
-r base.txt

# ãƒ†ã‚¹ãƒˆãƒ»å“è³ªä¿è¨¼
pytest>=7.0.0
flake8>=6.0.0
black>=24.3.0
mypy>=1.4.0

# é–‹ç™ºæ”¯æ´
ipython==8.18.1
matplotlib>=3.5.0
# ... ä»–27ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
```

### `validate.py` - ä¾å­˜é–¢ä¿‚ä¸€è²«æ€§ãƒã‚§ãƒƒã‚«ãƒ¼
```python
class DependencyValidator:
    """ä¾å­˜é–¢ä¿‚ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯ãƒ»åŒæœŸã‚·ã‚¹ãƒ†ãƒ """
    
    # æ©Ÿèƒ½:
    # 1. base.txt â†” Dockerfile ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
    # 2. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´æ¤œå‡º
    # 3. åŒæœŸæƒ…å ±è¡¨ç¤º
    # 4. è‡ªå‹•ä¿®æ­£ææ¡ˆ
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### **é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
# é–‹ç™ºç”¨ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆãƒ†ã‚¹ãƒˆãƒ»å“è³ªãƒ„ãƒ¼ãƒ«è¾¼ã¿ï¼‰
pip install -r requirements/dev.txt
```

### **æœ¬ç•ªç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
# æœ¬ç•ªç”¨æœ€å°ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements/base.txt
```

### **ä¾å­˜é–¢ä¿‚æ¤œè¨¼**
```bash
# ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
make validate-deps
# ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
python requirements/validate.py

# åŒæœŸæƒ…å ±ç¢ºèª
make sync-deps  
# ã¾ãŸã¯ç›´æ¥å®Ÿè¡Œ
python requirements/validate.py --sync
```

## ğŸ³ Dockerçµ±åˆ

### **è‡ªå‹•çµ±åˆä»•æ§˜**
```dockerfile
# Dockerfileå†…ã§ã®ä½¿ç”¨ä¾‹
COPY requirements/base.txt /app/requirements.txt
RUN pip install --no-cache-dir -r /app/requirements.txt
```

### **validate.py ã«ã‚ˆã‚‹è‡ªå‹•æ¤œè¨¼**
- Dockerfileå†…ã®pip installè¡Œã‚’è§£æ
- base.txtã¨ã®ä¸€è²«æ€§ã‚’è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä¸è¶³ã‚’æ¤œå‡º

## âš™ï¸ CI/CDçµ±åˆ

### **GitHub Actions çµ±åˆ**
```yaml
# .github/workflows/ci.yml ã§ã®ä½¿ç”¨
- name: Install dependencies
  run: pip install -r requirements/dev.txt

- name: Validate dependencies  
  run: make validate-deps
```

### **å“è³ªä¿è¨¼ãƒ•ãƒ­ãƒ¼**
```
1. ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: requirements/dev.txt
2. CIå®Ÿè¡Œ: requirements/dev.txt + validate.py
3. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤: requirements/base.txt â†’ Docker
4. ä¸€è²«æ€§ä¿è¨¼: validate.py ã«ã‚ˆã‚‹è‡ªå‹•ãƒã‚§ãƒƒã‚¯
```

## ğŸ“Š ãƒ¡ãƒªãƒƒãƒˆãƒ»åŠ¹æœ

### **é‹ç”¨åŠ¹ç‡å‘ä¸Š**
- âœ… **æ‰‹å‹•ç®¡ç†æ’é™¤**: Dockerfileå†…ã®æ‰‹å‹•ä¾å­˜é–¢ä¿‚è¨˜è¿°å»ƒæ­¢
- âœ… **ãƒ‰ãƒªãƒ•ãƒˆé˜²æ­¢**: ç’°å¢ƒé–“ã§ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´é˜²æ­¢
- âœ… **CIé«˜é€ŸåŒ–**: ä¸€è²«ã—ãŸä¾å­˜é–¢ä¿‚ã§å®‰å®šã—ãŸãƒ“ãƒ«ãƒ‰æ™‚é–“

### **ä¿å®ˆæ€§å‘ä¸Š**
- âœ… **ä¸­å¤®é›†ç´„ç®¡ç†**: å…¨ä¾å­˜é–¢ä¿‚ã‚’requirements/ã§ä¸€å…ƒç®¡ç†
- âœ… **è‡ªå‹•æ¤œè¨¼**: validate.pyã«ã‚ˆã‚‹ä¸€è²«æ€§è‡ªå‹•ãƒã‚§ãƒƒã‚¯
- âœ… **æ˜ç¢ºãªè²¬ä»»åˆ†é›¢**: æœ¬ç•ª(base.txt) vs é–‹ç™º(dev.txt)

### **å“è³ªä¿è¨¼**
- âœ… **Environment Parity**: Local â‰ˆ CI â‰ˆ Production
- âœ… **å†ç¾æ€§ä¿è¨¼**: å›ºå®šãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚‹ä¸€è²«ã—ãŸå‹•ä½œ
- âœ… **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æœ€å°é™ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§æ”»æ’ƒé¢ç©å‰Šæ¸›

## ğŸš€ Phase 12.5 å®Ÿè£…åŠ¹æœ

### **å¾“æ¥ã®èª²é¡Œè§£æ±º**
- âŒ **å¾“æ¥**: Dockerfileå†…ã«æ‰‹å‹•ã§pip installè¨˜è¿°
- âŒ **å¾“æ¥**: ç’°å¢ƒé–“ã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´
- âŒ **å¾“æ¥**: ä¾å­˜é–¢ä¿‚ã®é‡è¤‡ç®¡ç†

### **Phase 12.5ã§è§£æ±º**
- âœ… **ç¾åœ¨**: requirements.txtçµ±ä¸€ç®¡ç†
- âœ… **ç¾åœ¨**: validate.pyã«ã‚ˆã‚‹è‡ªå‹•ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯  
- âœ… **ç¾åœ¨**: å˜ä¸€çœŸå®Ÿæºã«ã‚ˆã‚‹ç®¡ç†åŠ¹ç‡åŒ–

## ğŸ“‹ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æŒ‡é‡

### **ä¾å­˜é–¢ä¿‚æ›´æ–°æ‰‹é †**
1. `requirements/base.txt` ã§æœ¬ç•ªä¾å­˜é–¢ä¿‚æ›´æ–°
2. `requirements/dev.txt` ã§é–‹ç™ºä¾å­˜é–¢ä¿‚æ›´æ–°  
3. `make validate-deps` ã§ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
4. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã®è‡ªå‹•æ¤œè¨¼ç¢ºèª

### **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**
```bash
# ä¾å­˜é–¢ä¿‚ç«¶åˆæ™‚
make validate-deps          # å•é¡Œç®‡æ‰€ç‰¹å®š
make sync-deps             # ä¿®æ­£ææ¡ˆç¢ºèª
# base.txtã¾ãŸã¯Dockerfileæ‰‹å‹•èª¿æ•´
```

---

**Phase 12.5: Environment Parity & Dependency Management System**ã«ã‚ˆã‚Šã€crypto-botã®ä¾å­˜é–¢ä¿‚ç®¡ç†ã¯å®Œå…¨ã«è‡ªå‹•åŒ–ãƒ»çµ±ä¸€ã•ã‚Œã¾ã—ãŸã€‚ğŸ¯