# æ¤œè¨¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

crypto-botã§ã¯ã€ã‚³ãƒ¼ãƒ‰å“è³ªã¨æœ¬ç•ªç’°å¢ƒã§ã®å®‰å®šæ€§ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã€3æ®µéšã®æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## ğŸ¯ ä½¿ã„åˆ†ã‘ã‚¬ã‚¤ãƒ‰

### 1. **é–‹ç™ºä¸­ã®é »ç¹ãªãƒã‚§ãƒƒã‚¯** â†’ `checks.sh`
```bash
# ã‚³ãƒ¼ãƒ‰ç·¨é›†å¾Œã€ã‚³ãƒŸãƒƒãƒˆå‰ã«å®Ÿè¡Œ
bash scripts/checks.sh
```
- **å®Ÿè¡Œæ™‚é–“**: ã€œ1åˆ†
- **å†…å®¹**: flake8, isort, black, pytest
- **ã„ã¤ä½¿ã†**: 
  - ã‚³ãƒ¼ãƒ‰ç·¨é›†å¾Œ
  - ã‚³ãƒŸãƒƒãƒˆå‰
  - PRä½œæˆå‰

### 2. **ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®åŒ…æ‹¬æ¤œè¨¼** â†’ `validate_all.sh`
```bash
# æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å®Ÿè¡Œï¼ˆãƒ•ãƒ«æ¤œè¨¼ï¼‰
bash scripts/validate_all.sh

# é–‹ç™ºä¸­ã®ä¸­é–“ãƒã‚§ãƒƒã‚¯ï¼ˆé«˜é€Ÿç‰ˆï¼‰
bash scripts/validate_all.sh --quick

# CI/CDç”¨ï¼ˆé™çš„è§£æ+ãƒªãƒ¼ã‚¯æ¤œå‡ºï¼‰
bash scripts/validate_all.sh --ci
```
- **å®Ÿè¡Œæ™‚é–“**: 
  - `--quick`: ã€œ1åˆ†
  - `--ci`: ã€œ3åˆ†
  - ãƒ•ãƒ«: ã€œ10åˆ†
- **ã„ã¤ä½¿ã†**:
  - æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ï¼ˆå¿…é ˆï¼‰
  - å¤§ããªæ©Ÿèƒ½è¿½åŠ å¾Œ
  - é€±æ¬¡ã®å®šæœŸãƒã‚§ãƒƒã‚¯

### 3. **å€‹åˆ¥ã®è©³ç´°æ¤œè¨¼** â†’ å„å°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
# æœªæ¥ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯æ¤œå‡ºã®ã¿
python scripts/utilities/future_leak_detector.py --project-root .

# ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ã®ã¿
python -m crypto_bot.main live-bitbank --paper-trade

# ã‚·ã‚°ãƒŠãƒ«ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã®ã¿
python scripts/utilities/signal_monitor.py
```

## ğŸ“Š æ¤œè¨¼ãƒ¬ãƒ™ãƒ«è©³ç´°

### **Level 1: é™çš„è§£æï¼ˆå¿…é ˆï¼‰**
- âœ… æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
- âœ… ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«çµ±ä¸€
- âœ… importé †åº
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸æ¸¬å®š

### **Level 2: æ™‚ç³»åˆ—æ¤œè¨¼ï¼ˆé‡è¦ï¼‰**
- ğŸ” æœªæ¥ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯æ¤œå‡º
- ğŸ” ç‰¹å¾´é‡è¨ˆç®—ã®æ™‚ç³»åˆ—æ•´åˆæ€§
- ğŸ” ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã®ãƒ‡ãƒ¼ã‚¿åˆ†å‰²
- ğŸ” å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³ã®æ¤œå‡º

### **Level 3: å‹•çš„æ¤œè¨¼ï¼ˆåŒ…æ‹¬çš„ï¼‰**
- ğŸ¯ ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰å®Ÿè¡Œ
- ğŸ¯ ã‚·ã‚°ãƒŠãƒ«ç”Ÿæˆç›£è¦–
- ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ çµ±åˆãƒ†ã‚¹ãƒˆ
- ğŸ¯ æœ¬ç•ªç’°å¢ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸš€ æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### **æ—¥å¸¸é–‹ç™ºãƒ•ãƒ­ãƒ¼**
```mermaid
graph LR
    A[ã‚³ãƒ¼ãƒ‰ç·¨é›†] --> B[checks.sh]
    B --> C{ãƒ‘ã‚¹?}
    C -->|Yes| D[git commit]
    C -->|No| A
    D --> E[git push]
```

### **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼**
```mermaid
graph LR
    A[æ©Ÿèƒ½å®Œæˆ] --> B[validate_all.sh]
    B --> C{å…¨ãƒ‘ã‚¹?}
    C -->|Yes| D[git push origin main]
    C -->|No| E[å•é¡Œä¿®æ­£]
    E --> B
    D --> F[CI/CDè‡ªå‹•å®Ÿè¡Œ]
    F --> G[æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤]
```

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### **çµ¶å¯¾ã«ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã¯ã„ã‘ãªã„æ¤œè¨¼**
1. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®`validate_all.sh`**
   - æœªæ¥ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯ã¯æœ¬ç•ªã§å¤§æå¤±ã«ã¤ãªãŒã‚‹
   - ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ã§äº‹å‰ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºè¦‹

2. **å¤§ããªå¤‰æ›´å¾Œã®`checks.sh`**
   - ãƒ†ã‚¹ãƒˆã®å¤±æ•—ã¯ä»–ã®éƒ¨åˆ†ã«å½±éŸ¿ã™ã‚‹
   - ã‚«ãƒãƒ¬ãƒƒã‚¸ä½ä¸‹ã¯å“è³ªä½ä¸‹ã®ã‚µã‚¤ãƒ³

### **æ¤œè¨¼å¤±æ•—æ™‚ã®å¯¾å‡¦**

#### Level 1å¤±æ•—ï¼ˆé™çš„è§£æï¼‰
```bash
# è‡ªå‹•ä¿®æ­£ã‚’é©ç”¨
python -m black crypto_bot/ tests/
python -m isort crypto_bot/ tests/

# å†ãƒã‚§ãƒƒã‚¯
bash scripts/checks.sh
```

#### Level 2å¤±æ•—ï¼ˆãƒªãƒ¼ã‚¯æ¤œå‡ºï¼‰
```bash
# è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèª
open logs/leak_detection/leak_detection_*.html

# å±é™ºãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä¿®æ­£
# ä¾‹: shift(-1) â†’ shift(1)
#     rolling(center=True) â†’ rolling()
```

#### Level 3å¤±æ•—ï¼ˆå‹•çš„æ¤œè¨¼ï¼‰
```bash
# å€‹åˆ¥ãƒ¬ãƒãƒ¼ãƒˆã‚’ç¢ºèª
open logs/pre_deploy_validation/validation_*.html
open logs/monitoring_reports/signal_monitor_*.html

# ãƒ­ã‚°ã‚’è©³ç´°ç¢ºèª
tail -f logs/trading_signals.csv
tail -f logs/paper_trading_results.json
```

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### **ä¸¦åˆ—å®Ÿè¡Œï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰**
```bash
# è¤‡æ•°ã®æ¤œè¨¼ã‚’ä¸¦åˆ—å®Ÿè¡Œ
(
    bash scripts/checks.sh &
    python scripts/utilities/future_leak_detector.py --project-root . &
    wait
) && echo "All parallel checks passed"
```

### **å¢—åˆ†æ¤œè¨¼ï¼ˆé–‹ç™ºåŠ¹ç‡åŒ–ï¼‰**
```bash
# å¤‰æ›´ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ãƒã‚§ãƒƒã‚¯
git diff --name-only | grep '\.py$' | xargs python -m flake8
git diff --name-only | grep '\.py$' | xargs python -m black --check
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **Q: checks.shãŒé…ã„**
A: pytestã®ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆç®—ãŒåŸå› ã€‚é–‹ç™ºä¸­ã¯ä»¥ä¸‹ã§é«˜é€ŸåŒ–ï¼š
```bash
# ã‚«ãƒãƒ¬ãƒƒã‚¸ãªã—ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pytest tests/unit/ -x --tb=short
```

### **Q: validate_all.shãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹**
A: ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‰ãŒåŸå› ã®å¯èƒ½æ€§ã€‚ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½ï¼š
```bash
python scripts/pre_deploy_validation.py --skip-paper-trade
```

### **Q: æœªæ¥ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯æ¤œå‡ºã§èª¤æ¤œçŸ¥ãŒå¤šã„**
A: å®‰å…¨ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã«è¿½åŠ ï¼š
```python
# scripts/utilities/future_leak_detector.py ã® safe_patterns ã«è¿½åŠ 
"safe_patterns": [
    r"your_safe_pattern_here",
]
```

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [README.md](../README.md) - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
- [CLAUDE.md](../CLAUDE.md) - é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- [scripts/README.md](../scripts/README.md) - ã‚¹ã‚¯ãƒªãƒ—ãƒˆè©³ç´°

## ğŸ¯ ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ«ãƒ¼ãƒ«

1. **ã‚³ãƒŸãƒƒãƒˆå‰ã«`checks.sh`ã‚’å¿…ãšå®Ÿè¡Œ**
2. **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«`validate_all.sh`ã‚’å¿…ãšå®Ÿè¡Œ**
3. **æ¤œè¨¼å¤±æ•—ã‚’ç„¡è¦–ã—ãªã„**
4. **è­¦å‘Šã‚‚å¯èƒ½ãªé™ã‚Šè§£æ¶ˆã™ã‚‹**
5. **å®šæœŸçš„ã«å…¨æ¤œè¨¼ã‚’å®Ÿè¡Œã™ã‚‹ï¼ˆé€±1å›æ¨å¥¨ï¼‰**

---

*æœ€çµ‚æ›´æ–°: 2025å¹´8æœˆ11æ—¥ - Phase 2-3å®Ÿè£…å®Œäº†*