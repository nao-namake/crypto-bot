# GitHub Actions Workflows

**Phase 19å®Œäº†**: ç‰¹å¾´é‡å®šç¾©ä¸€å…ƒåŒ–ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ”¹è‰¯ãƒ»MLOpsåŸºç›¤ç¢ºç«‹ãƒ»CI/CDå®Œå…¨çµ±åˆãƒ»654ãƒ†ã‚¹ãƒˆ100%æˆåŠŸ

## ğŸ¯ å½¹å‰²ãƒ»è²¬ä»»

GitHub Actionsã‚’æ´»ç”¨ã—ãŸçµ±åˆCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚å“è³ªãƒã‚§ãƒƒã‚¯ãƒ»è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ãƒ»MLãƒ¢ãƒ‡ãƒ«å­¦ç¿’ãƒ»ç›£è¦–ã‚’è‡ªå‹•åŒ–ã—ã€é«˜å“è³ªãªAIè‡ªå‹•å–å¼•ã‚·ã‚¹ãƒ†ãƒ ã®ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
workflows/
â”œâ”€â”€ ci.yml               # ãƒ¡ã‚¤ãƒ³CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆPhase 19å®Œå…¨å¯¾å¿œï¼‰
â”‚                       # - 654ãƒ†ã‚¹ãƒˆ100%æˆåŠŸãƒ»59.24%ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†æ¤œè¨¼
â”‚                       # - å“è³ªãƒã‚§ãƒƒã‚¯ãƒ»Dockeræ§‹ç¯‰ãƒ»æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»Phase 19å¯¾å¿œ
â”œâ”€â”€ model-training.yml   # MLè‡ªå‹•å­¦ç¿’ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆPhase 19æ–°è¦ï¼‰
â”‚                       # - é€±æ¬¡è‡ªå‹•å­¦ç¿’ãƒ»æ‰‹å‹•å®Ÿè¡Œå¯¾å¿œãƒ»12ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†
â”‚                       # - Gitæƒ…å ±è¿½è·¡ãƒ»è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»å“è³ªæ¤œè¨¼çµ±åˆ
â”œâ”€â”€ cleanup.yml          # GCPãƒªã‚½ãƒ¼ã‚¹è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
â”‚                       # - ã‚³ã‚¹ãƒˆæœ€é©åŒ–ãƒ»å¤ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ãƒªãƒ“ã‚¸ãƒ§ãƒ³å‰Šé™¤ãƒ»æœˆæ¬¡å®Ÿè¡Œ
â””â”€â”€ README.md            # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆPhase 19å®Œäº†ãƒ»MLOpsåŸºç›¤ç¢ºç«‹ç‰ˆï¼‰
```

## ğŸ”§ ä¸»è¦æ©Ÿèƒ½ãƒ»å®Ÿè£…

### **ci.yml - çµ±åˆCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆPhase 19å®Œå…¨å¯¾å¿œï¼‰**

**å®Ÿè¡Œæ¡ä»¶**:
- **è‡ªå‹•å®Ÿè¡Œ**: `main`ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰
- **å“è³ªãƒã‚§ãƒƒã‚¯**: ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆæ™‚ï¼ˆãƒãƒ¼ã‚¸å‰æ¤œè¨¼ï¼‰
- **æ‰‹å‹•å®Ÿè¡Œ**: GitHub Actionsç”»é¢ã‹ã‚‰ï¼ˆä»»æ„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼‰

**å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:

#### 1ï¸âƒ£ **å“è³ªä¿è¨¼ãƒ•ã‚§ãƒ¼ã‚º (Quality Check & Tests)**
```bash
# Phase 19é”æˆæŒ‡æ¨™
âœ… 654ãƒ†ã‚¹ãƒˆ100%æˆåŠŸï¼ˆç‰¹å¾´é‡å®šç¾©ä¸€å…ƒåŒ–å®Œæˆãƒ»å“è³ªä¿è¨¼ä½“åˆ¶å®Œæˆï¼‰
âœ… ã‚«ãƒãƒ¬ãƒƒã‚¸59.24%é”æˆï¼ˆç›®æ¨™50%ã‚’å¤§å¹…ä¸Šå›ã‚‹ä¼æ¥­ç´šå“è³ªï¼‰
âœ… ã‚³ãƒ¼ãƒ‰å“è³ª100%åˆæ ¼ï¼ˆflake8ãƒ»blackãƒ»isortçµ±åˆãƒ»ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†æ¤œè¨¼ï¼‰
âœ… ç‰¹å¾´é‡æ•´åˆæ€§100%ï¼ˆfeature_manager.pyãƒ»12ç‰¹å¾´é‡çµ±ä¸€ãƒã‚§ãƒƒã‚¯ï¼‰

# å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
bash scripts/testing/checks.sh                    # çµ±åˆå“è³ªãƒã‚§ãƒƒã‚¯ï¼ˆ654ãƒ†ã‚¹ãƒˆãƒ»ç´„30ç§’ï¼‰
python3 -m pytest tests/ --cov=src --cov-report=xml  # 654ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸
flake8 src/ tests/ scripts/ --count --statistics     # ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«
black --check src/ tests/ scripts/                   # ã‚³ãƒ¼ãƒ‰æ•´å½¢ç¢ºèª
isort --check-only src/ tests/ scripts/             # importé †åºç¢ºèª

# Phase 19ç‰¹å¾´é‡æ¤œè¨¼
python3 -c "from src.core.config.feature_manager import FeatureManager; print(f'ç‰¹å¾´é‡æ•°: {FeatureManager().get_feature_count()}')"
```

#### 2ï¸âƒ£ **GCPç’°å¢ƒç¢ºèªãƒ•ã‚§ãƒ¼ã‚º (GCP Environment Check)**
```bash
# æœ¬ç•ªç¨¼åƒå¿…é ˆãƒªã‚½ãƒ¼ã‚¹å­˜åœ¨ç¢ºèª
gcloud artifacts repositories describe crypto-bot-repo --location=asia-northeast1
gcloud secrets describe bitbank-api-key --project=my-crypto-bot-project
gcloud secrets describe bitbank-api-secret --project=my-crypto-bot-project
gcloud run services describe crypto-bot-service-prod --region=asia-northeast1
```

#### 3ï¸âƒ£ **ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ãƒ•ã‚§ãƒ¼ã‚º (Docker Build & Push)**
```bash
# Dockerã‚¤ãƒ¡ãƒ¼ã‚¸æ§‹ç¯‰ãƒ»Artifact Registryãƒ—ãƒƒã‚·ãƒ¥ï¼ˆPhase 19å¯¾å¿œï¼‰
IMAGE_TAG="asia-northeast1-docker.pkg.dev/my-crypto-bot-project/crypto-bot-repo/crypto-bot:${GITHUB_SHA}"
docker build -t "${IMAGE_TAG}" --build-arg PHASE=19 .
docker push "${IMAGE_TAG}"

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ï¼ˆè‡ªå‹•ï¼‰
gcloud container images scan "${IMAGE_TAG}"
```

#### 4ï¸âƒ£ **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ã‚§ãƒ¼ã‚º (Production Deployment)**
```bash
# æœ¬ç•ªCloud Runãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆPhase 19ãƒ»ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†å¯¾å¿œï¼‰
gcloud run deploy crypto-bot-service-prod \
  --image="${IMAGE_TAG}" \
  --region=asia-northeast1 \
  --platform=managed \
  --memory=1Gi --cpu=1 \
  --min-instances=1 --max-instances=2 \
  --concurrency=1 --timeout=3600 \
  --allow-unauthenticated \
  --set-env-vars="MODE=live,LOG_LEVEL=INFO,PYTHONPATH=/app,FEATURE_MODE=full,PHASE=19" \
  --set-secrets="BITBANK_API_KEY=bitbank-api-key:latest,BITBANK_API_SECRET=bitbank-api-secret:latest,DISCORD_WEBHOOK_URL=discord-webhook-url:latest"
```

#### 5ï¸âƒ£ **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ•ã‚§ãƒ¼ã‚º (Deployment Verification)**
```bash
# 5å›ãƒªãƒˆãƒ©ã‚¤ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ç¨¼åƒç¢ºèª
for i in {1..5}; do
  curl -f "${SERVICE_URL}/health" && break
  sleep 30
done

# è¿½åŠ æ¤œè¨¼ï¼ˆPhase 19å¯¾å¿œï¼‰
curl -f "${SERVICE_URL}/" -H "Accept: application/json"
curl -f "${SERVICE_URL}/features" || echo "ç‰¹å¾´é‡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª"
```

### **model-training.yml - MLè‡ªå‹•å­¦ç¿’ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼ˆPhase 19åŸºç›¤ç¢ºç«‹ï¼‰**

**å®Ÿè¡Œæ¡ä»¶**:
- **è‡ªå‹•å®Ÿè¡Œ**: æ¯é€±æ—¥æ›œæ—¥ 18:00 JSTï¼ˆé€±æ¬¡è‡ªå‹•å­¦ç¿’ï¼‰
- **æ‰‹å‹•å®Ÿè¡Œ**: GitHub Actionsç”»é¢ãƒ»CLIå®Ÿè¡Œå¯¾å¿œ
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**: training_days (90/180/365)ãƒ»dry_run (ãƒ†ã‚¹ãƒˆç”¨)

**MLOpsæ©Ÿèƒ½**:

#### 1ï¸âƒ£ **å­¦ç¿’ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
```bash
# Phase 19ç’°å¢ƒæº–å‚™
mkdir -p models/{production,training,archive} logs cache
git config --global user.name "GitHub Actions ML Training"
echo "âœ… Phase 19 MLOpsç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†"
```

#### 2ï¸âƒ£ **ãƒ¢ãƒ‡ãƒ«å­¦ç¿’å®Ÿè¡Œ**
```bash
# 12ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»ProductionEnsembleå­¦ç¿’
TRAINING_DAYS=${{ github.event.inputs.training_days || '180' }}
python3 scripts/ml/create_ml_models.py --verbose --days "$TRAINING_DAYS"

# Gitæƒ…å ±è¿½è·¡ãƒ»è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†å®Ÿè¡Œ
echo "Gitæƒ…å ±: $(git rev-parse HEAD) - $(git branch --show-current)"
```

#### 3ï¸âƒ£ **ãƒ¢ãƒ‡ãƒ«å“è³ªæ¤œè¨¼**
```bash
# 12ç‰¹å¾´é‡çµ±ä¸€ãƒã‚§ãƒƒã‚¯ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
FEATURE_COUNT=$(python3 -c "import json; print(len(json.load(open('models/production/production_model_metadata.json'))['feature_names']))")
if [ "$FEATURE_COUNT" != "12" ]; then
  echo "âŒ ç‰¹å¾´é‡æ•°ä¸æ­£: $FEATURE_COUNT != 12"
  exit 1
fi
echo "âœ… ãƒ¢ãƒ‡ãƒ«å“è³ªæ¤œè¨¼å®Œäº†: 12ç‰¹å¾´é‡ç¢ºèª"
```

#### 4ï¸âƒ£ **è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚³ãƒŸãƒƒãƒˆ**
```bash
# Phase 19è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»Gitæƒ…å ±è¨˜éŒ²
MODEL_VERSION=$(python3 -c "import json; print(json.load(open('models/production/production_model_metadata.json')).get('phase', 'Phase 19'))")

git add models/production/ models/training/ models/archive/
git commit -m "feat: ${MODEL_VERSION}ãƒ¢ãƒ‡ãƒ«è‡ªå‹•æ›´æ–°ãƒ»å®šæœŸå­¦ç¿’å®Ÿè¡Œ" \
  -m "- 12ç‰¹å¾´é‡çµ±ä¸€ãƒ¢ãƒ‡ãƒ«å†å­¦ç¿’å®Œäº†" \
  -m "- è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å®Ÿè¡Œ" \
  -m "- Gitæƒ…å ±è¿½è·¡ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ›´æ–°"

git push origin main
```

### **cleanup.yml - GCPãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆPhase 19é‹ç”¨æœ€é©åŒ–ï¼‰**

**å®Ÿè¡Œæ¡ä»¶**:
- **æ‰‹å‹•å®Ÿè¡Œ**: æ¨å¥¨ï¼ˆActionsç”»é¢ã¾ãŸã¯CLIï¼‰
- **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**: æ¯æœˆç¬¬1æ—¥æ›œæ—¥ JST 2:00 AM
- **ç·Šæ€¥æ™‚**: ã‚³ã‚¹ãƒˆæ€¥å¢—æ™‚ãƒ»ãƒªã‚½ãƒ¼ã‚¹ä¸è¶³æ™‚

**ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ¬ãƒ™ãƒ«**:

| ãƒ¬ãƒ™ãƒ« | å¯¾è±¡ãƒªã‚½ãƒ¼ã‚¹ | Phase 19å¯¾å¿œ | æ¨å¥¨åº¦ |
|--------|-------------|-------------|--------|
| **Safe** | å¤ã„Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆæœ€æ–°5å€‹ä¿æŒï¼‰<br>ä¸è¦ãªCloud Runãƒªãƒ“ã‚¸ãƒ§ãƒ³ | ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†å¯¾å¿œãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿æŒ | â­â­â­ |
| **Moderate** | Safe + Cloud Buildå±¥æ­´ï¼ˆ30æ—¥ä»¥ä¸Šï¼‰<br>å¤ã„ãƒªãƒ“ã‚¸ãƒ§ãƒ³ï¼ˆæœ€æ–°3å€‹ä»¥å¤–ï¼‰ | Phase 19å±¥æ­´ä¿æŒãƒ»å­¦ç¿’è¨˜éŒ²ä¿è­· | â­â­ |
| **Aggressive** | Moderate + è¿½åŠ çš„å¤§é‡å‰Šé™¤<br>ãƒ‡ãƒãƒƒã‚°ç”¨ãƒªã‚½ãƒ¼ã‚¹ | MLãƒ¢ãƒ‡ãƒ«ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ä¿è­· | â­ |

## ğŸ“ ä½¿ç”¨æ–¹æ³•ãƒ»ä¾‹

### **è‡ªå‹•å®Ÿè¡Œï¼ˆæ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ»Phase 19å¯¾å¿œï¼‰**
```bash
# é€šå¸¸ã®é–‹ç™ºãƒ•ãƒ­ãƒ¼ï¼ˆè‡ªå‹•CI/CDå®Ÿè¡Œï¼‰
git add .
git commit -m "feat: Phase 19ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»MLOpsåŸºç›¤å®Œæˆ"
git push origin main  # è‡ªå‹•çš„ã«ci.ymlå®Ÿè¡Œé–‹å§‹

# å®Ÿè¡ŒçŠ¶æ³ç¢ºèª
gh run list --limit 5
gh run watch  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
```

### **MLãƒ¢ãƒ‡ãƒ«å­¦ç¿’æ‰‹å‹•å®Ÿè¡Œï¼ˆPhase 19æ–°è¦ï¼‰**
```bash
# GitHub CLIä½¿ç”¨
gh workflow run model-training.yml                              # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ180æ—¥å­¦ç¿’
gh workflow run model-training.yml -f training_days=365         # 365æ—¥å­¦ç¿’
gh workflow run model-training.yml -f dry_run=true              # ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³å®Ÿè¡Œ

# å­¦ç¿’çµæœç¢ºèª
gh run list --workflow=model-training.yml --limit 5
gh run view [RUN_ID] --log | grep "ãƒ¢ãƒ‡ãƒ«å“è³ªæ¤œè¨¼"
```

### **æ‰‹å‹•å®Ÿè¡Œ**
```bash
# GitHub CLIä½¿ç”¨
gh workflow run ci.yml                           # ãƒ¡ã‚¤ãƒ³CI/CD
gh workflow run model-training.yml               # MLè‡ªå‹•å­¦ç¿’
gh workflow run cleanup.yml -f cleanup_level=safe  # ãƒªã‚½ãƒ¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

# ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ãå®Ÿè¡Œ
gh workflow run ci.yml -f deploy_mode=stage-10   # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
gh workflow run cleanup.yml -f cleanup_level=moderate  # ä¸­ç¨‹åº¦ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

### **å®Ÿè¡ŒçŠ¶æ³ç¢ºèªãƒ»ãƒ‡ãƒãƒƒã‚°ï¼ˆPhase 19å¯¾å¿œï¼‰**
```bash
# å®Ÿè¡Œå±¥æ­´ç¢ºèª
gh run list --workflow=ci.yml --limit 10
gh run list --workflow=model-training.yml --limit 5

# è©³ç´°ãƒ­ã‚°ç¢ºèª
gh run view [RUN_ID] --log
gh run view [RUN_ID] --log | grep -i "ç‰¹å¾´é‡\|feature"

# å¤±æ•—æ™‚ã®ãƒ‡ãƒãƒƒã‚°
gh run view [RUN_ID] --log | grep -i error
gh run download [RUN_ID]  # ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

## âš ï¸ æ³¨æ„äº‹é …ãƒ»åˆ¶ç´„

### **å®Ÿè¡Œæ™‚é–“ãƒ»ãƒªã‚½ãƒ¼ã‚¹åˆ¶ç´„ï¼ˆPhase 19æ‹¡å¼µï¼‰**
- **å“è³ªãƒã‚§ãƒƒã‚¯**: æœ€å¤§30åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ654ãƒ†ã‚¹ãƒˆå¯¾å¿œï¼‰
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: æœ€å¤§45åˆ†ï¼ˆDockeræ§‹ç¯‰å«ã‚€ï¼‰
- **MLå­¦ç¿’**: æœ€å¤§45åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆãƒ¢ãƒ‡ãƒ«å­¦ç¿’ãƒ»æ¤œè¨¼ãƒ»ã‚³ãƒŸãƒƒãƒˆï¼‰
- **åŒæ™‚å®Ÿè¡Œåˆ¶é™**: mainãƒ–ãƒ©ãƒ³ãƒã§ã¯1ã¤ãšã¤é †æ¬¡å®Ÿè¡Œ
- **ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™**: GitHub Actionsç„¡æ–™æ æœˆ2000åˆ†

### **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»æ¨©é™ç®¡ç†**
- **Secretså¿…é ˆ**: WORKLOAD_IDENTITY_PROVIDERãƒ»SERVICE_ACCOUNT
- **GCPæ¨©é™**: Cloud Runãƒ»Artifact Registryãƒ»Secret Managerãƒ»GitHub Actionsçµ±åˆ
- **ãƒ–ãƒ©ãƒ³ãƒä¿è­·**: mainãƒ–ãƒ©ãƒ³ãƒç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥åˆ¶é™æ¨å¥¨
- **APIã‚­ãƒ¼**: å®Ÿéš›ã®Bitbank APIèªè¨¼æƒ…å ±ã¯æœ¬ç•ªç’°å¢ƒã®ã¿
- **Gitèªè¨¼**: GITHUB_TOKENãƒ»è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãƒ»ãƒ—ãƒƒã‚·ãƒ¥æ¨©é™

### **MLOpsåˆ¶ç´„ï¼ˆPhase 19æ–°è¦ï¼‰**
- **ãƒ¢ãƒ‡ãƒ«å“è³ª**: 12ç‰¹å¾´é‡çµ±ä¸€ãƒ»æ¤œè¨¼å¤±æ•—æ™‚ã¯å­¦ç¿’åœæ­¢
- **Gitç®¡ç†**: models/ãƒ•ã‚©ãƒ«ãƒ€è‡ªå‹•ã‚³ãƒŸãƒƒãƒˆãƒ»å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«æ³¨æ„
- **å­¦ç¿’ãƒ‡ãƒ¼ã‚¿**: Bitbank APIåˆ¶é™ãƒ»éå»ãƒ‡ãƒ¼ã‚¿å–å¾—åˆ¶ç´„
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**: è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç›£è¦–å¿…è¦

## ğŸ”— é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ä¾å­˜é–¢ä¿‚

### **Phase 19æ–°è¦è¨­å®šé€£æº**
- **`src/core/config/feature_manager.py`**: ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»CI/CDæ¤œè¨¼çµ±åˆ
- **`config/core/feature_order.json`**: 12ç‰¹å¾´é‡å®šç¾©ãƒ»å˜ä¸€çœŸå®Ÿæºãƒ»å“è³ªãƒã‚§ãƒƒã‚¯
- **`scripts/ml/create_ml_models.py`**: Gitæƒ…å ±è¿½è·¡ãƒ»è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»MLOpsçµ±åˆ
- **`.github/workflows/model-training.yml`**: é€±æ¬¡è‡ªå‹•å­¦ç¿’ãƒ»å“è³ªæ¤œè¨¼ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

### **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«é€£æº**
- **`scripts/testing/checks.sh`**: å“è³ªãƒã‚§ãƒƒã‚¯å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ»654ãƒ†ã‚¹ãƒˆãƒ»30ç§’é«˜é€Ÿå®Ÿè¡Œ
- **`pyproject.toml`**: pytestãƒ»coverageè¨­å®šãƒ»59.24%é”æˆãƒ»ä¼æ¥­ç´šå“è³ªåŸºæº–
- **`requirements.txt`**: Pythonä¾å­˜é–¢ä¿‚ãƒ»GitHub Actionsç’°å¢ƒå†ç¾
- **`Dockerfile`**: ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸æ§‹ç¯‰ãƒ»Phase 19å¯¾å¿œãƒ»æœ¬ç•ªç’°å¢ƒè¨­å®š

### **é‡è¦ãªå¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ **
- **GCP Cloud Run**: æœ¬ç•ªç¨¼åƒç’°å¢ƒãƒ»ã‚ªãƒ¼ãƒˆã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ»HTTPSãƒ»Phase 19å¯¾å¿œ
- **Artifact Registry**: Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ç®¡ç†ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³
- **Secret Manager**: APIèªè¨¼æƒ…å ±ãƒ»å®‰å…¨ãªæ©Ÿå¯†æƒ…å ±ç®¡ç†
- **GitHub Actions**: CI/CDãƒ»MLOpsãƒ»è‡ªå‹•åŒ–ãƒ»654ãƒ†ã‚¹ãƒˆçµ±åˆ

### **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…çµ±åˆï¼ˆPhase 19å®Œå…¨å¯¾å¿œï¼‰**
- **`src/`**: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ãƒ»654ãƒ†ã‚¹ãƒˆå¯¾è±¡ãƒ»ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†å¯¾å¿œ
- **`tests/`**: 654ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãƒ»59.24%ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»è‡ªå‹•å®Ÿè¡Œãƒ»ç‰¹å¾´é‡æ¤œè¨¼
- **`models/`**: MLãƒ¢ãƒ‡ãƒ«ãƒ»è‡ªå‹•ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»Gitæƒ…å ±è¿½è·¡ãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
- **`.cache/`**: ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»CI/CDæˆæœç‰©ãƒ»MLOpsçµ±åˆ

## ğŸ“Š Phase 19æˆæœãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### **å“è³ªä¿è¨¼å®Ÿç¸¾ï¼ˆPhase 19å®Œå…¨é”æˆï¼‰**
```
ğŸ¯ ãƒ†ã‚¹ãƒˆæˆåŠŸç‡: 654ãƒ†ã‚¹ãƒˆ100%åˆæ ¼ï¼ˆç‰¹å¾´é‡å®šç¾©ä¸€å…ƒåŒ–å®Œæˆï¼‰
ğŸ“Š ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆ: 59.24%ï¼ˆç›®æ¨™50%ã‚’å¤§å¹…ä¸Šå›ã‚‹ä¼æ¥­ç´šå“è³ªï¼‰
âš¡ å®Ÿè¡Œæ™‚é–“: å“è³ªãƒã‚§ãƒƒã‚¯ç´„30ç§’ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤4-6åˆ†
ğŸš€ æˆåŠŸç‡: CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³99%ä»¥ä¸ŠæˆåŠŸ
ğŸ”§ ã‚³ãƒ¼ãƒ‰å“è³ª: flake8ãƒ»blackãƒ»isort 100%åˆæ ¼
ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£: APIç’°å¢ƒå¤‰æ•°ä¿è­·ãƒ»ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»ä¿å®ˆæ€§å‘ä¸Š
```

### **MLOpsåŸºç›¤ç¢ºç«‹å®Ÿç¸¾ï¼ˆPhase 19æ–°è¦é”æˆï¼‰**
```
ğŸ¤– é€±æ¬¡è‡ªå‹•å­¦ç¿’: model-training.ymlå®Œå…¨ç¨¼åƒãƒ»180æ—¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå­¦ç¿’
ğŸ“Š 12ç‰¹å¾´é‡çµ±ä¸€: feature_manager.pyçµ±åˆãƒ»feature_order.jsonå˜ä¸€çœŸå®Ÿæº
ğŸ”„ Gitæƒ…å ±è¿½è·¡: commit hashãƒ»branchãƒ»timestampãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å®Œå…¨è¨˜éŒ²
ğŸ“ è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–: models/archive/ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»å±¥æ­´ä¿å­˜
âœ… å“è³ªæ¤œè¨¼çµ±åˆ: 12ç‰¹å¾´é‡ãƒã‚§ãƒƒã‚¯ãƒ»ProductionEnsembleæ¤œè¨¼
ğŸš€ CI/CDçµ±åˆ: GitHub Actionsãƒ»è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»é€šçŸ¥ãƒ»å“è³ªã‚²ãƒ¼ãƒˆ
```

### **GCPã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Ÿç¸¾ï¼ˆPhase 19é‹ç”¨æœ€é©åŒ–ï¼‰**
```
ğŸ’° ã‚³ã‚¹ãƒˆå‰Šæ¸›: 9æœˆ3æ—¥ä»¥å‰ãƒ‡ãƒ¼ã‚¿å®Œå…¨å‰Šé™¤ãƒ»30%ã‚³ã‚¹ãƒˆå‰Šæ¸›é”æˆ
ğŸ—‘ï¸ ãƒªã‚½ãƒ¼ã‚¹æœ€é©åŒ–: Dockerç”»åƒãƒ»Cloud Runãƒªãƒ“ã‚¸ãƒ§ãƒ³ãƒ»å¤ã„ãƒ“ãƒ«ãƒ‰å‰Šé™¤
ğŸ“… å®šæœŸå®Ÿè¡Œ: æœˆæ¬¡ç¬¬1æ—¥æ›œæ—¥ãƒ»è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ»é‹ç”¨åŠ¹ç‡åŒ–
âš ï¸ å®‰å…¨æ€§ç¢ºä¿: æœ¬ç•ªç¨¼åƒç¢ºèªãƒ»æ®µéšçš„å‰Šé™¤ãƒ»å±¥æ­´ç®¡ç†
ğŸ“Š å±¥æ­´ç®¡ç†: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—è¨˜éŒ²ãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒ»é‹ç”¨æ”¯æ´
```

### **è‡ªå‹•åŒ–åŠ¹æœï¼ˆPhase 19å®Œå…¨çµ±åˆï¼‰**
```
ğŸ“‰ æ‰‹å‹•ä½œæ¥­å‰Šæ¸›: 85%å‰Šæ¸›ï¼ˆå“è³ªãƒã‚§ãƒƒã‚¯ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»MLå­¦ç¿’ãƒ»ç›£è¦–ï¼‰
ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼é˜²æ­¢: è‡ªå‹•å“è³ªã‚²ãƒ¼ãƒˆãƒ»å›å¸°ãƒ†ã‚¹ãƒˆãƒ»ç‰¹å¾´é‡æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
ğŸ’° é‹ç”¨åŠ¹ç‡: MLOpsè‡ªå‹•åŒ–ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»GCPã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—çµ±åˆ
â±ï¸ ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ : é–‹ç™ºâ†’æœ¬ç•ª 4-10åˆ†ï¼ˆå¾“æ¥60åˆ†â†’90%çŸ­ç¸®ï¼‰
ğŸ”„ ãƒ‡ãƒ—ãƒ­ã‚¤é »åº¦: é€±1å›â†’æ—¥æ¬¡å¯èƒ½ãƒ»è¿…é€Ÿãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ»MLå­¦ç¿’çµ±åˆ
```

### **é‹ç”¨æŒ‡æ¨™ï¼ˆPhase 19ä¼æ¥­ç´šå“è³ªï¼‰**
```
ğŸ“ˆ ç¨¼åƒç‡: >99%ï¼ˆè‡ªå‹•ç›£è¦–ãƒ»è¿…é€Ÿå¾©æ—§ãƒ»MLOpsçµ±åˆï¼‰
ğŸ” ç›£è¦–ç²¾åº¦: 15åˆ†é–“éš”ãƒ»ç•°å¸¸æ¤œçŸ¥ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆè‡ªå‹•åŒ–
ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: å¹³å‡å¿œç­”æ™‚é–“200msãƒ»99%ile 1ç§’ä»¥ä¸‹
ğŸš¨ ã‚¢ãƒ©ãƒ¼ãƒˆç²¾åº¦: èª¤æ¤œçŸ¥<3%ãƒ»é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆ100%æ¤œçŸ¥
ğŸ”§ å¾©æ—§æ™‚é–“: å¹³å‡5åˆ†ï¼ˆè‡ªå‹•ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»MLãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæˆ»ã—å¯¾å¿œï¼‰
```

---

**ğŸ¯ Phase 19å®Œäº†ãƒ»MLOpsåŸºç›¤ç¢ºç«‹**: ç‰¹å¾´é‡å®šç¾©ä¸€å…ƒåŒ–ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ”¹è‰¯ãƒ»å®šæœŸå†å­¦ç¿’CIå®Œæˆã«ã‚ˆã‚Šã€12ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»Gitæƒ…å ±è¿½è·¡ãƒ»é€±æ¬¡è‡ªå‹•å­¦ç¿’ãƒ»ä¼æ¥­ç´šå“è³ªä¿è¨¼ã‚’å®Ÿç¾ã—ãŸCI/CDã‚·ã‚¹ãƒ†ãƒ ãŒã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®è‡ªå‹•åŒ–ãƒ»åŠ¹ç‡æ€§ãƒ»å®‰å®šæ€§ãƒ»MLOpsçµ±åˆã‚’å®Œå…¨é”æˆ**

## ğŸš€ Phase 19å®Œäº†è¨˜éŒ²ãƒ»MLOpsåŸºç›¤ç¢ºç«‹é”æˆ

**å®Œäº†æ—¥æ™‚**: 2025å¹´9æœˆ4æ—¥ï¼ˆPhase 19 MLOpsåŸºç›¤ç¢ºç«‹å®Œæˆï¼‰  
**Phase 19ä¸»è¦é”æˆ**: 
- âœ… **ç‰¹å¾´é‡å®šç¾©ä¸€å…ƒåŒ–å®Œæˆ** (feature_manager.pyãƒ»12ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ãƒ»CI/CDæ¤œè¨¼çµ±åˆ)
- âœ… **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ æ”¹è‰¯** (Gitæƒ…å ±è¿½è·¡ãƒ»è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†)
- âœ… **å®šæœŸå†å­¦ç¿’CIå®Œæˆ** (model-training.ymlãƒ»é€±æ¬¡è‡ªå‹•å®Ÿè¡Œãƒ»å“è³ªæ¤œè¨¼çµ±åˆ)
- âœ… **å“è³ªä¿è¨¼ä½“åˆ¶å®Œæˆ** (654ãƒ†ã‚¹ãƒˆ100%ãƒ»59.24%ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»ä¼æ¥­ç´šæ°´æº–)
- âœ… **MLOpsåŸºç›¤ç¢ºç«‹** (CI/CDãƒ»MLå­¦ç¿’ãƒ»å“è³ªæ¤œè¨¼ãƒ»é‹ç”¨ç®¡ç†å®Œå…¨çµ±åˆ)

**ç¶™ç¶šé‹ç”¨ä½“åˆ¶**:
- ğŸ¯ **æœ¬ç•ªè‡ªå‹•å–å¼•**: ç‰¹å¾´é‡çµ±ä¸€ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰å®‰å®šç¨¼åƒ
- ğŸ¤– **MLOpsè‡ªå‹•åŒ–**: é€±æ¬¡è‡ªå‹•å­¦ç¿’ãƒ»Gitæƒ…å ±è¿½è·¡ãƒ»å“è³ªæ¤œè¨¼ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
- ğŸ“Š **å“è³ªä¿è¨¼ç¶™ç¶š**: 654ãƒ†ã‚¹ãƒˆãƒ»59.24%ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»ä¼æ¥­ç´šCI/CDãƒ»å›å¸°é˜²æ­¢