# config/core/ - ã‚³ã‚¢è¨­å®šãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**Phase 13å®Œäº†**: å…¨ç’°å¢ƒå…±é€šã®åŸºæœ¬è¨­å®šã¨ã‚·ã‚¹ãƒ†ãƒ å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†ãƒ»æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ï¼ˆliveï¼‰å®Œå…¨ç§»è¡Œãƒ»ã‚·ã‚¹ãƒ†ãƒ æœ€é©åŒ–ãƒ»CI/CDå“è³ªä¿è¨¼å®Œå…¨çµ±åˆå¯¾å¿œå®Œäº†

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
core/
â”œâ”€â”€ README.md               # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ base.yaml              # åŸºæœ¬è¨­å®šï¼ˆå…¨ç’°å¢ƒå…±é€šï¼‰
â””â”€â”€ feature_order.json     # ç‰¹å¾´é‡å®šç¾©ï¼ˆPhase 3å®Œäº†ï¼‰
```

## ğŸ”§ ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°

### base.yaml - åŸºæœ¬è¨­å®š
**ç›®çš„**: å…¨ç’°å¢ƒï¼ˆdevelopment/staging/production/validationï¼‰ã§å…±é€šã®åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

**å†…å®¹**:
- ã‚·ã‚¹ãƒ†ãƒ åŸºæœ¬è¨­å®šï¼ˆåå‰ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»ãƒ¢ãƒ¼ãƒ‰ï¼‰
- å–å¼•æ‰€åŸºæœ¬è¨­å®šï¼ˆBitbankãƒ»BTC/JPYãƒ»ãƒ¬ãƒãƒ¬ãƒƒã‚¸ï¼‰
- ç‰¹å¾´é‡å®šç¾©ï¼ˆ12å€‹å³é¸ã‚·ã‚¹ãƒ†ãƒ ï¼‰
- ãƒ‡ãƒ¼ã‚¿å–å¾—è¨­å®šï¼ˆã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰

**è¨­å®šä¾‹ï¼ˆPhase 13å¯¾å¿œï¼‰**:
```yaml
system:
  name: "crypto-bot-base"
  version: "13.0.0"
  
exchange:
  name: "bitbank"
  symbol: "BTC/JPY"
  leverage: 1.0
  rate_limit: 30000
  
# Phase 13: æœ¬ç•ªé‹ç”¨è¨­å®šçµ±åˆãƒ»sklearnè­¦å‘Šè§£æ¶ˆå¯¾å¿œ
production:
  min_order_size: 0.0001
  max_order_size: 0.001
  margin_trading: true
  
# Phase 13: ç›£è¦–ãƒ»CI/CDå“è³ªä¿è¨¼å®Œå…¨çµ±åˆãƒ»MLãƒ¢ãƒ‡ãƒ«å“è³ªç®¡ç†
monitoring:
  health_check:
    enabled: true
    interval_seconds: 30
  performance:
    enabled: true
    metrics_interval: 300
    
features:
  mode: "optimized"
  basic: ["close", "volume", "returns_1"]
  technical: ["rsi_14", "macd", "atr_14", "bb_position", "ema_20", "ema_50"]
  anomaly: ["zscore", "volume_ratio", "market_stress"]
```

### feature_order.json - ç‰¹å¾´é‡å®šç¾©
**ç›®çš„**: Phase 3å®Œäº†ã®12å€‹å³é¸ç‰¹å¾´é‡ã‚·ã‚¹ãƒ†ãƒ ã®æ­£å¼å®šç¾©

**Phase 3å‰Šæ¸›å®Ÿç¸¾**:
- **å‰Šæ¸›å‰**: 97å€‹ç‰¹å¾´é‡ï¼ˆãƒ¬ã‚¬ã‚·ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ï¼‰
- **å‰Šæ¸›å¾Œ**: 12å€‹ç‰¹å¾´é‡ï¼ˆ87.6%å‰Šæ¸›ï¼‰
- **ã‚«ãƒ†ã‚´ãƒª**: basic(3) + technical(6) + anomaly(3)

**æ§‹é€ **:
```json
{
  "feature_order_version": "v2.0.0",
  "total_features": 12,
  "feature_categories": {
    "basic": ["close", "volume", "returns_1"],
    "technical": ["rsi_14", "macd", "atr_14", "bb_position", "ema_20", "ema_50"],
    "anomaly": ["zscore", "volume_ratio", "market_stress"]
  },
  "feature_definitions": {
    // å„ç‰¹å¾´é‡ã®è©³ç´°å®šç¾©
  }
}
```

**é‡è¦åº¦åˆ†é¡**:
- **Critical**: close, rsi_14, atr_14
- **High**: volume, returns_1, macd, ema_20, ema_50
- **Medium**: bb_position, zscore, volume_ratio
- **Low**: market_stress

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### Python ã§ã®èª­ã¿è¾¼ã¿
```python
from src.core.config import Config

# åŸºæœ¬è¨­å®šèª­ã¿è¾¼ã¿
base_config = Config.load_from_file('config/core/base.yaml')

# ç‰¹å¾´é‡å®šç¾©èª­ã¿è¾¼ã¿
import json
with open('config/core/feature_order.json', 'r') as f:
    feature_order = json.load(f)

print(f"ä½¿ç”¨ç‰¹å¾´é‡æ•°: {feature_order['total_features']}")
```

### è¨­å®šç¶™æ‰¿
ä»–ã®ç’°å¢ƒè¨­å®šã¯ã€ã“ã®åŸºæœ¬è¨­å®šã‚’ç¶™æ‰¿ãƒ»æ‹¡å¼µã™ã‚‹å½¢ã§ä½œæˆï¼š

```yaml
# development/local.yaml ã®ä¾‹
# config/core/base.yaml ã®è¨­å®šã‚’ç¶™æ‰¿
<<: *base_config

# é–‹ç™ºç’°å¢ƒå›ºæœ‰ã®è¨­å®šã‚’è¿½åŠ ãƒ»ä¸Šæ›¸ã
system:
  mode: "paper"
  debug: true
  log_level: "DEBUG"
```

## ğŸ”’ å¤‰æ›´ç®¡ç†

### å¤‰æ›´æ™‚ã®æ³¨æ„
1. **ä¸‹ä½äº’æ›æ€§**: æ—¢å­˜ç’°å¢ƒè¨­å®šã«å½±éŸ¿ã—ãªã„ã‚ˆã†æ³¨æ„
2. **æ¤œè¨¼å¿…é ˆ**: å¤‰æ›´å¾Œã¯å…¨ç’°å¢ƒã§ã®å‹•ä½œç¢ºèª
3. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: å¤‰æ›´å‰ã®è¨­å®šã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

### å¤‰æ›´æ‰‹é †
```bash
# 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
cp config/core/base.yaml config/core/base.yaml.backup

# 2. è¨­å®šå¤‰æ›´
nano config/core/base.yaml

# 3. å…¨ç’°å¢ƒæ¤œè¨¼
python3 -c "
from src.core.config import Config
environments = ['development/local.yaml', 'staging/stage_10percent.yaml', 'production/production.yaml']
for env in environments:
    config = Config.load_from_file(f'config/{env}')
    assert config.validate(), f'{env} validation failed'
print('âœ… All environments validated')
"
```

## ğŸ“Š ç‰¹å¾´é‡ã‚·ã‚¹ãƒ†ãƒ è©³ç´°

### Phase 3å®Œäº†ã®æˆæœ
- **ã‚³ãƒ¼ãƒ‰å‰Šæ¸›**: 97â†’12å€‹ç‰¹å¾´é‡ï¼ˆ87.6%å‰Šæ¸›ï¼‰
- **æ€§èƒ½å‘ä¸Š**: è¨ˆç®—ã‚³ã‚¹ãƒˆå¤§å¹…å‰Šæ¸›ãƒ»ãƒ¡ãƒ¢ãƒªåŠ¹ç‡åŒ–
- **ç²¾åº¦ç¶­æŒ**: é‡è¦ç‰¹å¾´é‡å³é¸ã«ã‚ˆã‚Šç²¾åº¦ä½ä¸‹ãªã—

### ã‚«ãƒ†ã‚´ãƒªåˆ¥èª¬æ˜

**basic (åŸºæœ¬æƒ…å ±)**:
- `close`: çµ‚å€¤ï¼ˆæœ€é‡è¦ï¼‰
- `volume`: å‡ºæ¥é«˜ï¼ˆæµå‹•æ€§æŒ‡æ¨™ï¼‰
- `returns_1`: 1æœŸé–“ãƒªã‚¿ãƒ¼ãƒ³ï¼ˆãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ï¼‰

**technical (ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™)**:
- `rsi_14`: 14æœŸé–“RSIï¼ˆè²·ã‚ã‚Œéããƒ»å£²ã‚‰ã‚Œéãï¼‰
- `macd`: MACDï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ï¼‰
- `atr_14`: 14æœŸé–“ATRï¼ˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰
- `bb_position`: ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ä½ç½®ï¼ˆä¾¡æ ¼ä½ç½®ï¼‰
- `ema_20`: 20æœŸé–“EMAï¼ˆçŸ­æœŸãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
- `ema_50`: 50æœŸé–“EMAï¼ˆä¸­æœŸãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰

**anomaly (ç•°å¸¸æ¤œçŸ¥)**:
- `zscore`: ä¾¡æ ¼Zã‚¹ã‚³ã‚¢ï¼ˆçµ±è¨ˆçš„ç•°å¸¸ï¼‰
- `volume_ratio`: å‡ºæ¥é«˜æ¯”ç‡ï¼ˆæµå‹•æ€§ç•°å¸¸ï¼‰
- `market_stress`: ãƒãƒ¼ã‚±ãƒƒãƒˆã‚¹ãƒˆãƒ¬ã‚¹ï¼ˆå¸‚å ´åœ§åŠ›ï¼‰

---

## ğŸ“Š Phase 13çµ±åˆå¯¾å¿œ

### **æœ€é©åŒ–ãƒ»æ–°æ©Ÿèƒ½è¿½åŠ é …ç›®**
- **sklearnè­¦å‘Šå®Œå…¨è§£æ¶ˆ**: ProductionEnsembleãƒ»create_ml_models.pyç‰¹å¾´é‡åå¯¾å¿œãƒ»è­¦å‘Šæ ¹çµ¶
- **306ãƒ†ã‚¹ãƒˆ100%æˆåŠŸ**: å“è³ªä¿è¨¼å®Œå…¨çµ±åˆãƒ»MLãƒ¢ãƒ‡ãƒ«å“è³ªç®¡ç†ãƒ»å›å¸°é˜²æ­¢ä½“åˆ¶
- **æœ¬ç•ªç¨¼åƒé–‹å§‹**: å®ŸBitbank APIé€£æºãƒ»ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å–å¼•ã‚·ã‚¹ãƒ†ãƒ ãƒ»24æ™‚é–“ç¨¼åƒä½“åˆ¶
- **CI/CDå“è³ªä¿è¨¼çµ±åˆ**: GitHub Actionsãƒ»è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»å“è³ªã‚²ãƒ¼ãƒˆãƒ»MLãƒ¢ãƒ‡ãƒ«å“è³ªç®¡ç†
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–**: Workload Identityãƒ»Secret Managerçµ±åˆãƒ»æœ¬ç•ªé‹ç”¨å¯¾å¿œ

### **Phase 1-13ç´¯ç©åŠ¹æœ**
```
ğŸ“Š è¨­å®šç®¡ç†åŠ¹ç‡: 90%å‘ä¸Šï¼ˆçµ±ä¸€è¨­å®šãƒ™ãƒ¼ã‚¹ãƒ»sklearnè­¦å‘Šè§£æ¶ˆãƒ»å“è³ªä¿è¨¼çµ±åˆï¼‰
ğŸ”§ ç’°å¢ƒæ§‹ç¯‰æ™‚é–“: 70%çŸ­ç¸®ï¼ˆå…±é€šè¨­å®šç¶™æ‰¿ãƒ»çµ±åˆç®¡ç†ãƒ»æœ¬ç•ªç¨¼åƒè‡ªå‹•åŒ–ï¼‰
ğŸ“ˆ è¨­å®šå“è³ª: 99%å‘ä¸Šï¼ˆå‹å®‰å…¨ãƒ»ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»306ãƒ†ã‚¹ãƒˆ100%ãƒ»MLãƒ¢ãƒ‡ãƒ«å“è³ªä¿è¨¼ï¼‰
ğŸ¯ ä¿å®ˆæ€§: 80%å‘ä¸Šï¼ˆä¸­å¤®ç®¡ç†ãƒ»å¤‰æ›´è¿½è·¡ãƒ»çµ±åˆæœ€é©åŒ–ãƒ»Phase 13å®Œæˆï¼‰
```

### **äº’æ›æ€§ç®¡ç†**
- **ä¸‹ä½äº’æ›æ€§**: Phase 1-12è¨­å®šã¨ã®å®Œå…¨äº’æ›æ€§ç¶­æŒãƒ»sklearnè­¦å‘Šè§£æ¶ˆå¯¾å¿œ
- **æ®µéšçš„ç§»è¡Œ**: ç’°å¢ƒåˆ¥ã®è¨­å®šç§»è¡Œã‚µãƒãƒ¼ãƒˆãƒ»æœ¬ç•ªç¨¼åƒçµ±åˆ
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: è¨­å®šå¤‰æ›´æ™‚ã®è‡ªå‹•æ¤œè¨¼ãƒ»ã‚¨ãƒ©ãƒ¼æ¤œå‡ºãƒ»dev_checkçµ±åˆãƒ»MLãƒ¢ãƒ‡ãƒ«å“è³ªä¿è¨¼

---

**é‡è¦**: ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®šã¯Phase 1-13å…¨ç’°å¢ƒã®åŸºç›¤ã¨ãªã‚‹ãŸã‚ã€å¤‰æ›´æ™‚ã¯ç‰¹ã«æ…é‡ã«è¡Œã„ã€å…¨ç’°å¢ƒã§ã®æ¤œè¨¼ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚sklearnè­¦å‘Šè§£æ¶ˆãƒ»306ãƒ†ã‚¹ãƒˆ100%æˆåŠŸãƒ»æœ¬ç•ªç¨¼åƒé–‹å§‹ã«ã‚ˆã‚Šã€å“è³ªä¿è¨¼ä½“åˆ¶ãŒå®Œæˆã—ã¦ã„ã¾ã™ã€‚