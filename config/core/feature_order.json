{
  "feature_order_version": "v2.5.0",
  "phase": "Phase 41",
  "total_features": 55,
  "last_updated": "2025-10-16T12:00:00Z",
  "description": "Phase 41完了: Strategy-Aware ML - 戦略シグナル5個追加（50→55特徴量）",

  "feature_categories": {
    "basic": {
      "description": "基本価格・出来高情報",
      "features": [
        "close",
        "volume"
      ]
    },

    "momentum": {
      "description": "モメンタム指標（2個）",
      "features": [
        "rsi_14",
        "macd"
      ]
    },

    "volatility": {
      "description": "ボラティリティ指標（2個）",
      "features": [
        "atr_14",
        "bb_position"
      ]
    },

    "trend": {
      "description": "トレンド指標（2個）",
      "features": [
        "ema_20",
        "ema_50"
      ]
    },

    "volume": {
      "description": "出来高指標（1個）",
      "features": [
        "volume_ratio"
      ]
    },

    "breakout": {
      "description": "ブレイクアウト指標（3個）",
      "features": [
        "donchian_high_20",
        "donchian_low_20",
        "channel_position"
      ]
    },

    "regime": {
      "description": "市場レジーム指標（3個）",
      "features": [
        "adx_14",
        "plus_di_14",
        "minus_di_14"
      ]
    },

    "lag": {
      "description": "ラグ特徴量（過去N期間の値・10個）",
      "features": [
        "close_lag_1",
        "close_lag_2",
        "close_lag_3",
        "close_lag_5",
        "close_lag_10",
        "volume_lag_1",
        "volume_lag_2",
        "volume_lag_3",
        "rsi_lag_1",
        "macd_lag_1"
      ]
    },

    "rolling": {
      "description": "移動統計量（Rolling Statistics・12個）",
      "features": [
        "close_ma_5",
        "close_ma_10",
        "close_ma_20",
        "close_std_5",
        "close_std_10",
        "close_std_20",
        "close_max_5",
        "close_max_10",
        "close_max_20",
        "close_min_5",
        "close_min_10",
        "close_min_20"
      ]
    },

    "interaction": {
      "description": "交互作用特徴量（Feature Interactions・6個）",
      "features": [
        "rsi_x_atr",
        "macd_x_volume",
        "bb_position_x_volume_ratio",
        "ema_spread_x_adx",
        "close_x_atr",
        "volume_x_bb_position"
      ]
    },

    "time": {
      "description": "時間ベース特徴量（Time-based Features・7個）",
      "features": [
        "hour",
        "day_of_week",
        "is_weekend",
        "is_market_open_hour",
        "month",
        "quarter",
        "is_quarter_end"
      ]
    },

    "strategy_signals": {
      "description": "戦略シグナル特徴量（Strategy Signals・5個）",
      "features": [
        "strategy_signal_ATRBased",
        "strategy_signal_MochipoyAlert",
        "strategy_signal_MultiTimeframe",
        "strategy_signal_DonchianChannel",
        "strategy_signal_ADXTrendStrength"
      ]
    }
  },

  "feature_definitions": {
    "close": {
      "type": "price",
      "description": "終値",
      "range": "positive_float",
      "importance": "critical"
    },
    "volume": {
      "type": "volume",
      "description": "出来高",
      "range": "positive_float",
      "importance": "high"
    },
    "rsi_14": {
      "type": "momentum",
      "description": "14期間RSI",
      "range": "0-100",
      "importance": "critical"
    },
    "macd": {
      "type": "momentum",
      "description": "MACD指標",
      "range": "float",
      "importance": "high"
    },
    "atr_14": {
      "type": "volatility",
      "description": "14期間ATR",
      "range": "positive_float",
      "importance": "critical"
    },
    "bb_position": {
      "type": "volatility",
      "description": "ボリンジャーバンド位置",
      "range": "0-1",
      "importance": "medium"
    },
    "ema_20": {
      "type": "trend",
      "description": "20期間EMA",
      "range": "positive_float",
      "importance": "high"
    },
    "ema_50": {
      "type": "trend",
      "description": "50期間EMA",
      "range": "positive_float",
      "importance": "high"
    },
    "volume_ratio": {
      "type": "anomaly",
      "description": "出来高比率",
      "range": "positive_float",
      "importance": "medium"
    },
    "donchian_high_20": {
      "type": "breakout",
      "description": "20期間最高値",
      "range": "positive_float",
      "importance": "high"
    },
    "donchian_low_20": {
      "type": "breakout",
      "description": "20期間最安値",
      "range": "positive_float",
      "importance": "high"
    },
    "channel_position": {
      "type": "breakout",
      "description": "Donchianチャネル内位置",
      "range": "0-1",
      "importance": "critical"
    },
    "adx_14": {
      "type": "regime",
      "description": "14期間ADX（トレンド強度）",
      "range": "0-100",
      "importance": "critical"
    },
    "plus_di_14": {
      "type": "regime",
      "description": "14期間+DI（上昇方向性）",
      "range": "0-100",
      "importance": "high"
    },
    "minus_di_14": {
      "type": "regime",
      "description": "14期間-DI（下降方向性）",
      "range": "0-100",
      "importance": "high"
    },
    "close_lag_1": {
      "type": "lag",
      "description": "1期間前の終値",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_lag_2": {
      "type": "lag",
      "description": "2期間前の終値",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_lag_3": {
      "type": "lag",
      "description": "3期間前の終値",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_lag_5": {
      "type": "lag",
      "description": "5期間前の終値",
      "range": "positive_float",
      "importance": "low"
    },
    "close_lag_10": {
      "type": "lag",
      "description": "10期間前の終値",
      "range": "positive_float",
      "importance": "low"
    },
    "volume_lag_1": {
      "type": "lag",
      "description": "1期間前の出来高",
      "range": "positive_float",
      "importance": "low"
    },
    "volume_lag_2": {
      "type": "lag",
      "description": "2期間前の出来高",
      "range": "positive_float",
      "importance": "low"
    },
    "volume_lag_3": {
      "type": "lag",
      "description": "3期間前の出来高",
      "range": "positive_float",
      "importance": "low"
    },
    "rsi_lag_1": {
      "type": "lag",
      "description": "1期間前のRSI",
      "range": "0-100",
      "importance": "low"
    },
    "macd_lag_1": {
      "type": "lag",
      "description": "1期間前のMACD",
      "range": "float",
      "importance": "low"
    },
    "close_ma_5": {
      "type": "rolling",
      "description": "5期間移動平均（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_ma_10": {
      "type": "rolling",
      "description": "10期間移動平均（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_ma_20": {
      "type": "rolling",
      "description": "20期間移動平均（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_std_5": {
      "type": "rolling",
      "description": "5期間標準偏差（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_std_10": {
      "type": "rolling",
      "description": "10期間標準偏差（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_std_20": {
      "type": "rolling",
      "description": "20期間標準偏差（終値）",
      "range": "positive_float",
      "importance": "medium"
    },
    "close_max_5": {
      "type": "rolling",
      "description": "5期間最大値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "close_max_10": {
      "type": "rolling",
      "description": "10期間最大値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "close_max_20": {
      "type": "rolling",
      "description": "20期間最大値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "close_min_5": {
      "type": "rolling",
      "description": "5期間最小値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "close_min_10": {
      "type": "rolling",
      "description": "10期間最小値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "close_min_20": {
      "type": "rolling",
      "description": "20期間最小値（終値）",
      "range": "positive_float",
      "importance": "low"
    },
    "rsi_x_atr": {
      "type": "interaction",
      "description": "RSI × ATR（モメンタム×ボラティリティ）",
      "range": "float",
      "importance": "high"
    },
    "macd_x_volume": {
      "type": "interaction",
      "description": "MACD × Volume（モメンタム×出来高）",
      "range": "float",
      "importance": "medium"
    },
    "bb_position_x_volume_ratio": {
      "type": "interaction",
      "description": "BB Position × Volume Ratio",
      "range": "float",
      "importance": "medium"
    },
    "ema_spread_x_adx": {
      "type": "interaction",
      "description": "(EMA20 - EMA50) × ADX（トレンドスプレッド×強度）",
      "range": "float",
      "importance": "high"
    },
    "close_x_atr": {
      "type": "interaction",
      "description": "Close × ATR（価格×ボラティリティ）",
      "range": "float",
      "importance": "low"
    },
    "volume_x_bb_position": {
      "type": "interaction",
      "description": "Volume × BB Position",
      "range": "float",
      "importance": "low"
    },
    "hour": {
      "type": "time",
      "description": "時刻（0-23）",
      "range": "0-23",
      "importance": "medium"
    },
    "day_of_week": {
      "type": "time",
      "description": "曜日（0-6）",
      "range": "0-6",
      "importance": "low"
    },
    "is_weekend": {
      "type": "time",
      "description": "週末フラグ（土日: 1, 平日: 0）",
      "range": "0-1",
      "importance": "low"
    },
    "is_market_open_hour": {
      "type": "time",
      "description": "市場時間フラグ（9-15時JST: 1, それ以外: 0）",
      "range": "0-1",
      "importance": "medium"
    },
    "month": {
      "type": "time",
      "description": "月（1-12）",
      "range": "1-12",
      "importance": "low"
    },
    "quarter": {
      "type": "time",
      "description": "四半期（1-4）",
      "range": "1-4",
      "importance": "low"
    },
    "is_quarter_end": {
      "type": "time",
      "description": "四半期末フラグ（3,6,9,12月: 1, それ以外: 0）",
      "range": "0-1",
      "importance": "low"
    },
    "strategy_signal_ATRBased": {
      "type": "strategy_signal",
      "description": "ATRベース戦略シグナル（action × confidence）",
      "range": "-1.0 to 1.0",
      "importance": "critical",
      "encoding": "buy=+1, hold=0, sell=-1, multiplied by confidence"
    },
    "strategy_signal_MochipoyAlert": {
      "type": "strategy_signal",
      "description": "もちぽよアラート戦略シグナル（action × confidence）",
      "range": "-1.0 to 1.0",
      "importance": "critical",
      "encoding": "buy=+1, hold=0, sell=-1, multiplied by confidence"
    },
    "strategy_signal_MultiTimeframe": {
      "type": "strategy_signal",
      "description": "マルチタイムフレーム戦略シグナル（action × confidence）",
      "range": "-1.0 to 1.0",
      "importance": "critical",
      "encoding": "buy=+1, hold=0, sell=-1, multiplied by confidence"
    },
    "strategy_signal_DonchianChannel": {
      "type": "strategy_signal",
      "description": "Donchianチャネル戦略シグナル（action × confidence）",
      "range": "-1.0 to 1.0",
      "importance": "critical",
      "encoding": "buy=+1, hold=0, sell=-1, multiplied by confidence"
    },
    "strategy_signal_ADXTrendStrength": {
      "type": "strategy_signal",
      "description": "ADXトレンド強度戦略シグナル（action × confidence）",
      "range": "-1.0 to 1.0",
      "importance": "critical",
      "encoding": "buy=+1, hold=0, sell=-1, multiplied by confidence"
    }
  },

  "reduction_history": {
    "original_features": 97,
    "phase3_reduction": {
      "target": 12,
      "achieved": 12,
      "reduction_rate": 0.876,
      "method": "importance_based_selection"
    },
    "phase20_optimization": {
      "target": 15,
      "achieved": 15,
      "optimization_rate": 0.25,
      "method": "strategy_driven_optimization_unused_removal",
      "added_features": ["donchian_high_20", "donchian_low_20", "channel_position", "adx_14", "plus_di_14", "minus_di_14"],
      "removed_features": ["returns_1", "macd_signal", "zscore"]
    },
    "phase29_optimization": {
      "target": "設定重複解消",
      "achieved": "完成",
      "optimization_type": "configuration_unification",
      "method": "duplicate_removal_visual_improvement",
      "improvements": ["設定重複削除", "視覚的改善", "理解しやすさ向上", "unified.yaml・thresholds.yaml分離最適化"]
    },
    "phase40_6_expansion": {
      "target": "Feature Engineering拡張",
      "achieved": 50,
      "expansion_type": "feature_engineering",
      "method": "lag_rolling_interaction_time_features",
      "added_categories": ["lag", "rolling", "interaction", "time"],
      "added_features_count": 35,
      "improvements": ["Lag Features（10個）", "Rolling Statistics（12個）", "Interaction Features（6個）", "Time Features（7個）"]
    },
    "phase41_expansion": {
      "target": "Strategy-Aware ML",
      "achieved": 55,
      "expansion_type": "strategy_integration",
      "method": "strategy_signal_features",
      "added_categories": ["strategy_signals"],
      "added_features_count": 5,
      "improvements": [
        "戦略シグナル特徴量追加（5個）",
        "MLが戦略の専門知識を学習可能に",
        "市場データのみ → 市場データ + 戦略判断の統合",
        "期待効果: F1スコア 0.56-0.59 → 0.65+, ML信頼度 +30-50%"
      ]
    }
  },

  "phase12_enhancements": {
    "monitoring_optimization": {
      "health_check": "enabled",
      "performance_metrics": "enabled",
      "manual_execution": "supported",
      "anomaly_detection": "enhanced"
    },
    "production_optimized": {
      "ci_cd_integration": "optimized",
      "workflow_consolidation": "completed",
      "auto_deployment": "enhanced",
      "rollback_support": "enabled"
    },
    "security_hardening": {
      "workload_identity": "enabled",
      "secret_management": "gcp_integrated",
      "audit_logging": "enabled"
    },
    "quality_assurance": {
      "test_coverage": "70.56%",
      "total_tests": 1078,
      "phase38_completion": "verified"
    }
  },

  "validation": {
    "checksum": "sha256:phase41_def456...",
    "last_validated": "2025-10-16T12:00:00Z",
    "validation_status": "passed",
    "phase41_compliance": "verified",
    "feature_count_validation": "55_features_confirmed",
    "strategy_aware_ml": "completed"
  }
}
