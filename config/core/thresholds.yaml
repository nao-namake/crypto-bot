# ========================================
# å‹•çš„é–¾å€¤è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (thresholds.yaml)
# ========================================
# ç›®çš„: MLçµ±åˆãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹•çš„é–¾å€¤ä¸€å…ƒç®¡ç†
#
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²:
#   1. MLçµ±åˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä¿¡é ¼åº¦é–¾å€¤ãƒ»é‡ã¿ãƒ»ãƒœãƒ¼ãƒŠã‚¹/ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
#   2. å‹•çš„ä¿¡é ¼åº¦è¨ˆç®—ï¼ˆå¸‚å ´ä¸ç¢ºå®Ÿæ€§èª¿æ•´ãƒ»æˆ¦ç•¥åˆ¥ä¿¡é ¼åº¦ç¯„å›²ï¼‰
#   3. æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ5æˆ¦ç•¥ã®é–¾å€¤ãƒ»ä¿¡é ¼åº¦è¨ˆç®—ï¼‰
#   4. ãƒªã‚¹ã‚¯ç®¡ç†è¨­å®šï¼ˆKellyåŸºæº–ãƒ»ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ãƒ»è¨¼æ‹ é‡‘ç¶­æŒç‡ï¼‰
#   5. ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†è¨­å®šï¼ˆTP/SLãƒ»ç·Šæ€¥æ±ºæ¸ˆï¼‰
#   6. Optunaæœ€é©åŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 40æœ€é©åŒ–çµæœï¼‰
#
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åˆ†é›¢:
#   - features.yaml: æ©Ÿèƒ½ã‚ªãƒ³ã‚ªãƒ•
#   - unified.yaml: åŸºæœ¬è¨­å®šï¼ˆexchangeã€modeç­‰ï¼‰
#   - thresholds.yaml: å‹•çš„é–¾å€¤ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
#   - feature_order.json: ç‰¹å¾´é‡å®šç¾©
#
# ä½¿ç”¨æ–¹æ³•:
#   - get_threshold()é–¢æ•°ã§å‹•çš„ã«å‚ç…§ï¼ˆãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ï¼‰
#   - Optunaæœ€é©åŒ–: scripts/optimization/run_phase40_optimization.py
#
# ========================================

# ========================================
# å®Ÿè¡Œè¨­å®šï¼ˆExecution Settingsï¼‰
# ========================================
execution:
  backtest_period_days: 180  # Phase 57.11: ã‚¹ã‚¯ãƒªãƒ—ãƒˆæŒ‡å®š
  # Phase 57.13: å›ºå®šæœŸé–“ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè¨­å®š
  backtest_use_fixed_dates: true       # true: å›ºå®šæœŸé–“, false: ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
  backtest_start_date: "2025-07-01"    # å›ºå®šæœŸé–“é–‹å§‹æ—¥ï¼ˆISOå½¢å¼ï¼‰
  backtest_end_date: "2025-12-31"      # å›ºå®šæœŸé–“çµ‚äº†æ—¥ï¼ˆISOå½¢å¼ï¼‰
  live_mode_interval_seconds: 300
  paper_mode_interval_seconds: 300

# ========================================
# æœ¬ç•ªé‹ç”¨è¨­å®šï¼ˆProduction Settingsï¼‰
# ========================================
# Phase 55.2: ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºè¨­å®šã®ä¸€å…ƒç®¡ç†
# - KellyåŸºæº–ãƒ»ExecutionServiceç­‰ãŒget_threshold()ã§å‚ç…§
# - unified.yamlã‹ã‚‰ç§»å‹•ï¼ˆè¨­å®šé‡è¤‡è§£æ¶ˆï¼‰
# ========================================
production:
  min_order_size: 0.0001  # Bitbankæœ€å°å–å¼•å˜ä½ï¼ˆç´„1,650å††@BTC=16,500,000å††ï¼‰
  max_order_size: 0.15    # Phase 60.1: 0.05â†’0.15ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼‰

# ========================================
# Phase 55.5: ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºçµ±åˆè¨­å®š
# ========================================
# ç›®çš„: min()ã‹ã‚‰ã®åŠ é‡å¹³å‡æ–¹å¼ã¸ç§»è¡Œ
# å•é¡Œ: min()ã ã¨Dynamicï¼ˆBTCé«˜ä¾¡æ ¼ã§æ¥µå°åŒ–ï¼‰ãŒå¸¸ã«ãƒœãƒˆãƒ«ãƒãƒƒã‚¯åŒ–
# è§£æ±º: Kelly 50% / Dynamic 30% / RiskManager 20%ã®åŠ é‡å¹³å‡
# åŠ¹æœ: 0.0001 BTC â†’ ç´„0.009 BTCï¼ˆKellyåŸºæº–ãŒæ´»ã‹ã•ã‚Œã‚‹ï¼‰
# ========================================
position_integrator:
  kelly_weight: 0.5          # Phase 57.9: 70%â†’50%ï¼ˆ12/30è¨­å®šã«å¾©å…ƒï¼‰
  dynamic_weight: 0.3        # Phase 57.9: 20%â†’30%ï¼ˆ12/30è¨­å®šã«å¾©å…ƒï¼‰
  risk_manager_weight: 0.2   # Phase 57.9: 10%â†’20%ï¼ˆ12/30è¨­å®šã«å¾©å…ƒï¼‰

# ========================================
# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè¨­å®šï¼ˆBacktest Settingsï¼‰
# ========================================
backtest:
  log_level: WARNING
  discord_enabled: false
  data_limit: 10000  # Phase 51.10-C: ã‚µãƒ³ãƒ—ãƒ«æ•°ä¸Šé™ï¼ˆ10,000ä»¶ã§åœæ­¢ï¼‰
  progress_interval: 100  # Phase 51.10-C: é€²æ—è¡¨ç¤ºé–“éš”ï¼ˆ100ä»¶æ¯ãƒ»1000â†’100ã«æ”¹å–„ï¼‰
  report_interval: 10000
  mock_api_calls: true
  enable_detailed_logging: false
  fast_data_slicing: true
  data_sampling_ratio: 1.0  # Phase 51.8-10: å…¨ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼ˆbacktest_period_daysã§æœŸé–“åˆ¶é™ï¼‰
  inner_loop_count: 1  # Phase 51.8-J4-H: é«˜é€ŸåŒ–ï¼ˆ1å›å®Ÿè¡Œãƒ»ç´„40åˆ†ï¼‰æ³¨: Phase 51.8-Kå®Œäº†å¾Œã€æœ€çµ‚æ¤œè¨¼æ™‚ã¯3ã«æˆ»ã™

# ========================================
# ğŸŒ å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šè¨­å®šï¼ˆMarket Regime Classificationï¼‰
# ========================================
# Phase 61: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¤å®šé–¾å€¤ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†
#
# ç›®çš„: ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®è„±å´ãƒ»é–¾å€¤èª¿æ•´ã®å®¹æ˜“åŒ–
#
# å¤‰æ›´å±¥æ­´:
#   - Phase 61.1: é–¾å€¤èª¿æ•´ã‚’è©¦è¡Œâ†’PFå¤§å¹…ä½ä¸‹ï¼ˆ1.58â†’1.13ï¼‰
#   - Phase 61.1ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯: Phase 60ã‚ªãƒªã‚¸ãƒŠãƒ«å€¤ã«å¾©å…ƒ
#
# æ³¨: é–¾å€¤ã¯get_threshold()ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ä¸€è‡´ã•ã›ã‚‹ã“ã¨
# ========================================
market_regime:
  tight_range:
    bb_width_threshold: 0.03          # Phase 60ã‚ªãƒªã‚¸ãƒŠãƒ«å€¤ï¼ˆPhase 61.1ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
    price_range_threshold: 0.02       # Phase 60ã‚ªãƒªã‚¸ãƒŠãƒ«å€¤ï¼ˆPhase 61.1ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
  trending:
    adx_threshold: 25                 # Phase 60ã‚ªãƒªã‚¸ãƒŠãƒ«å€¤ï¼ˆPhase 61.1ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
    ema_slope_threshold: 0.01         # Phase 60ã‚ªãƒªã‚¸ãƒŠãƒ«å€¤ï¼ˆPhase 61.1ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
  normal_range:
    bb_width_threshold: 0.05          # ç¶­æŒ
    adx_threshold: 20                 # ç¶­æŒ
  high_volatility:
    atr_ratio_threshold: 0.018        # ç¶­æŒï¼ˆ4æ™‚é–“è¶³æœ€é©åŒ–æ¸ˆã¿ï¼‰

# ========================================
# ğŸ¤– MLçµ±åˆè¨­å®šï¼ˆML Integration Settingsï¼‰
# ========================================
# Phase 41.8.5æœ€é©åŒ–å®Œäº†:
#   - min_ml_confidence: 0.45ï¼ˆ3ã‚¯ãƒ©ã‚¹åˆ†é¡å¯¾å¿œï¼‰
#   - high_confidence_threshold: 0.60ï¼ˆ3ã‚¯ãƒ©ã‚¹åˆ†é¡å¯¾å¿œï¼‰
#   - MLçµ±åˆç‡100%é”æˆï¼ˆ10%â†’100%æ”¹å–„ï¼‰
#   - 3æ®µéšçµ±åˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ<0.45: æˆ¦ç•¥ã®ã¿ãƒ»0.45-0.60: åŠ é‡å¹³å‡ãƒ»â‰¥0.60: ãƒœãƒ¼ãƒŠã‚¹/ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
# ========================================
ml:
  confidence_threshold: 0.3
  allow_dummy_fallback: false
  default_confidence: 0.5
  strategy_integration:
    enabled: true
    ml_weight: 0.35
    strategy_weight: 0.7
    high_confidence_threshold: 0.6
    agreement_bonus: 1.2
    disagreement_penalty: 0.95  # Phase 55.3: 0.90â†’0.95ï¼ˆãƒšãƒŠãƒ«ãƒ†ã‚£ç·©å’Œï¼‰
    min_ml_confidence: 0.32      # Phase 55.3: 0.35â†’0.32ï¼ˆé–¾å€¤ç·©å’Œï¼‰
    hold_conversion_threshold: 0.15  # Phase 55.5: 0.20â†’0.15ï¼ˆHOLDå¤‰æ›ã•ã‚‰ã«ç·©å’Œï¼‰
    min_strategy_confidence: 0.25   # Phase 61.5: æˆ¦ç•¥ä¿¡é ¼åº¦ã®æœ€ä½é–¾å€¤ï¼ˆç•°å¸¸ä½ä¿¡é ¼åº¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼é˜²æ­¢ï¼‰
  # Meta-Learningå‹•çš„é‡ã¿æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ 
  meta_learning:
    enabled: false  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹ï¼ˆæ…é‡ãªæ®µéšçš„æœ‰åŠ¹åŒ–ï¼‰
    model_path: "models/meta_learning/meta_model.pkl"
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å›ºå®šé‡ã¿ï¼ˆMeta-MLå¤±æ•—æ™‚ä½¿ç”¨ï¼‰
    fallback_ml_weight: 0.35
    fallback_strategy_weight: 0.7

  # ========================================
  # Phase 51.9: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥MLçµ±åˆè¨­å®š
  # ========================================
  # Phase 51.8ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœã«åŸºã¥ãæœ€é©åŒ–:
  #   - tight_range: åˆ©ç›Šã®99.4%å¯„ä¸ â†’ æˆ¦ç•¥é‡è¦–ãƒ»MLè£œå®Œæ§ãˆã‚
  #   - normal_range: åˆ©ç›Šã®0.6%å¯„ä¸ãƒ»PF=1.005 â†’ ãƒãƒ©ãƒ³ã‚¹å‹
  #   - trending: æœªç™ºç”Ÿã ãŒå°†æ¥å¯¾å¿œ â†’ MLè£œå®Œé‡è¦–
  #   - high_volatility: ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç¦æ­¢ â†’ è¶…é«˜é–¾å€¤
  # ========================================
  regime_ml_integration:
    enabled: true  # Phase 51.9: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥MLçµ±åˆæœ‰åŠ¹åŒ–

    # tight_rangeï¼ˆç‹­ã„ãƒ¬ãƒ³ã‚¸ï¼‰: æˆ¦ç•¥é‡è¦–å‹
    # Phase 60.4: MLé‡ã¿å‰Šæ¸›ãƒ»æˆ¦ç•¥é‡è¦–è¨­å®šï¼ˆä¸€è‡´ç‡51.9%â†’60%+ç›®æ¨™ï¼‰
    tight_range:
      min_ml_confidence: 0.33           # Phase 60.4: 0.25â†’0.33ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»3ã‚¯ãƒ©ã‚¹æœ€ä½é–¾å€¤ï¼‰
      high_confidence_threshold: 0.55   # Phase 61.5: 0.70â†’0.55ï¼ˆ9%â†’46%ãŒå¯¾è±¡ãƒ»ãƒœãƒ¼ãƒŠã‚¹/ãƒšãƒŠãƒ«ãƒ†ã‚£ç™ºå‹•ç‡å‘ä¸Šï¼‰
      ml_weight: 0.15                   # Phase 60.4: 0.25â†’0.15ï¼ˆMLé‡ã¿å‰Šæ¸›ï¼‰
      strategy_weight: 0.85             # Phase 60.4: 0.75â†’0.85ï¼ˆæˆ¦ç•¥é‡è¦–ï¼‰
      agreement_bonus: 1.25             # Phase 60.4: 1.10â†’1.25ï¼ˆä¸€è‡´æ™‚å‹ç‡66.1%æ´»ç”¨ï¼‰
      disagreement_penalty: 0.70        # Phase 60.4: 0.80â†’0.70ï¼ˆä¸ä¸€è‡´æ™‚å‹ç‡42.5%æŠ‘åˆ¶ï¼‰

    # normal_rangeï¼ˆé€šå¸¸ãƒ¬ãƒ³ã‚¸ï¼‰: ãƒãƒ©ãƒ³ã‚¹å‹
    # Phase 60.4: MLé‡ã¿å‰Šæ¸›ãƒ»æˆ¦ç•¥é‡è¦–è¨­å®šï¼ˆä¸€è‡´ç‡51.9%â†’60%+ç›®æ¨™ï¼‰
    normal_range:
      min_ml_confidence: 0.30           # Phase 60.4: 0.22â†’0.30ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ»3ã‚¯ãƒ©ã‚¹æœ€ä½é–¾å€¤ï¼‰
      high_confidence_threshold: 0.55   # Phase 61.5: 0.65â†’0.55ï¼ˆãƒœãƒ¼ãƒŠã‚¹/ãƒšãƒŠãƒ«ãƒ†ã‚£ç™ºå‹•ç‡å‘ä¸Šï¼‰
      ml_weight: 0.20                   # Phase 60.4: 0.30â†’0.20ï¼ˆMLé‡ã¿å‰Šæ¸›ï¼‰
      strategy_weight: 0.80             # Phase 60.4: 0.70â†’0.80ï¼ˆæˆ¦ç•¥é‡è¦–ï¼‰
      agreement_bonus: 1.25             # Phase 60.4: 1.10â†’1.25ï¼ˆä¸€è‡´æ™‚å‹ç‡66.1%æ´»ç”¨ï¼‰
      disagreement_penalty: 0.70        # Phase 60.4: 0.80â†’0.70ï¼ˆä¸ä¸€è‡´æ™‚å‹ç‡42.5%æŠ‘åˆ¶ï¼‰

    # trendingï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰: MLè£œå®Œé‡è¦–å‹
    # Phase 51.8çµæœ: 0ä»¶ï¼ˆæœªç™ºç”Ÿï¼‰
    # â†’ å®Ÿé¨“çš„è¨­å®šãƒ»MLè£œå®Œã‚’ç©æ¥µæ´»ç”¨
    trending:
      min_ml_confidence: 0.35           # ä½é–¾å€¤ï¼ˆMLè£œå®Œé‡è¦–ï¼‰
      high_confidence_threshold: 0.55
      ml_weight: 0.35                   # ML 35%
      strategy_weight: 0.65             # æˆ¦ç•¥ 65%
      agreement_bonus: 1.25             # MLãƒ»æˆ¦ç•¥ä¸€è‡´æ™‚ãƒœãƒ¼ãƒŠã‚¹å¼·åŒ–
      disagreement_penalty: 0.88        # MLãƒ»æˆ¦ç•¥ä¸ä¸€è‡´æ™‚ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚„ã‚„å¼·åŒ–

    # high_volatilityï¼ˆé«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰: è¶…ä¿å®ˆå‹
    # Phase 51.8çµæœ: 0ä»¶ï¼ˆæœªç™ºç”Ÿãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™0ã§ã‚¨ãƒ³ãƒˆãƒªãƒ¼ç¦æ­¢ï¼‰
    # â†’ è¶…é«˜é–¾å€¤ã§ã»ã¼ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—
    high_volatility:
      min_ml_confidence: 0.80           # è¶…é«˜é–¾å€¤ï¼ˆå®Ÿè³ªã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰
      high_confidence_threshold: 0.90
      ml_weight: 0.10                   # ML 10%
      strategy_weight: 0.90             # æˆ¦ç•¥ 90%
      agreement_bonus: 1.10             # ãƒœãƒ¼ãƒŠã‚¹æœ€å°
      disagreement_penalty: 0.85        # ãƒšãƒŠãƒ«ãƒ†ã‚£æœ€å¼·åŒ–

  # Meta-MLäºˆæ¸¬ä¿¡é ¼åº¦é–¾å€¤
  min_confidence: 0.3
  # å¸‚å ´çŠ¶æ³ç‰¹å¾´é‡è¨­å®š
  market_features:
    # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢é€£
    atr_window: 14
    bb_window: 20
    volatility_ratio_window: 7
    # ãƒˆãƒ¬ãƒ³ãƒ‰é–¢é€£
    ema_short: 20
    ema_long: 50
    adx_window: 14
    trend_strength_threshold: 0.5
    # ãƒ¬ãƒ³ã‚¸åˆ¤å®šé–¢é€£
    donchian_window: 20
    range_threshold: 0.02
  # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°è¨­å®š
  performance_tracking:
    window_days_short: 7
    window_days_long: 30
    min_trades_required: 5
    history_file: "src/core/state/performance_history.json"
  # Meta-MLãƒ¢ãƒ‡ãƒ«è¨­å®š
  model_config:
    n_estimators: 100
    learning_rate: 0.05
    max_depth: 5
    random_state: 42
  dynamic_confidence:
    base_hold: 0.35
    error_fallback: 0.25
    ml_fallback: 0.35
    neutral_default: 0.4
    strategy_fallback: 0.35
    market_uncertainty:
      volatility_factor_max: 0.1
      volatility_divisor: 1.0
      volume_factor_max: 0.06
      volume_multiplier: 0.2
      price_factor_max: 0.04
      uncertainty_max: 0.2
      uncertainty_boost: 1.0
    strategies:
      # DonchianChannelæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®š
      donchian_channel:
        breakout_base: 0.6
        breakout_min: 0.3
        breakout_max: 0.85
        reversal_base: 0.5
        reversal_min: 0.3
        reversal_max: 0.7
        hold_base: 0.4
        hold_min: 0.35
        hold_max: 0.6
        volume_bonus_max: 0.1
        volume_multiplier: 0.2

      # ADXTrendæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®šï¼ˆPhase 51.9-5: ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆä¿®æ­£ï¼‰
      adx_trend:
        strong_base: 0.65
        strong_min: 0.4
        strong_max: 0.85
        moderate_base: 0.5
        moderate_min: 0.35
        moderate_max: 0.7
        weak_base: 0.35
        weak_min: 0.25
        weak_max: 0.5
        hold_base: 0.45
        hold_min: 0.35
        hold_max: 0.6
        default_min: 0.25
        default_max: 0.6
        adx_bonus_max: 0.25
        adx_divisor: 25
        di_bonus_max: 0.15
        di_divisor: 12
        volume_bonus_max: 0.1
        volume_multiplier: 0.15

      # ATRBasedæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®šï¼ˆPhase 51.9-5: strategiesé…ä¸‹ã«ç§»å‹•ï¼‰
      atr_based:
        high_volatility_base: 0.55
        high_volatility_min: 0.35
        high_volatility_max: 0.8
        normal_volatility_base: 0.45
        normal_volatility_min: 0.3
        normal_volatility_max: 0.65
        low_volatility_base: 0.35
        low_volatility_min: 0.25
        low_volatility_max: 0.5
        rsi_base: 0.2
        rsi_multiplier: 0.3
        agreement_max: 0.85
        weak_base: 0.08
        weak_multiplier: 0.1
        volatility_bonus: 1.02
        volatility_max: 0.85
        position_size_base: 0.015       # â† MLè¨“ç·´ã§å‚ç…§ï¼ˆPhase 51.9-5: éšå±¤ä¿®æ­£ã§è§£æ±ºï¼‰
        market_stress_threshold: 0.7
        min_atr_ratio: 0.5
        strength_divisor: 0.2
        strength_normalize: 30.0
  emergency_stop_on_dummy: true
  max_model_failures: 3
  prediction_fallback_confidence: 0.0
  dummy_confidence: 0.5
  model_paths:
    base_path: /app
    local_path: .
    training_path: models/training

# ========================================
# ğŸ“Š å‹•çš„ä¿¡é ¼åº¦è¨ˆç®—ï¼ˆDynamic Confidence Calculationï¼‰
# ========================================
# å¸‚å ´ä¸ç¢ºå®Ÿæ€§ã«åŸºã¥ãä¿¡é ¼åº¦èª¿æ•´ãƒ»æˆ¦ç•¥åˆ¥ä¿¡é ¼åº¦ç¯„å›²è¨­å®š
# ========================================
performance:
  default_latency_ms: 100.0

# ========================================
# ğŸ¯ å‹•çš„æˆ¦ç•¥é¸æŠè¨­å®šï¼ˆDynamic Strategy Selectionï¼‰
# ========================================
# Phase 51.5-A: 3æˆ¦ç•¥æ§‹æˆæœ€é©åŒ–ï¼ˆMochipoyAlertãƒ»MultiTimeframeå‰Šé™¤ï¼‰
#
# ç›®çš„: å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ ï¼ˆtight_range/normal_range/trending/high_volatilityï¼‰ã«å¿œã˜ã¦
#       æˆ¦ç•¥ã®é‡ã¿ã‚’å‹•çš„ã«å¤‰æ›´ã—ã€ãƒ¬ã‚¸ãƒ¼ãƒ ç‰¹æ€§ã«æœ€é©åŒ–ã•ã‚ŒãŸæˆ¦ç•¥é¸æŠã‚’å®Ÿç¾
#
# è¨­å®šæ–¹æ³•:
#   - ãƒ¬ã‚¸ãƒ¼ãƒ å: tight_range, normal_range, trending, high_volatility
#   - æˆ¦ç•¥å: ATRBased, BBReversal, DonchianChannel, StochasticReversal,
#             ADXTrendStrength, MACDEMACrossoverï¼ˆ6æˆ¦ç•¥ï¼‰
#   - é‡ã¿: 0.0-1.0ï¼ˆåˆè¨ˆ1.0ã«ãªã‚‹ã‚ˆã†ã«è¨­å®šï¼‰
#   - high_volatility: å…¨æˆ¦ç•¥ç„¡åŠ¹åŒ–ï¼ˆå…¨ã¦0.0ï¼‰
# ========================================
dynamic_strategy_selection:
  enabled: true  # Phase 51.8-J2: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æˆ¦ç•¥é‡ã¿æœ€é©åŒ–æœ‰åŠ¹åŒ–ï¼ˆãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè©•ä¾¡ï¼‰
  # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æˆ¦ç•¥é‡ã¿ãƒãƒƒãƒ”ãƒ³ã‚°
  # Phase 51.8: 6æˆ¦ç•¥çµ±åˆãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿åˆæœŸå€¤ï¼ˆãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ€é©åŒ–å‰ï¼‰
  regime_strategy_mapping:
    tight_range:  # ç‹­ã„ãƒ¬ãƒ³ã‚¸ç›¸å ´ï¼ˆBBå¹… < 3%, ä¾¡æ ¼å¤‰å‹• < 2%ï¼‰
      # Phase 62.4: DonchianChannelé‡ã¿å¢—åŠ ï¼ˆç«¶äº‰åŠ›å›å¾©ï¼‰
      BBReversal: 0.0           # Phase 62.3: ç„¡åŠ¹åŒ–ç¶­æŒ
      StochasticReversal: 0.35  # Phase 62.4: 45%â†’35%ï¼ˆå‡ç­‰é…åˆ†ï¼‰
      ATRBased: 0.35            # Phase 62.4: 45%â†’35%ï¼ˆå‡ç­‰é…åˆ†ï¼‰
      DonchianChannel: 0.30     # Phase 62.4: 10%â†’30%ï¼ˆç«¶äº‰åŠ›3å€å‘ä¸Šï¼‰
      ADXTrendStrength: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹â†’ç„¡åŠ¹åŒ–
      MACDEMACrossover: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹â†’ç„¡åŠ¹åŒ–
    normal_range:  # é€šå¸¸ãƒ¬ãƒ³ã‚¸ç›¸å ´ï¼ˆBBå¹… < 5%, ADX < 20ï¼‰
      # Phase 59.1: BBReversalç„¡åŠ¹åŒ–ï¼ˆ0%å‹ç‡å•é¡Œï¼‰
      ATRBased: 0.50            # ä¸»åŠ›
      StochasticReversal: 0.30  # è£œåŠ©
      DonchianChannel: 0.20     # è£œåŠ©
      BBReversal: 0.0           # ç„¡åŠ¹åŒ–ï¼ˆ0%å‹ç‡å•é¡Œï¼‰
      ADXTrendStrength: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹â†’ç„¡åŠ¹åŒ–
      MACDEMACrossover: 0.0     # ãƒˆãƒ¬ãƒ³ãƒ‰å‹â†’ç„¡åŠ¹åŒ–
    trending:  # ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ï¼ˆADX > 25, EMAå‚¾ã > 1%ï¼‰
      # Phase 51.8-10: ãƒˆãƒ¬ãƒ³ãƒ‰å‹80/20é…åˆ†ï¼ˆç†è«–çš„åˆæœŸå€¤ï¼‰
      ADXTrendStrength: 0.50    # â†‘ 0.40â†’0.50ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ä¸»åŠ›å¼·åŒ–ï¼‰
      MACDEMACrossover: 0.30    # = 0.30ï¼ˆç¶­æŒï¼‰
      ATRBased: 0.15            # â†“ 0.20â†’0.15ï¼ˆå‰Šæ¸›ï¼‰
      DonchianChannel: 0.05     # â†“ 0.10â†’0.05ï¼ˆå‰Šæ¸›ï¼‰
      BBReversal: 0.0           # = 0.0ï¼ˆç„¡åŠ¹åŒ–ï¼‰
      StochasticReversal: 0.0   # = 0.0ï¼ˆç„¡åŠ¹åŒ–ï¼‰
    high_volatility:  # é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆATRæ¯” > 1.8%ãƒ»4æ™‚é–“è¶³ï¼‰
      # å…¨æˆ¦ç•¥ç„¡åŠ¹åŒ–ï¼ˆå®Œå…¨å¾…æ©Ÿãƒ¢ãƒ¼ãƒ‰ï¼‰
      ATRBased: 0.0
      BBReversal: 0.0
      DonchianChannel: 0.0
      StochasticReversal: 0.0
      ADXTrendStrength: 0.0
      MACDEMACrossover: 0.0

# ========================================
# ğŸ“Š ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™è¨­å®šï¼ˆRegime-Based Position Limitsï¼‰
# ========================================
# Phase 51.8: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™å®Ÿè£…
#
# ç›®çš„: å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ ã«å¿œã˜ã¦ä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°ã‚’å‹•çš„ã«åˆ¶é™ã—ã€
#       ãƒªã‚¹ã‚¯ç®¡ç†ã‚’å¼·åŒ–ãƒ»å¸‚å ´çŠ¶æ³ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†ã‚’å®Ÿç¾
#
# è¨­å®šæ–¹æ³•:
#   - ãƒ¬ã‚¸ãƒ¼ãƒ å: tight_range, normal_range, trending, high_volatility
#   - max_positions: æœ€å¤§åŒæ™‚ä¿æœ‰ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°ï¼ˆ0-5ä»¶ï¼‰
#   - åˆ¶é™è¶…éæ™‚: æ–°è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‹’å¦ï¼ˆreject_on_limit: trueï¼‰
#
# è¨­è¨ˆæ ¹æ‹ :
#   - tight_range: ãƒ¬ãƒ³ã‚¸ç›¸å ´ã¯é€†å¼µã‚Šãƒãƒ£ãƒ³ã‚¹å¤šæ•° â†’ åˆ†æ•£æŠ•è³‡é‡è¦–ï¼ˆ5ä»¶ï¼‰
#   - normal_range: ãƒãƒ©ãƒ³ã‚¹å‹ â†’ é©åº¦ãªåˆ†æ•£ï¼ˆ4ä»¶ï¼‰
#   - trending: ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ã¯é›†ä¸­æŠ•è³‡ â†’ ä¸­ç¨‹åº¦ã®é›†ä¸­ï¼ˆ3ä»¶ï¼‰
#   - high_volatility: å®Œå…¨å¾…æ©Ÿ â†’ æå¤±å›é¿ï¼ˆ0ä»¶ï¼‰
# ========================================
position_limits:
  tight_range:
    max_positions: 6      # Phase 51.8-10: 5â†’6ï¼ˆåˆ†æ•£æŠ•è³‡æœ€å¤§åŒ–ï¼‰
  normal_range:
    max_positions: 4      # ãƒãƒ©ãƒ³ã‚¹å‹ï¼ˆç¶­æŒï¼‰
  trending:
    max_positions: 2      # Phase 51.8-10: 3â†’2ï¼ˆé›†ä¸­æŠ•è³‡ãƒ»æå¤±æœ€å°åŒ–ï¼‰
  high_volatility:
    max_positions: 0      # å®Œå…¨å¾…æ©Ÿï¼ˆç¶­æŒï¼‰
  # ã‚¨ãƒ©ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
  fallback_max_positions: 2    # ãƒ¬ã‚¸ãƒ¼ãƒ æƒ…å ±å–å¾—å¤±æ•—æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
  reject_on_limit: true         # åˆ¶é™è¶…éæ™‚ã¯æ–°è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‹’å¦

# ========================================
# ğŸ¯ æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆStrategy Parametersï¼‰
# ========================================
# 5æˆ¦ç•¥ã®é–¾å€¤ãƒ»ä¿¡é ¼åº¦è¨ˆç®—è¨­å®š
# ========================================
strategies:
  adx_trend:
    # Phase 54.10: HOLDç‡å‰Šæ¸›ã®ãŸã‚é–¾å€¤ç·©å’Œ
    di_crossover_threshold: 0.5
    di_weak_signal_confidence: 0.35
    hold_confidence: 0.45
    min_confidence: 0.25
    moderate_trend_max: 25
    moderate_trend_min: 15
    strong_trend_threshold: 25
    weak_di_threshold: 0.8          # Phase 54.10: 1.0â†’0.8ï¼ˆã‚·ã‚°ãƒŠãƒ«å¢—åŠ ï¼‰
    weak_trend_threshold: 15

    # ========================================
    # Phase 56.9: RSIä¸»å°å‹ãƒ¬ãƒ³ã‚¸é€†å¼µã‚Šãƒ¢ãƒ¼ãƒ‰
    # ========================================
    # Webèª¿æŸ»: ãƒ¬ãƒ³ã‚¸ç›¸å ´ã§ã¯DIã‚ˆã‚ŠRSI+BBãŒæœ‰åŠ¹
    # å¤‰æ›´: DIæ¡ä»¶ã‹ã‚‰RSI+BBä¸»å°ã«å¤‰æ›´ã—ã‚·ã‚°ãƒŠãƒ«å¢—åŠ 
    # ========================================
    range_mode_enabled: true          # ãƒ¬ãƒ³ã‚¸é€†å¼µã‚Šãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
    range_adx_threshold: 20           # ADX < 20 ã§ãƒ¬ãƒ³ã‚¸ãƒ¢ãƒ¼ãƒ‰ï¼ˆå…ƒã«æˆ»ã™ï¼‰

    # Phase 56.9: RSIä¸»å°ãƒˆãƒªã‚¬ãƒ¼ï¼ˆç„¡åŠ¹åŒ–ãƒ»DIãƒ­ã‚¸ãƒƒã‚¯ã«æˆ»ã™ï¼‰
    use_rsi_driven_mode: false        # RSIä¸»å°ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹åŒ–
    rsi_oversold_trigger: 40          # RSI < 40 ã§è²·ã„ã‚·ã‚°ãƒŠãƒ«
    rsi_overbought_trigger: 60        # RSI > 60 ã§å£²ã‚Šã‚·ã‚°ãƒŠãƒ«
    bb_lower_trigger: 0.30            # BBä½ç½® < 0.30 ã§è²·ã„ï¼ˆãƒ‡ãƒ¼ã‚¿åˆ†æã«åŸºã¥ãï¼‰
    bb_upper_trigger: 0.70            # BBä½ç½® > 0.70 ã§å£²ã‚Šï¼ˆãƒ‡ãƒ¼ã‚¿åˆ†æã«åŸºã¥ãï¼‰

    # ä¿¡é ¼åº¦è¨­å®š
    range_signal_confidence: 0.40     # åŸºæœ¬ä¿¡é ¼åº¦
    rsi_extreme_bonus: 0.10           # RSI < 25 or > 75 ãƒœãƒ¼ãƒŠã‚¹
    bb_extreme_bonus: 0.05            # BB < 0.15 or > 0.85 ãƒœãƒ¼ãƒŠã‚¹
    adx_falling_bonus: 0.05           # ADXä¸‹é™ä¸­ãƒœãƒ¼ãƒŠã‚¹

    # å¾“æ¥DIè¨­å®šï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
    di_reversal_threshold: 5.0        # DIå¤‰åŒ–é‡é–¾å€¤
    di_diff_threshold: 8.0            # DIå·®åˆ†é–¾å€¤
    di_divergence_threshold: 12.0     # DIä¹–é›¢é–¾å€¤
    use_di_divergence: false          # DIä¹–é›¢ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹

    # ADXå‹•çš„é–¾å€¤ï¼ˆç¶­æŒï¼‰
    use_dynamic_thresholds: false     # RSIä¸»å°ãƒ¢ãƒ¼ãƒ‰ã§ã¯ç„¡åŠ¹åŒ–
    dynamic_adx_ultra_low: 10
    dynamic_adx_low: 15
    dynamic_di_strict: 6.0
    dynamic_di_normal: 5.0
    dynamic_di_loose: 4.0
    dynamic_conf_high: 0.55
    dynamic_conf_mid: 0.48
    dynamic_conf_low: 0.42
  atr_based:
    # ========================================
    # Phase 57: Phase 55.4è¨­å®šã«å¾©å…ƒï¼ˆPF > 1å®Ÿç¸¾ï¼‰
    # ========================================
    # Phase 56.10ã§BBæ¡ä»¶åŒ–å®Ÿé¨“â†’PFä½ä¸‹â†’å…ƒã«æˆ»ã™
    # Phase 55.4ã®é«˜é–¾å€¤è¨­å®šã§PF 1.16ã‚’é”æˆ
    # ========================================
    # ATRæ¶ˆå°½ç‡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 55.4: é«˜é–¾å€¤ï¼‰
    exhaustion_threshold: 0.70       # Phase 55.4: 0.55â†’0.70ï¼ˆé«˜å“è³ªã‚·ã‚°ãƒŠãƒ«ã®ã¿ï¼‰
    high_exhaustion_threshold: 0.85  # Phase 55.4: 0.70â†’0.85ï¼ˆé«˜ç¢ºä¿¡ã‚·ã‚°ãƒŠãƒ«ï¼‰
    # ãƒ¬ãƒ³ã‚¸ç›¸å ´ãƒ•ã‚£ãƒ«ã‚¿
    adx_range_threshold: 25          # Phase 55.4: 28â†’25ï¼ˆãƒ¬ãƒ³ã‚¸åˆ¤å®šç·©å’Œï¼‰
    # åè»¢æ–¹å‘åˆ¤å®šï¼ˆRSIãƒ¡ã‚¤ãƒ³æ¡ä»¶ï¼‰
    rsi_upper: 60                    # Phase 55.4: 55â†’60ï¼ˆæ˜ç¢ºãªéç†±ã®ã¿ï¼‰
    rsi_lower: 40                    # Phase 55.4: 45â†’40ï¼ˆæ˜ç¢ºãªå£²ã‚‰ã‚Œã™ãã®ã¿ï¼‰
    rsi_confirmation_bonus: 0.05
    # ä¿¡é ¼åº¦è¨­å®š
    min_confidence: 0.35
    hold_confidence: 0.20
    base_confidence: 0.40
    high_confidence: 0.60
    # ã‚¹ã‚³ã‚¢é–¾å€¤
    min_score_threshold: 0.65        # Phase 55.4: 0.55â†’0.65ï¼ˆé«˜å“è³ªã‚·ã‚°ãƒŠãƒ«ã®ã¿ï¼‰
    # BBä½ç½®ç¢ºèªï¼ˆãƒœãƒ¼ãƒŠã‚¹ã¨ã—ã¦ä½¿ç”¨ï¼‰
    bb_position_enabled: true
    bb_position_threshold: 0.20
    bb_as_main_condition: false      # ãƒ¡ã‚¤ãƒ³æ¡ä»¶ã§ã¯ãªããƒœãƒ¼ãƒŠã‚¹ã¨ã—ã¦ä½¿ç”¨
    # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹è¨­å®š
    sl_atr_multiplier: 1.5
  donchian_channel:
    # ========================================
    # Phase 62.2: RSIãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ï¼ˆ21ä»¶ãƒ»71.4%å‹ç‡ â†’ å–å¼•æ•°å¢—åŠ ï¼‰
    # ========================================
    # è¨­è¨ˆæ€æƒ³: ã‚¿ã‚¤ãƒˆãƒ¬ãƒ³ã‚¸å‘ã‘ç›´åˆ—è©•ä¾¡æ–¹å¼
    # - RSIãƒ•ã‚£ãƒ«ã‚¿ã‚’HOLDâ†’ãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ã«å¤‰æ›´
    # - BBä½ç½®ä¸»å°ã§ã‚·ã‚°ãƒŠãƒ«ç™ºç”Ÿ
    # ========================================

    # === ç›´åˆ—è©•ä¾¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 62.1-B: ã•ã‚‰ã«ç·©å’Œï¼‰ ===
    adx_max_threshold: 28           # ç¶­æŒ
    extreme_zone_threshold: 0.18    # Phase 62.1-B: 0.15â†’0.18ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    rsi_oversold: 48                # Phase 62.1-B: 45â†’48ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    rsi_overbought: 52              # Phase 62.1-B: 55â†’52ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰

    # === ä¿¡é ¼åº¦è¨­å®šï¼ˆã‚·ãƒ³ãƒ—ãƒ«åŒ–ï¼‰ ===
    base_confidence: 0.40
    max_confidence: 0.60
    min_confidence: 0.30
    hold_confidence: 0.25

    # === ä¿¡é ¼åº¦ãƒœãƒ¼ãƒŠã‚¹ ===
    extreme_position_bonus: 0.10    # ä½ç½®ãŒæ¥µç«¯ï¼ˆ< 0.05 or > 0.95ï¼‰
    rsi_confirmation_bonus: 0.05   # RSIæ¥µç«¯å€¤ï¼ˆ< 30 or > 70ï¼‰

    # === Phase 62.2: RSIãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ ===
    rsi_as_bonus: true              # RSIã‚’HOLDâ†’ãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ã«
    rsi_mismatch_penalty: 0.08      # RSIä¸ä¸€è‡´æ™‚ã®ä¿¡é ¼åº¦ãƒšãƒŠãƒ«ãƒ†ã‚£
  bb_reversal:
    # ========================================
    # Phase 62.2: BBä½ç½®ä¸»å°ãƒ»RSIãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ï¼ˆ3ä»¶â†’8-12ä»¶æœŸå¾…ï¼‰
    # ========================================
    # è¨­è¨ˆæ€æƒ³: ANDæ¡ä»¶â†’BBä¸»å°ã«å¤‰æ›´
    # - BBä½ç½®ã ã‘ã§ã‚·ã‚°ãƒŠãƒ«ç™ºç”Ÿ
    # - RSIã¯ç¢ºèªï¼ˆãƒœãƒ¼ãƒŠã‚¹ï¼‰ã¨ã—ã¦ä½¿ç”¨
    # ========================================
    min_confidence: 0.25            # ç¶­æŒ
    hold_confidence: 0.20           # ç¶­æŒ
    bb_width_threshold: 0.035       # ç¶­æŒ
    rsi_overbought: 55              # Phase 62.1-B: 58â†’55ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    rsi_oversold: 45                # Phase 62.1-B: 42â†’45ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    bb_upper_threshold: 0.70        # Phase 62.1-B: 0.75â†’0.70ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    bb_lower_threshold: 0.30        # Phase 62.1-B: 0.25â†’0.30ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    adx_range_threshold: 30         # ç¶­æŒ
    sl_multiplier: 1.5              # SL ATRå€ç‡ï¼ˆãƒ¬ãƒ³ã‚¸ç›¸å ´ç”¨ï¼‰

    # === Phase 62.2: BBä½ç½®ä¸»å°ãƒ»RSIãƒœãƒ¼ãƒŠã‚¹åˆ¶åº¦ ===
    bb_primary_mode: true           # BBä½ç½®ä¸»å°ãƒ¢ãƒ¼ãƒ‰ï¼ˆRSIã¯ãƒœãƒ¼ãƒŠã‚¹ï¼‰
    rsi_match_bonus: 0.08           # RSIä¸€è‡´æ™‚ãƒœãƒ¼ãƒŠã‚¹
    rsi_extreme_bonus: 0.05         # RSIæ¥µç«¯å€¤ï¼ˆ<30, >70ï¼‰è¿½åŠ ãƒœãƒ¼ãƒŠã‚¹
    rsi_mismatch_penalty: 0.05      # RSIä¸ä¸€è‡´æ™‚ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼ˆHOLDã§ã¯ãªãå‰Šæ¸›ï¼‰
  stochastic_reversal:
    # ========================================
    # Phase 62.2: æœ€å°ä¾¡æ ¼å¤‰åŒ–ãƒ•ã‚£ãƒ«ã‚¿è¿½åŠ ï¼ˆ44ä»¶ãƒ»54.5%å‹ç‡ â†’ å“è³ªå‘ä¸Šï¼‰
    # ========================================
    # æ ¸å¿ƒæ€æƒ³: ã€Œä¾¡æ ¼ãŒä¸Šæ˜‡ã—ã¦ã„ã‚‹ã®ã«Stochasticã¯ä½ä¸‹ = ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ å¼±åŒ– = åè»¢é–“è¿‘ã€
    # Phase 62.2: å¼±ã„ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹ï¼ˆ0.3%æœªæº€ï¼‰ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    # ========================================

    # === Divergenceè¨­å®šï¼ˆPhase 55.3: ç·©å’Œï¼‰ ===
    divergence_lookback: 5              # ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹æ¤œå‡ºæœŸé–“
    divergence_price_threshold: 0.0010  # ç¶­æŒ
    divergence_stoch_threshold: 4       # ç¶­æŒ

    # === Phase 62.2: æœ€å°ä¾¡æ ¼å¤‰åŒ–ãƒ•ã‚£ãƒ«ã‚¿ ===
    min_price_change_ratio: 0.005       # æœ€å°ä¾¡æ ¼å¤‰åŒ–ï¼ˆ0.5%ä»¥ä¸Šï¼‰
    enable_min_price_filter: true       # ãƒ•ã‚£ãƒ«ã‚¿æœ‰åŠ¹åŒ–

    # === æ¥µç«¯é ˜åŸŸè¨­å®šï¼ˆPhase 62.1-B: ã•ã‚‰ã«ç·©å’Œï¼‰ ===
    stoch_overbought: 60                # Phase 62.1-B: 65â†’60ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰
    stoch_oversold: 40                  # Phase 62.1-B: 35â†’40ï¼ˆã•ã‚‰ã«ç·©å’Œï¼‰

    # === ADXè¨­å®šï¼ˆç¶­æŒï¼‰ ===
    adx_max_threshold: 50               # ç¶­æŒï¼ˆå¼·ãƒˆãƒ¬ãƒ³ãƒ‰é™¤å¤–ã®ã¿ï¼‰

    # === ä¿¡é ¼åº¦è¨­å®šï¼ˆPhase 55.3: ç·©å’Œï¼‰ ===
    min_confidence: 0.25                # 0.30â†’0.25ï¼ˆç·©å’Œï¼‰
    hold_confidence: 0.20               # 0.22â†’0.20ï¼ˆç·©å’Œï¼‰
    base_confidence: 0.32               # 0.35â†’0.32ï¼ˆç·©å’Œï¼‰
    max_confidence: 0.60                # ç¶­æŒ
    zone_bonus: 0.12                    # 0.10â†’0.12ï¼ˆãƒœãƒ¼ãƒŠã‚¹å¢—åŠ ï¼‰

    # === SLè¨­å®š ===
    sl_multiplier: 1.5                  # SL ATRå€ç‡
  macd_ema_crossover:
    # Phase 56.9: å–å¼•æ•°å¢—åŠ ã®ãŸã‚é–¾å€¤ã•ã‚‰ã«ç·©å’Œ
    min_confidence: 0.30            # Phase 54.10: 0.35â†’0.30ï¼ˆå–å¼•æ•°å¢—åŠ ï¼‰
    hold_confidence: 0.25
    adx_trend_threshold: 18         # Phase 56.9: 22â†’18ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰æ¤œå‡ºæ„Ÿåº¦UPï¼‰
    volume_ratio_threshold: 1.0     # Phase 54.10: 1.1â†’1.0ï¼ˆå‡ºæ¥é«˜è¦ä»¶ç·©å’Œï¼‰
    macd_strong_threshold: 50000    # MACDå¼·ã„é–¾å€¤ï¼ˆãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ æ­£è¦åŒ–ç”¨ï¼‰
    ema_divergence_threshold: 0.01  # EMAä¹–é›¢åº¦é–¾å€¤ï¼ˆ1%ï¼‰
    sl_multiplier: 1.5              # SL ATRå€ç‡ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ç”¨ï¼‰

# ========================================
# Phase 61.9: TP/SLè‡ªå‹•åŸ·è¡Œæ¤œçŸ¥è¨­å®š
# ========================================
# ç›®çš„: bitbankãŒTP/SLæ³¨æ–‡ã‚’è‡ªå‹•åŸ·è¡Œã—ãŸéš›ã®æ¤œçŸ¥ãƒ»è¨˜éŒ²
# èƒŒæ™¯: botã¯5-7åˆ†é–“éš”ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€TP/SLç´„å®šã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é€ƒã™
# åŠ¹æœ: SLç´„å®šãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹ â†’ åˆ†æãƒ»æ”¹å–„ãŒå¯èƒ½ã«
# ========================================
tp_sl_auto_detection:
  enabled: true                    # è‡ªå‹•åŸ·è¡Œæ¤œçŸ¥æ©Ÿèƒ½ON/OFF
  log_level: "info"                # ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ï¼ˆ"info" / "warning"ï¼‰
  discord_notify: true             # Discordé€šçŸ¥ON/OFF

# ========================================
# ğŸ’¹ å–å¼•è¨­å®šï¼ˆTrading Settingsï¼‰
# ========================================
# å–å¼•å®Ÿè¡Œãƒ»ä¿¡é ¼åº¦ãƒ¬ãƒ™ãƒ«ãƒ»KellyåŸºæº–è¨­å®š
# ========================================
trading:
  # ========================================
  # Phase 62.6: æ‰‹æ•°æ–™è¨­å®š
  # ========================================
  # ç›®çš„: TP/SLè‡ªå‹•åŸ·è¡Œæ™‚ã®æ­£ç¢ºãªå®Ÿç¾æç›Šè¨ˆç®—
  #
  # bitbankå…¬å¼æ‰‹æ•°æ–™ï¼ˆhttps://bitbank.cc/guide/feeï¼‰:
  #   - Maker: -0.02%ï¼ˆãƒªãƒ™ãƒ¼ãƒˆï¼å ±é…¬ã‚’å—ã‘å–ã‚‹ï¼‰
  #   - Taker: 0.12%
  #
  # Makerã¨Takerã®åˆ¤å®šåŸºæº–:
  #   - Maker: æ³¨æ–‡ãŒæ¿ã«æ®‹ã‚Šã€ä»–è€…ãŒç´„å®šã•ã›ãŸå ´åˆ
  #   - Taker: æ—¢å­˜ã®æ¿ã‹ã‚‰å³æ™‚ç´„å®šã—ãŸå ´åˆ
  #
  # æœ¬ã‚·ã‚¹ãƒ†ãƒ ã®æ³¨æ–‡ãƒ‘ã‚¿ãƒ¼ãƒ³:
  #   - ã‚¨ãƒ³ãƒˆãƒªãƒ¼: limitæ³¨æ–‡ã‚’å³æ™‚ç´„å®šä¾¡æ ¼ã§ç™ºè¡Œ â†’ Taker 0.12%
  #   - TP/SLæ±ºæ¸ˆ: æ¡ä»¶åˆ°é”æ™‚ã«è‡ªå‹•åŸ·è¡Œ â†’ Taker 0.12%
  #
  # æ¤œè¨¼: 2026/02/01å–å¼•ã§bitbank UIå®Ÿç¾æç›Šã¨Â±1å††ã§ä¸€è‡´ç¢ºèªæ¸ˆã¿
  # ========================================
  fees:
    # Makeræ‰‹æ•°æ–™ï¼ˆæ¿ã«æ³¨æ–‡ã‚’æ®‹ã—ã¦ç´„å®šã—ãŸå ´åˆï¼‰
    maker_rate: -0.0002         # Maker -0.02%ï¼ˆãƒªãƒ™ãƒ¼ãƒˆï¼‰
    # Takeræ‰‹æ•°æ–™ï¼ˆæ—¢å­˜ã®æ¿ã‹ã‚‰å³æ™‚ç´„å®šã—ãŸå ´åˆï¼‰
    taker_rate: 0.0012          # Taker 0.12%
    # å®Ÿéš›ã®è¨ˆç®—ã«ä½¿ç”¨ã™ã‚‹è¨­å®šï¼ˆæœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯åŸºæœ¬çš„ã«Takerç´„å®šï¼‰
    entry_taker_rate: 0.0012    # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ Taker 0.12%
    exit_taker_rate: 0.0012     # æ±ºæ¸ˆ Taker 0.12%ï¼ˆTP/SLè‡ªå‹•åŸ·è¡Œï¼‰
    # Phase 62.7: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆç”¨æ‰‹æ•°æ–™ï¼ˆãƒ©ã‚¤ãƒ–ã¨åŒä¸€ = Takerï¼‰
    # æ ¹æ‹ : ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã¨ãƒ©ã‚¤ãƒ–ã®ä¹–é›¢è§£æ¶ˆï¼ˆå¾€å¾©0.28%å·®ã®ä¿®æ­£ï¼‰
    backtest_entry_rate: 0.0012 # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ Taker 0.12%
    backtest_exit_rate: 0.0012  # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæ±ºæ¸ˆ Taker 0.12%
  # Phase 56.6: è³‡é‡‘ã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šé™ï¼ˆãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚ºè¨ˆç®—ã«ä½¿ç”¨ã™ã‚‹æ®‹é«˜ä¸Šé™ï¼‰
  # null/0ã§ç„¡åˆ¶é™ï¼ˆå®Ÿæ®‹é«˜ã‚’ãã®ã¾ã¾ä½¿ç”¨ï¼‰ã€æ­£ã®å€¤ã§ä¸Šé™è¨­å®š
  capital_allocation_limit: 500000.0  # Phase 57.6: 50ä¸‡å††å…¨é¡ä½¿ç”¨ï¼ˆå¹´åˆ©10%ç›®æ¨™ï¼‰
  anomaly:
    spread_critical_threshold: 0.005
    spread_warning_threshold: 0.003
  ask_spread_ratio: 1.001
  bid_spread_ratio: 0.999
  confidence_levels:
    high: 0.45
    low: 0.2
    medium: 0.3
    min_ml: 0.12
    very_high: 0.6
  fallback_btc_jpy: 16500000.0
  fallback_prices:
    ask: 16600000.0
    bid: 16400000.0
    default_ask: 16100000.0
    default_bid: 15900000.0
  kelly_criterion:
    min_trades_for_kelly: 5
    max_position_ratio: 1.00    # Phase 60.1: 0.35â†’1.00ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼‰
    safety_factor: 0.9          # Phase 57.9: 1.0 â†’ 0.9ï¼ˆ12/30è¨­å®šã«å¾©å…ƒï¼‰
  min_trade_size: 0.0001
  initial_position_size: 0.015    # Phase 60.1: 0.005â†’0.015ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼‰
  fee_rate: 0.0012
  minimum_live_balance: 3000
  position_sizing:
    max_position_ratio: 1.00    # Phase 60.1: 0.35â†’1.00ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼‰
    stop_loss_atr_multiplier: 1.2
    stop_loss_rate: 0.02
    take_profit_rate: 0.04
    take_profit_ratio: 2.0
  risk_thresholds:
    conditional: 0.65
    deny: 0.85
    min_ml_confidence: 0.12
  stats_log_interval: 10

# ========================================
# ğŸ§  ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«è¨­å®šï¼ˆEnsemble Model Settingsï¼‰
# ========================================
ensemble:
  max_nan_ratio_features: 0.5
  max_nan_ratio_target: 0.3
  min_training_samples: 50

  # ========================================
  # Phase 59.7: Stacking Meta-Learnerè¨­å®š
  # ========================================
  # ç›®çš„: ãƒ™ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®äºˆæ¸¬ç¢ºç‡ã‚’Meta-Learnerã§çµ±åˆ
  # æœŸå¾…åŠ¹æœ: F1ã‚¹ã‚³ã‚¢ 0.41 â†’ 0.50+ï¼ˆ+20%ä»¥ä¸Šï¼‰
  # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: stacking_enabled=falseã§å¾“æ¥ã®é‡ã¿ä»˜ã‘å¹³å‡ã«æˆ»ã›ã‚‹
  # ========================================
  stacking_enabled: false  # Phase 59å®Œäº†: Stackingç„¡åŠ¹åŒ–ï¼ˆPEæ–¹å¼ãŒ+12-25%é«˜åç›Šï¼‰
  meta_learner:
    type: "lightgbm"       # Meta-Learnerãƒ¢ãƒ‡ãƒ«ã‚¿ã‚¤ãƒ—
    params:
      num_leaves: 15       # è»½é‡è¨­å®šï¼ˆéå­¦ç¿’é˜²æ­¢ï¼‰
      learning_rate: 0.05  # æ§ãˆã‚ãªå­¦ç¿’ç‡
      n_estimators: 50     # å°‘ãªã‚ã®ãƒ„ãƒªãƒ¼æ•°
      max_depth: 4         # æµ…ã„ãƒ„ãƒªãƒ¼ï¼ˆMeta-Learnerç”¨ï¼‰
      random_state: 42
      class_weight: "balanced"  # ã‚¯ãƒ©ã‚¹ä¸å‡è¡¡å¯¾ç­–

# ========================================
# ğŸ“ˆ MLãƒ¢ãƒ‡ãƒ«è¨­å®šï¼ˆML Model Settingsï¼‰
# ========================================
# LightGBMãƒ»XGBoostãƒ»RandomForestãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
# ========================================
models:
  lgbm:
    num_leaves: 31
    learning_rate: 0.05
    n_estimators: 100
    feature_fraction: 0.9
    bagging_fraction: 0.8
    bagging_freq: 5
    max_depth: -1
    min_child_samples: 20
    reg_alpha: 0.0
    reg_lambda: 0.0
  min_training_samples: 10
  rf:
    n_estimators: 100
    max_depth: 10
    min_samples_split: 5
    min_samples_leaf: 2
    max_features: sqrt
    bootstrap: true
    oob_score: true
    class_weight: balanced
  xgb:
    max_depth: 6
    learning_rate: 0.05
    n_estimators: 100
    min_child_weight: 1
    subsample: 0.8
    colsample_bytree: 0.8
    alpha: 0
    lambda: 1
    gamma: 0

# ========================================
# ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šï¼ˆReporting Settingsï¼‰
# ========================================
reporting:
  base_dir: logs/reports
  paper_trading_dir: logs/paper_trading_reports

# ========================================
# âš–ï¸ ãƒªã‚¹ã‚¯ç®¡ç†è¨­å®šï¼ˆRisk Management Settingsï¼‰
# ========================================
# KellyåŸºæº–ãƒ»ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ãƒ»è³‡é‡‘ç®¡ç†è¨­å®š
# Phase 51.5-C: TP/SLä¾¡æ ¼å·®ç•°ãƒã‚°ä¿®æ­£ï¼ˆtickerä¾¡æ ¼ vs limitä¾¡æ ¼ãƒ»ATRå–å¾—å¤±æ•—å¯¾å¿œï¼‰
# ========================================
risk:
  emergency_ratio: 0.005
  emergency_stop_ratio: 0.98
  fallback_max_ratio: 0.1
  fallback_min_ratio: 0.01
  fallback_stop_ratio: 0.95
  kelly_lookback_days: 30
  kelly_max_fraction: 1.00   # Phase 57.7: Kellyæœ€å¤§ãƒã‚¸ã‚·ãƒ§ãƒ³æ¯”ç‡ï¼ˆinitial_position_sizeã¨æ•´åˆï¼‰
  recent_lookback_hours: 24
  safe_balance_ratio: 0.3
  max_capital_usage: 1.5     # Phase 60.1: 0.5â†’1.5ï¼ˆå®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼‰
  reserve_ratio: 0.5         # Phase 57: 0.7 â†’ 0.5ï¼ˆreserve 50%ï¼‰

  # Phase 51.5-C: TP/SLå†è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
  fallback_atr: 500000                   # ATRå–å¾—å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ATRå€¤ï¼ˆ500,000å††ï¼‰
  require_tpsl_recalculation: true       # TP/SLå†è¨ˆç®—å¿…é ˆåŒ–ï¼ˆfalseæ™‚ã¯å…ƒã®TP/SLä½¿ç”¨ï¼‰

# ========================================
# ğŸ“ˆ ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†è¨­å®šï¼ˆPosition Management Settingsï¼‰
# ========================================
# Phase 51.6å®Œäº†ï¼ˆè¢«å®³æœ€å°åŒ–ãƒ»ã“ã¾ã‚åˆ©ç¢ºï¼‰:
#   - SL 0.7%ãƒ»TP 0.9%ãƒ»RRæ¯”1.29:1ï¼ˆPhase 51.6: è¢«å®³æœ€å°åŒ–ãƒ»ã“ã¾ã‚åˆ©ç¢ºï¼‰
#   - Phase 46: å€‹åˆ¥TP/SLå®Ÿè£…ï¼ˆãƒ‡ã‚¤ãƒˆãƒ¬ãƒ¼ãƒ‰ç‰¹åŒ–ãƒ»ã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£…ï¼‰
#   - Phase 49.18: è¨¼æ‹ é‡‘ç¶­æŒç‡80%ç¢ºå®Ÿéµå®ˆï¼ˆcritical: 100.0 â†’ 80.0å¤‰æ›´ï¼‰
#   - Phase 50.5: SLæ³¨æ–‡ä¿è­·ï¼ˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ©Ÿèƒ½ä¸€æ™‚ç„¡åŠ¹åŒ–ï¼‰
# ========================================
position_management:
  # Phase 46: å€‹åˆ¥TP/SLå®Ÿè£…ï¼ˆPhase 42çµ±åˆTP/SLå‰Šé™¤æ¸ˆã¿ï¼‰
  min_account_balance: 10000
  max_open_positions: 3
  max_daily_trades: 50
  cooldown_minutes: 15
  min_trade_size: 0.0001
  max_position_ratio_per_trade:
    # Phase 60.1: å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼ˆç´„3å€å¼•ãä¸Šã’ï¼‰
    low_confidence: 0.80    # Phase 60.1: 0.25â†’0.80
    medium_confidence: 1.00  # Phase 60.1: 0.35â†’1.00
    high_confidence: 1.50    # Phase 60.1: 0.50â†’1.50
    enforce_minimum: true
  dynamic_position_sizing:
    enabled: true
    # Phase 60.1: å®ŸåŠ¹ãƒ¬ãƒãƒ¬ãƒƒã‚¸0.5å€ç§»è¡Œï¼ˆç´„3å€å¼•ãä¸Šã’ï¼‰
    low_confidence:
      min_ratio: 0.30    # Phase 60.1: 0.10â†’0.30
      max_ratio: 0.60    # Phase 60.1: 0.20â†’0.60
    medium_confidence:
      min_ratio: 0.45    # Phase 60.1: 0.15â†’0.45
      max_ratio: 0.75    # Phase 60.1: 0.25â†’0.75
    high_confidence:
      min_ratio: 0.60    # Phase 60.1: 0.20â†’0.60
      max_ratio: 1.05    # Phase 60.1: 0.35â†’1.05
  account_size_adjustments:
    small:
      threshold: 50000
      min_trade_override: true
    medium:
      threshold: 100000
      position_multiplier: 1.0
    large:
      threshold: 100001
      position_multiplier: 1.0
  emergency_stop_loss:
    enable: true
    price_change_threshold: 0.03
    time_window_minutes: 5
    max_loss_threshold: 0.05
    override_cooldown: true
    min_hold_minutes: 1
  take_profit:
    enabled: true
    default_ratio: 1.29              # Phase 51.6: RRæ¯”1.29:1ï¼ˆTP 0.9% / SL 0.7%ï¼‰
    min_profit_ratio: 0.009          # Phase 51.6: TP 0.9%ï¼ˆã“ã¾ã‚åˆ©ç¢ºãƒ»makeræ‰‹æ•°æ–™è¾¼ã¿1.1%åˆ©ç›Šï¼‰
    override_strategy_tp: false
    position_partial_exit: false
    # ========================================
    # Phase 61.3: TPæ³¨æ–‡ã‚¿ã‚¤ãƒ—è¨­å®š
    # ========================================
    # use_native_type: true â†’ bitbank APIç›´æ¥å‘¼ã³å‡ºã—ï¼ˆtype="take_profit"ï¼‰
    #                        â†’ UIã§ã€Œåˆ©ç¢ºã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    # use_native_type: false â†’ å¾“æ¥ã®limitæ³¨æ–‡ï¼ˆtype="limit"ï¼‰
    #                        â†’ UIã§ã€ŒæŒ‡å€¤ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    # ========================================
    use_native_type: true

    # ========================================
    # Phase 61.7: å›ºå®šé‡‘é¡TPè¨­å®š
    # ========================================
    # ç›®çš„: %ãƒ™ãƒ¼ã‚¹ã§ã¯ãªãå›ºå®šé‡‘é¡ï¼ˆç´”åˆ©ç›Šï¼‰ã§TPã‚’è¨­å®š
    # è¨ˆç®—å¼: å¿…è¦å«ã¿ç›Š = ç›®æ¨™ç´”åˆ©ç›Š + ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‰‹æ•°æ–™ + åˆ©æ¯ - æ±ºæ¸ˆãƒªãƒ™ãƒ¼ãƒˆ
    # ========================================
    fixed_amount:
      enabled: true                     # å›ºå®šé‡‘é¡TPãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
      target_net_profit: 500            # ç›®æ¨™ç´”åˆ©ç›Šï¼ˆå††ï¼‰â€»æ¯”è¼ƒãƒ†ã‚¹ãƒˆç”¨
      include_entry_fee: true           # ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‰‹æ•°æ–™ã‚’è€ƒæ…®
      include_exit_fee_rebate: true     # æ±ºæ¸ˆãƒªãƒ™ãƒ¼ãƒˆã‚’è€ƒæ…®
      include_interest: true            # åˆ©æ¯ã‚’è€ƒæ…®
      fallback_entry_fee_rate: 0.0012   # APIå¤±æ•—æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆTaker 0.12%ï¼‰
      fallback_exit_fee_rate: -0.0002   # æ±ºæ¸ˆæ™‚ï¼ˆMaker -0.02%ãƒªãƒ™ãƒ¼ãƒˆï¼‰

    # ========================================
    # Phase 52.0: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TPè¨­å®š
    # ========================================
    # ç›®çš„: å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ ã«å¿œã˜ãŸTPæœ€é©åŒ–
    #   - tight_range: TP 0.8%ï¼ˆé »ç¹åˆ©ç¢ºãƒ»93.9%ç™ºç”Ÿç‡å¯¾å¿œï¼‰
    #   - normal_range: TP 1.0%ï¼ˆæ¨™æº–åˆ©ç¢ºï¼‰
    #   - trending: TP 1.5%ï¼ˆå¤§ããä¼¸ã°ã™ï¼‰
    # æœŸå¾…åŠ¹æœ: å‹ç‡46.1%â†’50%+ã€å–å¼•æ¯ãƒªã‚¿ãƒ¼ãƒ³+219%
    # ========================================
    regime_based:
      enabled: true
      tight_range:
        min_profit_ratio: 0.004      # Phase 58.5: 0.8%â†’0.4%ï¼ˆåˆ©æ¯å¯¾ç­–ãƒ»çŸ­æœŸæ±ºæ¸ˆï¼‰
        weekend_ratio: 0.0025        # Phase 58.6: åœŸæ—¥ TP 0.25%ï¼ˆATR65%å¯¾å¿œï¼‰
        default_ratio: 1.33
        fixed_amount_target: 500     # Phase 61.7: å›ºå®šé‡‘é¡ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆæ¯”è¼ƒãƒ†ã‚¹ãƒˆï¼‰
      normal_range:
        min_profit_ratio: 0.010      # TP 1.0%ï¼ˆRRæ¯”1.43:1ï¼‰
        weekend_ratio: 0.0065        # Phase 58.6: åœŸæ—¥ TP 0.65%
        default_ratio: 1.43
        fixed_amount_target: 500     # Phase 61.7: å›ºå®šé‡‘é¡ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆæ¯”è¼ƒãƒ†ã‚¹ãƒˆï¼‰
      trending:
        min_profit_ratio: 0.015      # TP 1.5%ï¼ˆRRæ¯”1.50:1ï¼‰
        weekend_ratio: 0.010         # Phase 58.6: åœŸæ—¥ TP 1.0%
        default_ratio: 1.50
        fixed_amount_target: 500     # Phase 61.7: å›ºå®šé‡‘é¡ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆæ¯”è¼ƒãƒ†ã‚¹ãƒˆï¼‰
      high_volatility:
        min_profit_ratio: 0.020      # TP 2.0%ï¼ˆå‚è€ƒå€¤ãƒ»å®Ÿéš›ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰
        default_ratio: 1.33
        fixed_amount_target: 500     # Phase 61.7: å›ºå®šé‡‘é¡ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆæ¯”è¼ƒãƒ†ã‚¹ãƒˆï¼‰
  stop_loss:
    enabled: true
    # Phase 59.6: SLæŒ‡å€¤åŒ–è¨­å®šï¼ˆæ‰‹æ•°æ–™å‰Šæ¸›ï¼‰
    order_type: "stop_limit"         # "stop"ï¼ˆæˆè¡Œï¼‰or "stop_limit"ï¼ˆæŒ‡å€¤ï¼‰â€»use_native_type=falseæ™‚ã®ã¿
    slippage_buffer: 0.001           # 0.1% æŒ‡å€¤ä¾¡æ ¼ãƒãƒƒãƒ•ã‚¡ï¼ˆstop_limitæ™‚ã®ã¿ï¼‰
    default_atr_multiplier: 2.0
    max_loss_ratio: 0.007            # Phase 51.6: SL 0.7%ï¼ˆè¢«å®³æœ€å°åŒ–ãƒ»1å›ç´„11å††æå¤±ï¼‰
    override_strategy_sl: false
    enable_trailing: false
    execution_slippage: 0.003

    # ========================================
    # Phase 61.3: SLæ³¨æ–‡ã‚¿ã‚¤ãƒ—è¨­å®š
    # ========================================
    # use_native_type: true â†’ bitbank APIç›´æ¥å‘¼ã³å‡ºã—ï¼ˆtype="stop_loss"ï¼‰
    #                        â†’ UIã§ã€Œæåˆ‡ã‚Šã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    # use_native_type: false â†’ å¾“æ¥ã®stop/stop_limitæ³¨æ–‡
    #                        â†’ UIã§ã€Œé€†æŒ‡å€¤ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
    # ========================================
    use_native_type: true

    # ========================================
    # Phase 61.3: æ±ºæ¸ˆæ³¨æ–‡ã®ç´„å®šç¢ºèªè¨­å®š
    # ========================================
    # æ±ºæ¸ˆæ³¨æ–‡ç™ºè¡Œå¾Œã€ç´„å®šã‚’ç¢ºèªã™ã‚‹
    # ========================================
    fill_confirmation:
      enabled: true                  # ç´„å®šç¢ºèªæ©Ÿèƒ½ON
      timeout_seconds: 30            # ç´„å®šå¾…æ©Ÿã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
      check_interval_seconds: 3      # ç´„å®šç¢ºèªé–“éš”

    # ========================================
    # Phase 61.3: æœªç´„å®šæ™‚ãƒªãƒˆãƒ©ã‚¤è¨­å®š
    # ========================================
    # æ±ºæ¸ˆæ³¨æ–‡ãŒæœªç´„å®šã®å ´åˆã€ä¾¡æ ¼ã‚’èª¿æ•´ã—ã¦ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹
    # ========================================
    retry_on_unfilled:
      enabled: true                  # ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ON
      max_retries: 3                 # æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°
      slippage_increase_per_retry: 0.001  # ãƒªãƒˆãƒ©ã‚¤æ¯ã®ã‚¹ãƒªãƒƒãƒšãƒ¼ã‚¸å¢—åŠ ï¼ˆ0.1%ï¼‰

    # ========================================
    # Phase 52.0: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥SLè¨­å®š
    # ========================================
    # ç›®çš„: å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ ã«å¿œã˜ãŸSLæœ€é©åŒ–
    #   - tight_range: SL 0.6%ï¼ˆæå¤±æœ€å°åŒ–ãƒ»ãƒ¬ãƒ³ã‚¸ç›¸å ´ç‰¹åŒ–ï¼‰
    #   - normal_range: SL 0.7%ï¼ˆæ¨™æº–æåˆ‡ã‚Šï¼‰
    #   - trending: SL 1.0%ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ç¶™ç¶šä½™åœ°ç¢ºä¿ï¼‰
    # æœŸå¾…åŠ¹æœ: å¹³å‡æå¤±-12å††â†’-10å††ï¼ˆ-17%æ”¹å–„ï¼‰
    # ========================================
    regime_based:
      enabled: true
      tight_range:
        max_loss_ratio: 0.003        # Phase 58.5: 0.6%â†’0.3%ï¼ˆåˆ©æ¯å¯¾ç­–ãƒ»çŸ­æœŸæ±ºæ¸ˆï¼‰
        weekend_ratio: 0.002         # Phase 58.6: åœŸæ—¥ SL 0.2%ï¼ˆATR65%å¯¾å¿œï¼‰
      normal_range:
        max_loss_ratio: 0.007        # SL 0.7%ï¼ˆRRæ¯”1.43:1ï¼‰
        weekend_ratio: 0.0045        # Phase 58.6: åœŸæ—¥ SL 0.45%
      trending:
        max_loss_ratio: 0.010        # SL 1.0%ï¼ˆRRæ¯”1.50:1ï¼‰
        weekend_ratio: 0.0065        # Phase 58.6: åœŸæ—¥ SL 0.65%
      high_volatility:
        max_loss_ratio: 0.015        # SL 1.5%ï¼ˆå‚è€ƒå€¤ãƒ»å®Ÿéš›ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰

    adaptive_atr:
      enabled: true
      use_15m_timeframe: true
      volatility_lookback: 20
      low_volatility:
        threshold_ratio: 0.7
        multiplier: 2.5
      normal_volatility:
        multiplier: 2.0
      high_volatility:
        threshold_ratio: 1.3
        multiplier: 1.5
    min_distance:
      enabled: true
      ratio: 0.007               # Phase 51.6: SL 0.7%ã«åˆã‚ã›ã¦å¤‰æ›´
      override_atr: false
      min_atr_multiplier: 1.5
    trailing:
      enabled: false
      activation_profit: 0.02
      trailing_percent: 0.03
      min_update_distance: 200
      min_profit_lock: 0.005
      cancel_tp_when_exceeds: true

  # ========================================
  # Phase 58.6: åœŸæ—¥TP/SLèª¿æ•´è¨­å®š
  # ========================================
  # æ ¹æ‹ : åŠå¹´é–“ã®CSVåˆ†æï¼ˆ2025/7-12ï¼‰
  #   - åœŸæ—¥ATR: å¹³æ—¥ã®65%
  #   - åœŸæ—¥ãƒ¬ãƒ³ã‚¸: å¹³æ—¥ã®60%
  #   - 0.40%åˆ°é”ç‡: å¹³æ—¥15.2%â†’åœŸæ—¥7.0%ï¼ˆ46%ä½ä¸‹ï¼‰
  # å¯¾ç­–: åœŸæ—¥ã¯TP/SLã‚’62.5%ã«ç¸®å°
  # ========================================
  weekend_adjustment:
    enabled: true
    reduction_factor: 0.625          # åœŸæ—¥ã¯å¹³æ—¥ã®62.5%

# ========================================
# ğŸ’° è¨¼æ‹ é‡‘ç®¡ç†è¨­å®šï¼ˆMargin Management Settingsï¼‰
# ========================================
# Phase 49.18å®Œäº†: ç¶­æŒç‡80%ç¢ºå®Ÿéµå®ˆï¼ˆcritical: 100.0 â†’ 80.0å¤‰æ›´ï¼‰
# ========================================
margin:
  position_value_estimation_ratio: 0.8
  # ç¶­æŒç‡é–¾å€¤ï¼ˆ80%ç¢ºå®Ÿéµå®ˆï¼‰
  thresholds:
    critical: 80.0
    warning: 100.0
    caution: 150.0
    safe: 200.0
  large_drop_threshold: 50.0
  min_position_value: 1000.0
  max_ratio_cap: 10000.0

# ========================================
# ğŸ“ æ³¨æ–‡å®Ÿè¡Œè¨­å®šï¼ˆOrder Execution Settingsï¼‰
# ========================================
# Phase 38.7.2å®Œäº†: å®Œå…¨æŒ‡å€¤ã‚ªãƒ³ãƒªãƒ¼å®Ÿè£…ï¼ˆ100%æŒ‡å€¤æ³¨æ–‡ï¼‰
# ========================================
order_execution:
  smart_order_enabled: true
  high_confidence_threshold: 0.0
  low_confidence_threshold: -1.0
  max_spread_ratio_for_limit: 0.005
  price_improvement_ratio: 0.0002
  entry_price_strategy: unfavorable
  guaranteed_execution_premium: 0.0005
  limit_order_timeout:
    enabled: true
    timeout_minutes: 5
    fallback_to_market: true
    max_price_deviation: 0.05
    check_interval_seconds: 60

# ========================================
# ğŸ”” æ®‹é«˜ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆBalance Alert Settingsï¼‰
# ========================================
balance_alert:
  enabled: true
  min_required_margin: 14000.0
  alert_threshold_ratio: 1.2
  check_interval_minutes: 3
  discord_critical_alert: true

# ==================================================================================
# ğŸ”¬ Optunaæœ€é©åŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 40æœ€é©åŒ–çµæœï¼‰
# ==================================================================================
# ç›®çš„: Phase 40.1-40.4ã§æœ€é©åŒ–ã•ã‚ŒãŸ79ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æœ€é©å€¤
#
# é‡è¦:
#   1. ä¸Šè¨˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ä¸€éƒ¨é‡è¤‡ã—ã¦ã„ã¾ã™
#   2. ã‚·ã‚¹ãƒ†ãƒ ã¯ä¸Šè¨˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å€¤ã‚’å„ªå…ˆä½¿ç”¨ã—ã¾ã™ï¼ˆget_threshold()å‚ç…§ï¼‰
#   3. ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯æœ€é©åŒ–çµæœã®è¨˜éŒ²ãƒ»å°†æ¥çš„ãªå‚ç…§ç”¨ã§ã™
#
# æœ€é©åŒ–å¯¾è±¡:
#   - Phase 40.1: ãƒªã‚¹ã‚¯ç®¡ç†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ12å€‹ï¼‰
#   - Phase 40.2: æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ30å€‹ï¼‰
#   - Phase 40.3: MLçµ±åˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ7å€‹ï¼‰
#   - Phase 40.4: MLãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ30å€‹ï¼‰
#
# æ›´æ–°æ–¹æ³•:
#   scripts/optimization/run_phase40_optimization.py ã‚’ä½¿ç”¨
#   Phase 40.5çµ±åˆãƒ‡ãƒ—ãƒ­ã‚¤ã§è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã™
#
# æœŸå¾…åŠ¹æœ:
#   +50-70%ã®åç›Šå‘ä¸Šï¼ˆãƒªã‚¹ã‚¯+10-15%ãƒ»æˆ¦ç•¥+15-20%ãƒ»MLçµ±åˆ+10-15%ãƒ»MLãƒã‚¤ãƒ‘ãƒ¼+15-20%ï¼‰
# ==================================================================================
donchian_breakout_base: 0.5
donchian_reversal_base: 0.4
donchian_weak_base: 0.25
donchian_breakout_threshold: 0.0015
donchian_reversal_threshold: 0.09
adx_strong_base: 0.7000000000000001
adx_moderate_base: 0.45
adx_weak_base: 0.3
adx_strong_threshold: 23
adx_moderate_min: 10
adx_di_crossover: 0.6000000000000001
adx_di_confirmation: 0.4
atr_high_vol_base: 0.55
atr_normal_vol_base: 0.5
atr_low_vol_base: 0.4
atr_rsi_overbought: 63
atr_rsi_oversold: 26
atr_bb_overbought: 0.8
atr_bb_oversold: 0.35
ml_weight: 0.35
high_confidence_threshold: 0.85
agreement_bonus: 1.15
disagreement_penalty: 0.85
min_ml_confidence: 0.45
hold_conversion_threshold: 0.4
lgbm_num_leaves: 40
lgbm_learning_rate: 0.03842362394715147
lgbm_n_estimators: 200
lgbm_max_depth: 10
lgbm_max_depth_unlimited: true
lgbm_min_child_samples: 100
lgbm_feature_fraction: 0.65
lgbm_bagging_fraction: 0.8
lgbm_bagging_freq: 7
lgbm_reg_alpha: 4.9643553965532245e-05
lgbm_reg_lambda: 0.05302953797331255
xgb_max_depth: 8
xgb_learning_rate: 0.09229165545667654
xgb_n_estimators: 350
xgb_min_child_weight: 7
xgb_subsample: 0.9
xgb_colsample_bytree: 0.8
xgb_gamma: 4.5
xgb_alpha: 0.006691186940196909
xgb_lambda: 0.20681062974015182
xgb_scale_pos_weight: 0.9
rf_n_estimators: 200
rf_max_depth: 24
rf_max_depth_none: false
rf_min_samples_split: 18
rf_min_samples_leaf: 5
rf_max_features_type: sqrt
rf_max_features_float: 0.5
rf_max_leaf_nodes: 50
rf_max_leaf_nodes_none: true
rf_min_impurity_decrease: 0.06
rf_bootstrap: true
rf_oob_score: false
rf_class_weight: null
