# ========================================
# å‹•çš„é–¾å€¤è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« (thresholds.yaml)
# ========================================
# ç›®çš„: MLçµ±åˆãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ãƒ»æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹•çš„é–¾å€¤ä¸€å…ƒç®¡ç†
#
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å½¹å‰²:
#   1. MLçµ±åˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä¿¡é ¼åº¦é–¾å€¤ãƒ»é‡ã¿ãƒ»ãƒœãƒ¼ãƒŠã‚¹/ãƒšãƒŠãƒ«ãƒ†ã‚£ï¼‰
#   2. å‹•çš„ä¿¡é ¼åº¦è¨ˆç®—ï¼ˆå¸‚å ´ä¸ç¢ºå®Ÿæ€§èª¿æ•´ãƒ»æˆ¦ç•¥åˆ¥ä¿¡é ¼åº¦ç¯„å›²ï¼‰
#   3. æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ5æˆ¦ç•¥ã®é–¾å€¤ãƒ»ä¿¡é ¼åº¦è¨ˆç®—ï¼‰
#   4. ãƒªã‚¹ã‚¯ç®¡ç†è¨­å®šï¼ˆKellyåŸºæº–ãƒ»ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ãƒ»è¨¼æ‹ é‡‘ç¶­æŒç‡ï¼‰
#   5. ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†è¨­å®šï¼ˆTP/SLãƒ»ç·Šæ€¥æ±ºæ¸ˆï¼‰
#   6. Optunaæœ€é©åŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 40æœ€é©åŒ–çµæœï¼‰
#
# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«åˆ†é›¢:
#   - features.yaml: æ©Ÿèƒ½ã‚ªãƒ³ã‚ªãƒ•
#   - unified.yaml: åŸºæœ¬è¨­å®šï¼ˆexchangeã€modeç­‰ï¼‰
#   - thresholds.yaml: å‹•çš„é–¾å€¤ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
#   - feature_order.json: ç‰¹å¾´é‡å®šç¾©
#
# ä½¿ç”¨æ–¹æ³•:
#   - get_threshold()é–¢æ•°ã§å‹•çš„ã«å‚ç…§ï¼ˆãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ç¦æ­¢ï¼‰
#   - Optunaæœ€é©åŒ–: scripts/optimization/run_phase40_optimization.py
#
# ========================================

# ========================================
# å®Ÿè¡Œè¨­å®šï¼ˆExecution Settingsï¼‰
# ========================================
execution:
  backtest_period_days: 180  # Phase 51.8-10: ãƒ•ãƒ«æœŸé–“ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆç†è«–çš„è¨­å®šå€¤æ¤œè¨¼ï¼‰
  live_mode_interval_seconds: 300
  paper_mode_interval_seconds: 300
  backtest_mode_interval_seconds: 1  # Phase 52.4: ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–“éš”ï¼ˆç§’ï¼‰

# ========================================
# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè¨­å®šï¼ˆBacktest Settingsï¼‰
# ========================================
backtest:
  log_level: WARNING
  discord_enabled: false
  data_limit: 10000  # Phase 52.4: ã‚µãƒ³ãƒ—ãƒ«æ•°ä¸Šé™ï¼ˆ10,000ä»¶ã§åœæ­¢ï¼‰
  progress_interval: 100  # Phase 52.4: é€²æ—è¡¨ç¤ºé–“éš”ï¼ˆ100ä»¶æ¯ï¼‰
  progress_report_percentage: 10  # Phase 52.4: é€²æ—å ±å‘Šé–“éš”ï¼ˆ%ï¼‰
  strategy_signal_min_data_rows: 20  # Phase 52.4: æˆ¦ç•¥ã‚·ã‚°ãƒŠãƒ«è¨ˆç®—æœ€å°ãƒ‡ãƒ¼ã‚¿è¡Œæ•°
  report_interval: 10000
  mock_api_calls: true
  enable_detailed_logging: false
  fast_data_slicing: true
  data_sampling_ratio: 1.0  # Phase 52.4: å…¨ãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ï¼ˆbacktest_period_daysã§æœŸé–“åˆ¶é™ï¼‰
  inner_loop_count: 1  # Phase 52.4: é«˜é€ŸåŒ–ï¼ˆ1å›å®Ÿè¡Œãƒ»ç´„40åˆ†ï¼‰

# ========================================
# ğŸ¤– MLçµ±åˆè¨­å®šï¼ˆML Integration Settingsï¼‰
# ========================================
# Phase 52.4: 3æ®µéšçµ±åˆãƒ­ã‚¸ãƒƒã‚¯ãƒ»MLçµ±åˆç‡100%é”æˆ
# ========================================
ml:
  confidence_threshold: 0.3
  allow_dummy_fallback: false
  default_confidence: 0.5
  strategy_integration:
    enabled: true
    ml_weight: 0.35
    strategy_weight: 0.7
    high_confidence_threshold: 0.6
    agreement_bonus: 1.2
    disagreement_penalty: 0.90  # Phase 52.4: ãƒšãƒŠãƒ«ãƒ†ã‚£ç·©å’Œ
    min_ml_confidence: 0.35      # Phase 52.4: é–¾å€¤ç·©å’Œ
    hold_conversion_threshold: 0.30  # Phase 52.4: holdå¤‰æ›ã‚’å³ã—ã
  # Meta-Learningå‹•çš„é‡ã¿æœ€é©åŒ–ã‚·ã‚¹ãƒ†ãƒ 
  meta_learning:
    enabled: false  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç„¡åŠ¹ï¼ˆæ…é‡ãªæ®µéšçš„æœ‰åŠ¹åŒ–ï¼‰
    model_path: "models/meta_learning/meta_model.pkl"
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å›ºå®šé‡ã¿ï¼ˆMeta-MLå¤±æ•—æ™‚ä½¿ç”¨ï¼‰
    fallback_ml_weight: 0.35
    fallback_strategy_weight: 0.7

  # ========================================
  # Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥MLçµ±åˆè¨­å®š
  # ========================================
  # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆæœ€é©åŒ–: tight_rangeï¼ˆ99.4%å¯„ä¸ï¼‰ãƒ»normal_rangeï¼ˆ0.6%ï¼‰ãƒ»trendingï¼ˆæœªç™ºç”Ÿï¼‰
  #
  # Phase 52.5: ä½¿ç”¨ç®‡æ‰€
  # ä½¿ç”¨ç®‡æ‰€:
  #   - src/core/services/trading_cycle_manager.py (Lines 677, 680)
  #   - src/core/config/config_classes.py (Line 63)
  #   - src/ml/ensemble.py (get_regime_config)
  # ========================================
  regime_ml_integration:
    enabled: true  # Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥MLçµ±åˆæœ‰åŠ¹åŒ–

    # tight_rangeï¼ˆç‹­ã„ãƒ¬ãƒ³ã‚¸ï¼‰: æˆ¦ç•¥é‡è¦–å‹
    # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ: 1,380ä»¶ï¼ˆ91.8%ï¼‰ã€PF=1.065ã€åˆ©ç›Šå¯„ä¸99.4%
    tight_range:
      min_ml_confidence: 0.50           # é«˜é–¾å€¤ï¼ˆæˆ¦ç•¥é‡è¦–ï¼‰
      high_confidence_threshold: 0.65
      ml_weight: 0.25                   # ML 25%
      strategy_weight: 0.75             # æˆ¦ç•¥ 75%
      agreement_bonus: 1.15             # MLãƒ»æˆ¦ç•¥ä¸€è‡´æ™‚ãƒœãƒ¼ãƒŠã‚¹æ§ãˆã‚
      disagreement_penalty: 0.92        # MLãƒ»æˆ¦ç•¥ä¸ä¸€è‡´æ™‚ãƒšãƒŠãƒ«ãƒ†ã‚£ç·©å’Œ

    # normal_rangeï¼ˆé€šå¸¸ãƒ¬ãƒ³ã‚¸ï¼‰: ãƒãƒ©ãƒ³ã‚¹å‹
    # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ: 124ä»¶ï¼ˆ8.2%ï¼‰ã€PF=1.005ã€åˆ©ç›Šå¯„ä¸0.6%
    normal_range:
      min_ml_confidence: 0.40           # ä¸­é–¾å€¤ï¼ˆãƒãƒ©ãƒ³ã‚¹å‹ï¼‰
      high_confidence_threshold: 0.60
      ml_weight: 0.30                   # ML 30%
      strategy_weight: 0.70             # æˆ¦ç•¥ 70%
      agreement_bonus: 1.20             # MLãƒ»æˆ¦ç•¥ä¸€è‡´æ™‚ãƒœãƒ¼ãƒŠã‚¹æ¨™æº–
      disagreement_penalty: 0.90        # MLãƒ»æˆ¦ç•¥ä¸ä¸€è‡´æ™‚ãƒšãƒŠãƒ«ãƒ†ã‚£æ¨™æº–

    # trendingï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰: MLè£œå®Œé‡è¦–å‹
    # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ: 0ä»¶ï¼ˆæœªç™ºç”Ÿãƒ»å®Ÿé¨“çš„è¨­å®šï¼‰
    trending:
      min_ml_confidence: 0.35           # ä½é–¾å€¤ï¼ˆMLè£œå®Œé‡è¦–ï¼‰
      high_confidence_threshold: 0.55
      ml_weight: 0.35                   # ML 35%
      strategy_weight: 0.65             # æˆ¦ç•¥ 65%
      agreement_bonus: 1.25             # MLãƒ»æˆ¦ç•¥ä¸€è‡´æ™‚ãƒœãƒ¼ãƒŠã‚¹å¼·åŒ–
      disagreement_penalty: 0.88        # MLãƒ»æˆ¦ç•¥ä¸ä¸€è‡´æ™‚ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚„ã‚„å¼·åŒ–

    # high_volatilityï¼ˆé«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰: è¶…ä¿å®ˆå‹
    # ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆçµæœ: 0ä»¶ï¼ˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ç¦æ­¢ï¼‰
    high_volatility:
      min_ml_confidence: 0.80           # è¶…é«˜é–¾å€¤ï¼ˆå®Ÿè³ªã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰
      high_confidence_threshold: 0.90
      ml_weight: 0.10                   # ML 10%
      strategy_weight: 0.90             # æˆ¦ç•¥ 90%
      agreement_bonus: 1.10             # ãƒœãƒ¼ãƒŠã‚¹æœ€å°
      disagreement_penalty: 0.85        # ãƒšãƒŠãƒ«ãƒ†ã‚£æœ€å¼·åŒ–

  # Meta-MLäºˆæ¸¬ä¿¡é ¼åº¦é–¾å€¤
  min_confidence: 0.3
  # å¸‚å ´çŠ¶æ³ç‰¹å¾´é‡è¨­å®š
  market_features:
    # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢é€£
    atr_window: 14
    bb_window: 20
    volatility_ratio_window: 7
    # ãƒˆãƒ¬ãƒ³ãƒ‰é–¢é€£
    ema_short: 20
    ema_long: 50
    adx_window: 14
    trend_strength_threshold: 0.5
    # ãƒ¬ãƒ³ã‚¸åˆ¤å®šé–¢é€£
    donchian_window: 20
    range_threshold: 0.02
  # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°è¨­å®š
  performance_tracking:
    window_days_short: 7
    window_days_long: 30
    min_trades_required: 5
    history_file: "src/core/state/performance_history.json"
  # Meta-MLãƒ¢ãƒ‡ãƒ«è¨­å®š
  model_config:
    n_estimators: 100
    learning_rate: 0.05
    max_depth: 5
    random_state: 42
  dynamic_confidence:
    base_hold: 0.35
    error_fallback: 0.25
    ml_fallback: 0.35
    neutral_default: 0.4
    strategy_fallback: 0.35
    market_uncertainty:
      volatility_factor_max: 0.1
      volatility_divisor: 1.0
      volume_factor_max: 0.06
      volume_multiplier: 0.2
      price_factor_max: 0.04
      uncertainty_max: 0.2
      uncertainty_boost: 1.0
    strategies:
      # DonchianChannelæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®š
      donchian_channel:
        breakout_base: 0.6
        breakout_min: 0.3
        breakout_max: 0.85
        reversal_base: 0.5
        reversal_min: 0.3
        reversal_max: 0.7
        hold_base: 0.4
        hold_min: 0.35
        hold_max: 0.6
        volume_bonus_max: 0.1
        volume_multiplier: 0.2

      # ADXTrendæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®š
      adx_trend:
        strong_base: 0.65
        strong_min: 0.4
        strong_max: 0.85
        moderate_base: 0.5
        moderate_min: 0.35
        moderate_max: 0.7
        weak_base: 0.35
        weak_min: 0.25
        weak_max: 0.5
        hold_base: 0.45
        hold_min: 0.35
        hold_max: 0.6
        default_min: 0.25
        default_max: 0.6
        adx_bonus_max: 0.25
        adx_divisor: 25
        di_bonus_max: 0.15
        di_divisor: 12
        volume_bonus_max: 0.1
        volume_multiplier: 0.15

      # ATRBasedæˆ¦ç•¥å‹•çš„ä¿¡é ¼åº¦è¨­å®š
      atr_based:
        high_volatility_base: 0.55
        high_volatility_min: 0.35
        high_volatility_max: 0.8
        normal_volatility_base: 0.45
        normal_volatility_min: 0.3
        normal_volatility_max: 0.65
        low_volatility_base: 0.35
        low_volatility_min: 0.25
        low_volatility_max: 0.5
        rsi_base: 0.2
        rsi_multiplier: 0.3
        agreement_max: 0.85
        weak_base: 0.08
        weak_multiplier: 0.1
        volatility_bonus: 1.02
        volatility_max: 0.85
        position_size_base: 0.015       # MLè¨“ç·´ã§å‚ç…§
        market_stress_threshold: 0.7
        min_atr_ratio: 0.5
        strength_divisor: 0.2
        strength_normalize: 30.0
  emergency_stop_on_dummy: true
  max_model_failures: 3
  prediction_fallback_confidence: 0.0
  dummy_confidence: 0.5
  model_paths:
    base_path: /app
    local_path: .
    training_path: models/training

# ========================================
# ğŸ“Š å¸‚å ´ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡è¨­å®šï¼ˆMarket Regime Classificationï¼‰
# ========================================
# Phase 52.4: å¸‚å ´çŠ¶æ³4æ®µéšåˆ†é¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆtight_range/normal_range/trending/high_volatilityï¼‰
#
# Phase 52.5: ä½¿ç”¨ç®‡æ‰€
# ä½¿ç”¨ç®‡æ‰€:
#   - src/core/services/market_regime_classifier.py (classify_regime)
#   - src/core/services/trading_cycle_manager.py
# ========================================
market_regime:
  # ãƒ¬ãƒ³ã‚¸åˆ¤å®šé–¾å€¤
  tight_range:
    bb_width_threshold: 0.03        # BBå¹…é–¾å€¤ï¼ˆ3%æœªæº€ã§ç‹­ã„ãƒ¬ãƒ³ã‚¸ï¼‰
    price_range_threshold: 0.02     # ä¾¡æ ¼å¤‰å‹•é–¾å€¤ï¼ˆ2%æœªæº€ã§ç‹­ã„ãƒ¬ãƒ³ã‚¸ï¼‰
  normal_range:
    bb_width_threshold: 0.05        # BBå¹…é–¾å€¤ï¼ˆ5%æœªæº€ã§é€šå¸¸ãƒ¬ãƒ³ã‚¸ï¼‰
    adx_threshold: 20               # ADXé–¾å€¤ï¼ˆ20æœªæº€ã§é€šå¸¸ãƒ¬ãƒ³ã‚¸ï¼‰
  # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®šé–¾å€¤
  trending:
    adx_threshold: 25               # ADXé–¾å€¤ï¼ˆ25è¶…ã§ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
    ema_slope_threshold: 0.01       # EMAå‚¾ãé–¾å€¤ï¼ˆ1%è¶…ã§ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
  # é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£åˆ¤å®šé–¾å€¤
  high_volatility:
    atr_ratio_threshold: 0.018      # ATRæ¯”é–¾å€¤ï¼ˆ1.8%è¶…ã§é«˜ãƒœãƒ©ï¼‰
  # è¨ˆç®—æœŸé–“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
  periods:
    bb_period: 20                   # ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰æœŸé–“
    donchian_period: 20             # Donchianãƒãƒ£ãƒãƒ«æœŸé–“
    ema_period: 20                  # EMAæœŸé–“
    ema_lookback: 5                 # EMAå‚¾ãè¨ˆç®—å‚ç…§æœŸé–“
    price_range_lookback: 20        # ä¾¡æ ¼å¤‰å‹•ç‡è¨ˆç®—å‚ç…§æœŸé–“

# ========================================
# ğŸ”§ ã‚µãƒ¼ãƒ“ã‚¹å±¤è¨­å®šï¼ˆServices Layer Settingsï¼‰
# ========================================
# Phase 52.4: å–å¼•ã‚µã‚¤ã‚¯ãƒ«ãƒ»ã‚·ã‚¹ãƒ†ãƒ å¾©æ—§ãƒ»ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯è¨­å®š
# ========================================
services:
  # å–å¼•ã‚µã‚¤ã‚¯ãƒ«è¨­å®š
  trading_cycle:
    max_retries: 3                  # æœ€å¤§ãƒªãƒˆãƒ©ã‚¤å›æ•°
    retry_delay: 5                  # ãƒªãƒˆãƒ©ã‚¤é…å»¶ï¼ˆç§’ï¼‰
    validation_timeout: 30          # æ¤œè¨¼ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
  # ã‚·ã‚¹ãƒ†ãƒ å¾©æ—§è¨­å®š
  system_recovery:
    max_recovery_attempts: 3        # æœ€å¤§å¾©æ—§è©¦è¡Œå›æ•°
    recovery_delay: 10              # å¾©æ—§é…å»¶ï¼ˆç§’ï¼‰
  # Gracefulã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³è¨­å®š
  graceful_shutdown:
    timeout_seconds: 30             # ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰
  # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯è¨­å®š
  health_checker:
    check_interval: 60              # ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯é–“éš”ï¼ˆç§’ï¼‰
    cpu_threshold_percent: 80       # CPUä½¿ç”¨ç‡é–¾å€¤ï¼ˆ%ï¼‰
    memory_threshold_percent: 80    # ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡é–¾å€¤ï¼ˆ%ï¼‰

# ========================================
# ğŸ“Š å‹•çš„ä¿¡é ¼åº¦è¨ˆç®—ï¼ˆDynamic Confidence Calculationï¼‰
# ========================================
# å¸‚å ´ä¸ç¢ºå®Ÿæ€§ã«åŸºã¥ãä¿¡é ¼åº¦èª¿æ•´ãƒ»æˆ¦ç•¥åˆ¥ä¿¡é ¼åº¦ç¯„å›²è¨­å®š
# ========================================
performance:
  default_latency_ms: 100.0

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ¯ å‹•çš„æˆ¦ç•¥é¸æŠè¨­å®šï¼ˆDynamic Strategy Selectionï¼‰
# ========================================
# Phase 52.4: 6æˆ¦ç•¥ãƒ»ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥é‡ã¿æœ€é©åŒ–ï¼ˆãƒ¬ãƒ³ã‚¸å‹95%ãƒ»ãƒãƒ©ãƒ³ã‚¹å‹70/20ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰å‹80/20ï¼‰
#
# Phase 52.5: ä½¿ç”¨ç®‡æ‰€
# ä½¿ç”¨ç®‡æ‰€:
#   - src/core/services/dynamic_strategy_selector.py (select_strategies)
#   - src/strategies/base/strategy_manager.py
# ========================================
dynamic_strategy_selection:
  enabled: true  # Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æˆ¦ç•¥é‡ã¿æœ€é©åŒ–æœ‰åŠ¹åŒ–
  # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æˆ¦ç•¥é‡ã¿ãƒãƒƒãƒ”ãƒ³ã‚°
  regime_strategy_mapping:
    tight_range:  # ç‹­ã„ãƒ¬ãƒ³ã‚¸ç›¸å ´ï¼ˆBBå¹… < 3%, ä¾¡æ ¼å¤‰å‹• < 2%ï¼‰
      # ãƒ¬ãƒ³ã‚¸å‹æˆ¦ç•¥95%é›†ä¸­
      ATRBased: 0.45
      BBReversal: 0.35
      DonchianChannel: 0.10
      StochasticReversal: 0.10
      ADXTrendStrength: 0.0
      MACDEMACrossover: 0.0
    normal_range:  # é€šå¸¸ãƒ¬ãƒ³ã‚¸ç›¸å ´ï¼ˆBBå¹… < 5%, ADX < 20ï¼‰
      # ãƒãƒ©ãƒ³ã‚¹å‹70/20é…åˆ†
      ATRBased: 0.35
      BBReversal: 0.20
      DonchianChannel: 0.10
      StochasticReversal: 0.15
      ADXTrendStrength: 0.15
      MACDEMACrossover: 0.05
    trending:  # ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ï¼ˆADX > 25, EMAå‚¾ã > 1%ï¼‰
      # ãƒˆãƒ¬ãƒ³ãƒ‰å‹80/20é…åˆ†
      ADXTrendStrength: 0.50
      MACDEMACrossover: 0.30
      ATRBased: 0.15
      DonchianChannel: 0.05
      BBReversal: 0.0
      StochasticReversal: 0.0
    high_volatility:  # é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆATRæ¯” > 1.8%ãƒ»4æ™‚é–“è¶³ï¼‰
      # å…¨æˆ¦ç•¥ç„¡åŠ¹åŒ–ï¼ˆå®Œå…¨å¾…æ©Ÿãƒ¢ãƒ¼ãƒ‰ï¼‰
      ATRBased: 0.0
      BBReversal: 0.0
      DonchianChannel: 0.0
      StochasticReversal: 0.0
      ADXTrendStrength: 0.0
      MACDEMACrossover: 0.0

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“Š ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥ãƒã‚¸ã‚·ãƒ§ãƒ³åˆ¶é™è¨­å®šï¼ˆRegime-Based Position Limitsï¼‰
# ========================================
# Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æœ€å¤§ãƒã‚¸ã‚·ãƒ§ãƒ³æ•°åˆ¶é™ï¼ˆ6ä»¶â†’4ä»¶â†’2ä»¶â†’0ä»¶ï¼‰
# ========================================
position_limits:
  tight_range:
    max_positions: 6      # åˆ†æ•£æŠ•è³‡æœ€å¤§åŒ–
  normal_range:
    max_positions: 4      # ãƒãƒ©ãƒ³ã‚¹å‹
  trending:
    max_positions: 2      # é›†ä¸­æŠ•è³‡
  high_volatility:
    max_positions: 0      # å®Œå…¨å¾…æ©Ÿ
  # ã‚¨ãƒ©ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
  fallback_max_positions: 2    # ãƒ¬ã‚¸ãƒ¼ãƒ æƒ…å ±å–å¾—å¤±æ•—æ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
  reject_on_limit: true         # åˆ¶é™è¶…éæ™‚ã¯æ–°è¦ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ‹’å¦

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ¯ æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆStrategy Parametersï¼‰
# ========================================
# Phase 52.4: 6æˆ¦ç•¥é–¾å€¤ãƒ»ä¿¡é ¼åº¦è¨ˆç®—è¨­å®š
# ========================================
strategies:
  adx_trend:
    di_crossover_threshold: 0.5
    di_weak_signal_confidence: 0.35
    hold_confidence: 0.45
    min_confidence: 0.25
    moderate_trend_max: 25
    moderate_trend_min: 15
    strong_trend_threshold: 25
    weak_di_threshold: 1.0
    weak_trend_threshold: 15
  atr_based:
    bb_overbought: 0.7
    bb_oversold: 0.3
    high_volatility_strength: 0.5
    hold_confidence: 0.15
    low_volatility_strength: 0.2
    min_confidence: 0.25
    normal_volatility_strength: 0.25
    rsi_overbought: 65
    rsi_oversold: 35
    strength_fallback: 0.3
    base_confidence: 0.25
    confidence_multiplier: 0.3
  donchian_channel:
    breakout_threshold: 0.002
    hold_confidence: 0.4
    middle_zone_max: 0.6
    middle_zone_min: 0.4
    min_confidence: 0.25
    reversal_threshold: 0.05
    weak_signal_confidence: 0.35
    weak_signal_max: 0.75
    weak_signal_min: 0.25
  bb_reversal:
    # Phase 52.4: BB Reversalæˆ¦ç•¥è¨­å®š
    min_confidence: 0.30
    hold_confidence: 0.25
    bb_width_threshold: 0.02        # BBå¹…é–¾å€¤ï¼ˆ2% = ãƒ¬ãƒ³ã‚¸ç›¸å ´åˆ¤å®šï¼‰
    rsi_overbought: 70              # RSIè²·ã‚ã‚Œã™ãé–¾å€¤
    rsi_oversold: 30                # RSIå£²ã‚‰ã‚Œã™ãé–¾å€¤
    bb_upper_threshold: 0.95        # BBä¸Šé™ã‚¿ãƒƒãƒé–¾å€¤ï¼ˆ95%ä»¥ä¸Šï¼‰
    bb_lower_threshold: 0.05        # BBä¸‹é™ã‚¿ãƒƒãƒé–¾å€¤ï¼ˆ5%ä»¥ä¸‹ï¼‰
    adx_range_threshold: 20         # ADXãƒ¬ãƒ³ã‚¸ç›¸å ´é–¾å€¤ï¼ˆ20æœªæº€ï¼‰
    sl_multiplier: 1.5              # SL ATRå€ç‡ï¼ˆãƒ¬ãƒ³ã‚¸ç›¸å ´ç”¨ï¼‰
  stochastic_reversal:
    # Phase 52.4: Stochastic Reversalæˆ¦ç•¥è¨­å®š
    min_confidence: 0.30
    hold_confidence: 0.25
    stoch_overbought: 80            # Stochasticéè²·ã„é–¾å€¤
    stoch_oversold: 20              # Stochasticéå£²ã‚Šé–¾å€¤
    rsi_overbought: 65              # RSIè²·ã‚ã‚Œã™ãé–¾å€¤
    rsi_oversold: 35                # RSIå£²ã‚‰ã‚Œã™ãé–¾å€¤
    adx_range_threshold: 20         # ADXãƒ¬ãƒ³ã‚¸ç›¸å ´é–¾å€¤ï¼ˆ20æœªæº€ï¼‰
    sl_multiplier: 1.5              # SL ATRå€ç‡ï¼ˆãƒ¬ãƒ³ã‚¸ç›¸å ´ç”¨ï¼‰
  macd_ema_crossover:
    # Phase 52.4: MACD + EMA Crossoveræˆ¦ç•¥è¨­å®š
    min_confidence: 0.35
    hold_confidence: 0.25
    adx_trend_threshold: 25         # ADXãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´é–¾å€¤ï¼ˆ25ä»¥ä¸Šï¼‰
    volume_ratio_threshold: 1.1     # å‡ºæ¥é«˜å¢—åŠ é–¾å€¤
    macd_strong_threshold: 50000    # MACDå¼·ã„é–¾å€¤ï¼ˆãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ æ­£è¦åŒ–ç”¨ï¼‰
    ema_divergence_threshold: 0.01  # EMAä¹–é›¢åº¦é–¾å€¤ï¼ˆ1%ï¼‰
    sl_multiplier: 1.5              # SL ATRå€ç‡ï¼ˆãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ç”¨ï¼‰

# ========================================
# ğŸ’¹ å–å¼•è¨­å®šï¼ˆTrading Settingsï¼‰
# ========================================
# å–å¼•å®Ÿè¡Œãƒ»ä¿¡é ¼åº¦ãƒ¬ãƒ™ãƒ«ãƒ»KellyåŸºæº–è¨­å®š
# ========================================
trading:
  anomaly:
    spread_critical_threshold: 0.005
    spread_warning_threshold: 0.003
  ask_spread_ratio: 1.001
  bid_spread_ratio: 0.999
  confidence_levels:
    high: 0.45
    low: 0.2
    medium: 0.3
    min_ml: 0.12
    very_high: 0.6
  fallback_btc_jpy: 16500000.0
  fallback_prices:
    ask: 16600000.0
    bid: 16400000.0
    default_ask: 16100000.0
    default_bid: 15900000.0
  kelly_criterion:
    min_trades_for_kelly: 5
    max_position_ratio: 0.03
    safety_factor: 0.7
  min_trade_size: 0.0001
  initial_position_size: 0.0001
  fee_rate: 0.0012
  minimum_live_balance: 3000
  position_sizing:
    max_position_ratio: 0.05
    stop_loss_atr_multiplier: 1.2
    stop_loss_rate: 0.02
    take_profit_rate: 0.04
    take_profit_ratio: 2.0
  risk_thresholds:
    conditional: 0.65
    deny: 0.85
    min_ml_confidence: 0.12
  stats_log_interval: 10

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰è¨­å®šï¼ˆLive Trading Settingsï¼‰
# Phase 52.4: ãƒ©ã‚¤ãƒ–ãƒ¢ãƒ¼ãƒ‰å°‚ç”¨è¨­å®š
# ========================================
live:
  progress_log_cycle_interval: 50  # é€²æ—ãƒ­ã‚°å‡ºåŠ›ã‚µã‚¤ã‚¯ãƒ«é–“éš”

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ§  ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ãƒ¢ãƒ‡ãƒ«è¨­å®šï¼ˆEnsemble Model Settingsï¼‰
# ========================================
ensemble:
  max_nan_ratio_features: 0.5
  max_nan_ratio_target: 0.3
  min_training_samples: 50

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“ˆ MLãƒ¢ãƒ‡ãƒ«è¨­å®šï¼ˆML Model Settingsï¼‰
# ========================================
# LightGBMãƒ»XGBoostãƒ»RandomForestãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
# ========================================
models:
  lgbm:
    num_leaves: 31
    learning_rate: 0.05
    n_estimators: 100
    feature_fraction: 0.9
    bagging_fraction: 0.8
    bagging_freq: 5
    max_depth: -1
    min_child_samples: 20
    reg_alpha: 0.0
    reg_lambda: 0.0
  min_training_samples: 10
  rf:
    n_estimators: 100
    max_depth: 10
    min_samples_split: 5
    min_samples_leaf: 2
    max_features: sqrt
    bootstrap: true
    oob_score: true
    class_weight: balanced
  xgb:
    max_depth: 6
    learning_rate: 0.05
    n_estimators: 100
    min_child_weight: 1
    subsample: 0.8
    colsample_bytree: 0.8
    alpha: 0
    lambda: 1
    gamma: 0

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆè¨­å®šï¼ˆReporting Settingsï¼‰
# ========================================
reporting:
  base_dir: logs/reports
  paper_trading_dir: logs/paper_trading_reports
  discord:
    colors:
      info: 0x3498DB      # Blue - æƒ…å ±é€šçŸ¥
      warning: 0xF39C12   # Orange - è­¦å‘Šé€šçŸ¥
      critical: 0xE74C3C  # Red - é‡è¦é€šçŸ¥
      success: 0x00FF00   # Green - æˆåŠŸé€šçŸ¥
      error: 0xFF0000     # Red - ã‚¨ãƒ©ãƒ¼é€šçŸ¥
    validation:
      url_min_length: 50          # Webhook URLæœ€å°é•·
      webhook_id_min: 18          # Webhook IDæœ€å°æ¡æ•°
      webhook_id_max: 19          # Webhook IDæœ€å¤§æ¡æ•°
      token_min_length: 3         # Tokenæœ€å°é•·
    timeouts:
      file_upload_seconds: 30     # ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆç§’ï¼‰

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# âš–ï¸ ãƒªã‚¹ã‚¯ç®¡ç†è¨­å®šï¼ˆRisk Management Settingsï¼‰
# ========================================
# Phase 52.4: KellyåŸºæº–ãƒ»ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³ãƒ»TP/SLå†è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
# ========================================
risk:
  emergency_ratio: 0.005
  emergency_stop_ratio: 0.98
  fallback_max_ratio: 0.1
  fallback_min_ratio: 0.01
  fallback_stop_ratio: 0.95
  kelly_lookback_days: 30
  recent_lookback_hours: 24
  safe_balance_ratio: 0.3
  max_capital_usage: 0.3
  reserve_ratio: 0.7

  # Phase 52.4: TP/SLå†è¨ˆç®—ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
  fallback_atr: 500000                   # ATRå–å¾—å¤±æ•—æ™‚ï¼ˆ500,000å††ï¼‰
  require_tpsl_recalculation: true       # TP/SLå†è¨ˆç®—å¿…é ˆåŒ–

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“ˆ ãƒã‚¸ã‚·ãƒ§ãƒ³ç®¡ç†è¨­å®šï¼ˆPosition Management Settingsï¼‰
# ========================================
# Phase 52.4: TP/SLæœ€é©åŒ–ï¼ˆSL 0.7%ãƒ»TP 0.9%ãƒ»RRæ¯”1.29:1ï¼‰ãƒ»è¨¼æ‹ é‡‘ç¶­æŒç‡80%éµå®ˆ
#
# Phase 52.5: ä½¿ç”¨ç®‡æ‰€
# ä½¿ç”¨ç®‡æ‰€:
#   - take_profit/stop_loss: src/trading/execution/tp_sl_calculator.py
#   - max_open_positions: src/trading/position/limits.py (Line 131)
#   - fallback_position_size: src/trading/risk/sizer.py (Line 118)
#   - confidence_thresholds: src/trading/position/limits.py (Lines 325-342)
# ========================================
position_management:
  # å€‹åˆ¥TP/SLå®Ÿè£…
  min_account_balance: 10000
  max_open_positions: 3
  max_daily_trades: 50
  cooldown_minutes: 15
  min_trade_size: 0.0001
  # Phase 52.4-B: ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚¸ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ï¼ˆsizer.py Line 118ï¼‰
  fallback_position_size: 0.01
  # Phase 52.4: MLä¿¡é ¼åº¦åˆ¤å®šé–¾å€¤ï¼ˆlimits.py Lines 325-342ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å‰Šé™¤ï¼‰
  confidence_thresholds:
    low_to_medium: 0.60    # 0.60æœªæº€: ä½ä¿¡é ¼åº¦
    medium_to_high: 0.75   # 0.75æœªæº€: ä¸­ä¿¡é ¼åº¦ãƒ»0.75ä»¥ä¸Š: é«˜ä¿¡é ¼åº¦

  max_position_ratio_per_trade:
    low_confidence: 0.03
    medium_confidence: 0.05
    high_confidence: 0.1
    enforce_minimum: true
  dynamic_position_sizing:
    enabled: true
    low_confidence:
      min_ratio: 0.01
      max_ratio: 0.03
    medium_confidence:
      min_ratio: 0.03
      max_ratio: 0.05
    high_confidence:
      min_ratio: 0.05
      max_ratio: 0.1
  account_size_adjustments:
    small:
      threshold: 50000
      min_trade_override: true
    medium:
      threshold: 100000
      position_multiplier: 1.0
    large:
      threshold: 100001
      position_multiplier: 1.0
  emergency_stop_loss:
    enable: true
    price_change_threshold: 0.03
    time_window_minutes: 5
    max_loss_threshold: 0.05
    override_cooldown: true
    min_hold_minutes: 1
  take_profit:
    enabled: true
    default_ratio: 1.29              # Phase 52.4: RRæ¯”1.29:1ï¼ˆTP 0.9% / SL 0.7%ï¼‰
    min_profit_ratio: 0.009          # Phase 52.4: TP 0.9%ï¼ˆã“ã¾ã‚åˆ©ç¢ºãƒ»makeræ‰‹æ•°æ–™è¾¼ã¿1.1%åˆ©ç›Šï¼‰
    override_strategy_tp: false
    position_partial_exit: false

    # Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥TPè¨­å®šï¼ˆ0.8%â†’1.0%â†’1.5%â†’2.0%ï¼‰
    regime_based:
      enabled: true
      tight_range:
        min_profit_ratio: 0.008      # TP 0.8%ï¼ˆRRæ¯”1.33:1ï¼‰
        default_ratio: 1.33
      normal_range:
        min_profit_ratio: 0.010      # TP 1.0%ï¼ˆRRæ¯”1.43:1ï¼‰
        default_ratio: 1.43
      trending:
        min_profit_ratio: 0.015      # TP 1.5%ï¼ˆRRæ¯”1.50:1ï¼‰
        default_ratio: 1.50
      high_volatility:
        min_profit_ratio: 0.020      # TP 2.0%ï¼ˆå‚è€ƒå€¤ãƒ»å®Ÿéš›ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰
        default_ratio: 1.33

  # Phase 52.4-B: å¤ã„æ³¨æ–‡ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—è¨­å®š
  cleanup:
    max_age_hours: 24                # 24æ™‚é–“ä»¥ä¸Šã®å¤ã„æ³¨æ–‡ã‚’å‰Šé™¤å¯¾è±¡
    threshold_count: 25              # bitbank API 30ä»¶åˆ¶é™å¯¾ç­–ï¼ˆ25ä»¶ã§è­¦å‘Šï¼‰

  stop_loss:
    enabled: true
    default_atr_multiplier: 2.0
    max_loss_ratio: 0.007            # Phase 52.4: SL 0.7%ï¼ˆè¢«å®³æœ€å°åŒ–ï¼‰
    override_strategy_sl: false
    enable_trailing: false
    execution_slippage: 0.003

    # Phase 52.4: ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥SLè¨­å®šï¼ˆ0.6%â†’0.7%â†’1.0%â†’1.5%ï¼‰
    regime_based:
      enabled: true
      tight_range:
        max_loss_ratio: 0.006        # SL 0.6%ï¼ˆRRæ¯”1.33:1ï¼‰
      normal_range:
        max_loss_ratio: 0.007        # SL 0.7%ï¼ˆRRæ¯”1.43:1ï¼‰
      trending:
        max_loss_ratio: 0.010        # SL 1.0%ï¼ˆRRæ¯”1.50:1ï¼‰
      high_volatility:
        max_loss_ratio: 0.015        # SL 1.5%ï¼ˆå‚è€ƒå€¤ãƒ»å®Ÿéš›ã¯ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãªã—ï¼‰

    adaptive_atr:
      enabled: true
      use_15m_timeframe: true
      volatility_lookback: 20
      low_volatility:
        threshold_ratio: 0.7
        multiplier: 2.5
      normal_volatility:
        multiplier: 2.0
      high_volatility:
        threshold_ratio: 1.3
        multiplier: 1.5
    min_distance:
      enabled: true
      ratio: 0.007               # Phase 52.4: SL 0.7%
      override_atr: false
      min_atr_multiplier: 1.5
    trailing:
      enabled: false
      activation_profit: 0.02
      trailing_percent: 0.03
      min_update_distance: 200
      min_profit_lock: 0.005
      cancel_tp_when_exceeds: true

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ’° è¨¼æ‹ é‡‘ç®¡ç†è¨­å®šï¼ˆMargin Management Settingsï¼‰
# ========================================
# Phase 52.4: è¨¼æ‹ é‡‘ç¶­æŒç‡80%ç¢ºå®Ÿéµå®ˆ
# ========================================
margin:
  position_value_estimation_ratio: 0.8
  # ç¶­æŒç‡é–¾å€¤ï¼ˆ80%ç¢ºå®Ÿéµå®ˆï¼‰
  thresholds:
    critical: 80.0
    warning: 100.0
    caution: 150.0
    safe: 200.0
  large_drop_threshold: 50.0
  min_position_value: 1000.0
  max_ratio_cap: 10000.0

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“ æ³¨æ–‡å®Ÿè¡Œè¨­å®šï¼ˆOrder Execution Settingsï¼‰
# ========================================
# Phase 52.4: å®Œå…¨æŒ‡å€¤ã‚ªãƒ³ãƒªãƒ¼ï¼ˆ100%æŒ‡å€¤ãƒ»å¹´é–“Â¥150,000å‰Šæ¸›ï¼‰
# ========================================
order_execution:
  smart_order_enabled: true
  high_confidence_threshold: 0.0
  low_confidence_threshold: -1.0
  max_spread_ratio_for_limit: 0.005
  price_improvement_ratio: 0.0002
  entry_price_strategy: unfavorable
  guaranteed_execution_premium: 0.0005
  limit_order_timeout:
    enabled: true
    timeout_minutes: 5
    fallback_to_market: true
    max_price_deviation: 0.05
    check_interval_seconds: 60

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ”” æ®‹é«˜ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šï¼ˆBalance Alert Settingsï¼‰
# ========================================
balance_alert:
  enabled: true
  min_required_margin: 14000.0
  alert_threshold_ratio: 1.2
  check_interval_minutes: 3
  discord_critical_alert: true

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ==================================================================================
# ğŸ”¬ Optunaæœ€é©åŒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase 40æœ€é©åŒ–çµæœãƒ»å±¥æ­´è¨˜éŒ²ç”¨ï¼‰
# ==================================================================================
# ç›®çš„: Phase 40 Optunaæœ€é©åŒ–çµæœã®è¨˜éŒ²ï¼ˆ79ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰
# ä½¿ç”¨æ–¹æ³•: ä¸Šè¨˜ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å€¤ã‚’å„ªå…ˆä½¿ç”¨ï¼ˆget_threshold()å‚ç…§ï¼‰
# æ›´æ–°æ–¹æ³•: scripts/optimization/run_phase40_optimization.py
# ==================================================================================
optuna_optimized:
  # æˆ¦ç•¥ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ30å€‹ï¼‰
  strategies:
    donchian_channel:
      breakout_base: 0.5
      reversal_base: 0.4
      weak_base: 0.25
      breakout_threshold: 0.0015
      reversal_threshold: 0.09
    adx_trend:
      strong_base: 0.7000000000000001
      moderate_base: 0.45
      weak_base: 0.3
      strong_threshold: 23
      moderate_min: 10
      di_crossover: 0.6000000000000001
      di_confirmation: 0.4
    atr_based:
      high_vol_base: 0.55
      normal_vol_base: 0.5
      low_vol_base: 0.4
      rsi_overbought: 63
      rsi_oversold: 26
      bb_overbought: 0.8
      bb_oversold: 0.35

  # MLçµ±åˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ7å€‹ï¼‰
  ml_integration:
    ml_weight: 0.35
    high_confidence_threshold: 0.85
    agreement_bonus: 1.15
    disagreement_penalty: 0.85
    min_ml_confidence: 0.45
    hold_conversion_threshold: 0.4

  # MLãƒ¢ãƒ‡ãƒ«ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ42å€‹ï¼‰
  model_hyperparameters:
    lgbm:
      num_leaves: 40
      learning_rate: 0.03842362394715147
      n_estimators: 200
      max_depth: 10
      max_depth_unlimited: true
      min_child_samples: 100
      feature_fraction: 0.65
      bagging_fraction: 0.8
      bagging_freq: 7
      reg_alpha: 4.9643553965532245e-05
      reg_lambda: 0.05302953797331255
    xgb:
      max_depth: 8
      learning_rate: 0.09229165545667654
      n_estimators: 350
      min_child_weight: 7
      subsample: 0.9
      colsample_bytree: 0.8
      gamma: 4.5
      alpha: 0.006691186940196909
      lambda: 0.20681062974015182
      scale_pos_weight: 0.9
    rf:
      n_estimators: 200
      max_depth: 24
      max_depth_none: false
      min_samples_split: 18
      min_samples_leaf: 5
      max_features_type: sqrt
      max_features_float: 0.5
      max_leaf_nodes: 50
      max_leaf_nodes_none: true
      min_impurity_decrease: 0.06
      bootstrap: true
      oob_score: false
      class_weight: null

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# ğŸ“Š åˆ†æã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨­å®šï¼ˆAnalysis Scripts Settingsï¼‰
# Phase 52.4: scripts/analysis/ ç”¨ã®åˆ†æãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
# ========================================
analysis:
  # æˆ¦ç•¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æï¼ˆstrategy_performance_analysis.pyï¼‰
  strategy_performance:
    default_data_path: "src/backtest/data/historical/BTC_JPY_4h.csv"
    sharpe_ratio:
      risk_free_rate: 0.0  # ãƒªã‚¹ã‚¯ãƒ•ãƒªãƒ¼ãƒ¬ãƒ¼ãƒˆ
      annualization_factor: 365  # å¹´ç‡æ›ç®—ä¿‚æ•°ï¼ˆæ—¥æ•°ï¼‰
    backtest:
      min_data_rows: 100  # æœ€å°ãƒ‡ãƒ¼ã‚¿è¡Œæ•°
      warmup_rows: 50  # ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—æœŸé–“
      fixed_position_size: 0.01  # å›ºå®šãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º
      min_regime_data: 50  # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ¥æœ€å°ãƒ‡ãƒ¼ã‚¿æ•°
    deletion_criteria:
      win_rate_threshold: 0.5  # å‹ç‡é–¾å€¤ï¼ˆ50%ï¼‰
      correlation_threshold: 0.7  # ç›¸é–¢é–¾å€¤ï¼ˆ70%ï¼‰
      contribution_threshold: 0.0  # è²¢çŒ®åº¦é–¾å€¤ï¼ˆè² ã®å ´åˆå‰Šé™¤å€™è£œï¼‰

  # ãƒ¬ã‚¸ãƒ¼ãƒ åˆ†é¡ç²¾åº¦æ¤œè¨¼ï¼ˆverify_regime_classification.pyï¼‰
  regime_verification:
    default_data_path: "src/backtest/data/historical/BTC_JPY_4h.csv"
    sample_size: 50  # ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒ«è¡¨ç¤ºæ•°
    target_ranges:
      range_market:  # ãƒ¬ãƒ³ã‚¸ç›¸å ´ç›®æ¨™ç¯„å›²
        min: 70
        max: 80
      trending_market:  # ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ç›®æ¨™ç¯„å›²
        min: 15
        max: 20
      high_volatility:  # é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ç›®æ¨™ç¯„å›²
        min: 5
        max: 10

# ================================================================================
# Phase 52.5: ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Šï¼ˆè¦–è¦šçš„æ•´ç†ï¼‰
# ================================================================================

# ========================================
# âš™ï¸ è¨­å®šæ¤œè¨¼ï¼ˆValidation Settingsï¼‰
# Phase 52.4: Config.__init__.pyã®validate()ã§ä½¿ç”¨ã™ã‚‹æ¤œè¨¼é–¾å€¤
# ========================================
validation:
  risk:
    risk_per_trade:
      min: 0.001
      max: 0.05
    max_drawdown:
      min: 0.01
      max: 0.5
