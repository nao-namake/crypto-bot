# 155ç‰¹å¾´é‡æœ¬ç•ªç’°å¢ƒè¨­å®šï¼ˆãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ Ã—ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’ï¼‰
# å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿çµ±åˆãƒ»å“è³ªç›£è¦–ãƒ»æ‰‹æ•°æ–™æœ€é©åŒ–ãƒ»2æ®µéšã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å®Œå…¨ç‰ˆ

data:
  exchange: bitbank
  symbol: BTC/JPY
  timeframe: 1h  # ãƒ™ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å¤‰æ›ç”¨ï¼‰
  api_key: ${BITBANK_API_KEY}
  api_secret: ${BITBANK_API_SECRET}
  ccxt_options:
    enableRateLimit: true
    rateLimit: 20000  # Phase G.1.1: æ§‹é€ ä¿®æ­£å¾Œæœ€é©è¨­å®šï¼ˆ20ç§’é–“éš”ãƒ»ç¢ºå®ŸãªAPIå®‰å…¨æ€§ï¼‰
    timeout: 60000   # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ60ç§’ï¼ˆAPIå¿œç­”æ™‚é–“è€ƒæ…®ï¼‰
    verbose: false   # ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆæœ¬ç•ªã§ã¯falseï¼‰

  # Phase H.23.6: ãƒ‡ãƒ¼ã‚¿å–å¾—é‡æ ¹æœ¬ä¿®å¾©ãƒ»400ãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºå®Ÿé”æˆ
  limit: 400       # ç›®æ¨™ãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ç¶­æŒ
  paginate: true   # ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æœ‰åŠ¹
  per_page: 200    # 80â†’200ä»¶ï¼ˆ2ãƒšãƒ¼ã‚¸ã§400ãƒ¬ã‚³ãƒ¼ãƒ‰é”æˆãƒ»åŠ¹ç‡çš„å–å¾—ï¼‰
  since_hours: 96  # 96æ™‚é–“ç¶­æŒï¼ˆååˆ†ãªãƒ‡ãƒ¼ã‚¿ç¯„å›²ï¼‰
  weekend_data: true  # Phase G.1.1: åœŸæ—¥ãƒ‡ãƒ¼ã‚¿å¾©æ´»ï¼ˆMLç²¾åº¦å‘ä¸Šãƒ»æ§‹é€ ä¿®æ­£ã§å®‰å…¨æ€§ç¢ºä¿ï¼‰
  fetch_retries: 3    # Phase H.6.2: ãƒªãƒˆãƒ©ã‚¤å¢—åŠ ï¼ˆ2â†’3å›ã€ãƒ‡ãƒ¼ã‚¿å–å¾—ç¢ºå®Ÿæ€§å‘ä¸Šï¼‰
  adaptive_rate_limit: true  # å‹•çš„ãƒ¬ãƒ¼ãƒˆåˆ¶é™æœ‰åŠ¹åŒ–
  
  # åœŸæ—¥ã‚®ãƒ£ãƒƒãƒ—å¯¾å¿œè¨­å®šï¼ˆå‹•çš„since_hoursæ‹¡å¼µãƒ»å“è³ªå‘ä¸Šå¯¾å¿œï¼‰
  weekend_extension_hours: 72  # æœˆæ›œæ—¥è¿½åŠ æ™‚é–“ï¼ˆ48â†’72ã«æ‹¡å¤§ï¼‰
  early_week_extension_hours: 36  # ç«æ›œåˆå‰è¿½åŠ æ™‚é–“ï¼ˆ24â†’36ã«æ‹¡å¤§ï¼‰
  
  # Phase H.23.6: ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¼·åŒ–ãƒ»400ãƒ¬ã‚³ãƒ¼ãƒ‰ç¢ºå®Ÿé”æˆè¨­å®š
  max_consecutive_empty: 8  # 5â†’8ï¼ˆ400ãƒ¬ã‚³ãƒ¼ãƒ‰é”æˆã®ãŸã‚ä½™è£•ã‚’æŒã£ãŸè¨­å®šï¼‰
  max_consecutive_no_new: 15  # 10â†’15ï¼ˆper_pageå¤§å¹…å¢—åŠ ã«å¯¾å¿œãƒ»ç¢ºå®Ÿå–å¾—ï¼‰
  max_attempts: 25  # 20â†’25ï¼ˆper_page=200ã§ã®ç¢ºå®Ÿãªãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†ï¼‰
  exponential_backoff: true  # æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•æœ‰åŠ¹åŒ–
  min_delay_ms: 30000  # Phase H.6.2: APIè² è·è»½æ¸›å¼·åŒ–ï¼ˆ20000â†’30000msã€30ç§’é…å»¶ï¼‰
  max_delay_ms: 45000  # Phase H.6.2: æœ€å¤§é…å»¶å»¶é•·ï¼ˆ30000â†’45000msã€APIä¿è­·å¼·åŒ–ï¼‰
  
  # ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å¯¾å¿œãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆPhase H.12: 4hå†…éƒ¨å‡¦ç†å¾©æ´»ãƒ»API Errorå›é¿ï¼‰
  multi_timeframe_data:
    base_timeframe: "1h"  # ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ™ãƒ¼ã‚¹ï¼ˆBitbank APIã‹ã‚‰1hã®ã¿å–å¾—ï¼‰
    target_timeframes:    # Phase H.12: 4hå†…éƒ¨å‡¦ç†å¾©æ´»ãƒ»APIç›´æ¥å–å¾—ã¯ç¦æ­¢ç¶­æŒ
      15m:
        method: "interpolation"  # 1hâ†’15m è£œé–“
        min_points: 10           # Phase H.9.1: 15â†’10ã«ç·©å’Œï¼ˆATRè¨ˆç®—æˆåŠŸå„ªå…ˆï¼‰
      1h:
        method: "direct"         # ç›´æ¥ä½¿ç”¨
        min_points: 10           # Phase H.9.1: 15â†’10ã«ç·©å’Œï¼ˆç¾å®Ÿçš„æœ€å°å€¤ï¼‰
      4h:
        method: "aggregation"    # Phase H.12: 1hâ†’4hé›†ç´„ï¼ˆå†…éƒ¨å‡¦ç†ã®ã¿ãƒ»APIå–å¾—ç¦æ­¢ï¼‰
        min_points: 8            # Phase H.12: 4hÃ—8=32æ™‚é–“åˆ†ã®æœ€å°ãƒ‡ãƒ¼ã‚¿è¦ä»¶
        api_fetch: false         # Phase H.12: API Error 10000é˜²æ­¢ãƒ»å†…éƒ¨å‡¦ç†å°‚ç”¨

strategy:
  type: multi_timeframe_ensemble
  name: multi_timeframe_ensemble
  params:
    model_path: /app/models/production/model.pkl  # å›ºå®šãƒ‘ã‚¹çµ±ä¸€
    threshold: 0.02  # Phase H.15: ã‚¨ãƒ³ãƒˆãƒªãƒ¼é »åº¦æœ€é©åŒ–ï¼ˆæœˆ60-100å›ç›®æ¨™ï¼‰
    # å‹•çš„é–¾å€¤èª¿æ•´ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
    atr_multiplier: 0.3  # Phase H.15: 0.5â†’0.3ï¼ˆå½±éŸ¿æŠ‘åˆ¶ï¼‰
    volatility_adjustment: true
    threshold_bounds: [0.005, 0.10]  # Phase H.15: ã‚ˆã‚Šç‹­ã„ç¯„å›²ã§å®‰å®šæ€§å‘ä¸Š
    max_volatility_adj: 0.03  # Phase H.15: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£èª¿æ•´ä¸Šé™ï¼ˆæ–°è¦ï¼‰
    performance_adj_range: [-0.003, 0.005]  # Phase H.15: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹èª¿æ•´ç¯„å›²ï¼ˆæ–°è¦ï¼‰
    # æˆ¦ç•¥ãŒæœŸå¾…ã™ã‚‹MLã‚»ã‚¯ã‚·ãƒ§ãƒ³å…¨ä½“ã‚’è¿½åŠ 
    ml:
      feat_period: 14
      lags: [1,2,3]  # Phase H.9.3: [1,2,3,4,5]â†’[1,2,3]å‰Šæ¸›ãƒ»ãƒ‡ãƒ¼ã‚¿æ¶ˆè²»æŠ‘åˆ¶ãƒ»åŠ¹ç‡å‘ä¸Š
      rolling_window: 10  # Phase H.9.3: 20â†’10å‰Šæ¸›ãƒ»ãƒ‡ãƒ¼ã‚¿åŠ¹ç‡å‘ä¸Šãƒ»å³åº§å–å¼•é–‹å§‹å¯¾å¿œ
      horizon: 5
      target_type: classification
      model_type: lgbm
      ensemble:
        enabled: true
        method: trading_stacking
        confidence_threshold: 0.60  # Phase H.15: 0.65â†’0.60ï¼ˆã‚ˆã‚Šå¤šãã®ã‚·ã‚°ãƒŠãƒ«é€šéï¼‰
        risk_adjustment: true
        models: ["lgbm", "xgb", "rf"]  # LightGBM, XGBoost, RandomForest
        model_weights: [0.5, 0.3, 0.2]  # æ€§èƒ½ãƒ™ãƒ¼ã‚¹é‡ã¿
      # extra_featuresã¯ml.extra_featuresã§å®šç¾©ï¼ˆé‡è¤‡å‰Šé™¤ï¼‰
      # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿è¨­å®š
      external_data:
        enabled: true
        cache_enabled: true
        fallback_enabled: true

# ãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ è¨­å®šï¼ˆPhase H.12: 4hå†…éƒ¨å‡¦ç†å¾©æ´»ãƒ»æœ¬æ¥ã®3ã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ æˆ¦ç•¥å¾©æ—§ï¼‰
multi_timeframe:
  timeframes: ["15m", "1h", "4h"]  # Phase H.12: 4hå†…éƒ¨å‡¦ç†å¾©æ´»ãƒ»æœ¬æ¥è¨­è¨ˆé€šã‚Š
  weights: [0.3, 0.5, 0.2]  # Phase H.12: æœ¬æ¥é‡ã¿å¾©æ´»ãƒ»15åˆ†è¶³30%, 1æ™‚é–“è¶³50%, 4æ™‚é–“è¶³20%
  data_sync_enabled: true
  missing_data_tolerance: 0.1  # 10%ã¾ã§æ¬ æè¨±å®¹
  timeframe_consensus_threshold: 0.6  # 60%ä»¥ä¸Šã®åˆæ„ã§ä¿¡å·ç™ºç”Ÿ
  data_quality_threshold: 0.55  # Phase H.21.5: 0.6â†’0.55 å®Ÿç”¨çš„å“è³ªåŸºæº–ï¼ˆPhase H.21ä¿®æ­£åŠ¹æœè€ƒæ…®ï¼‰
  
  # Phase H.5.4: å“è³ªç®¡ç†å¼·åŒ–è¨­å®š
  quality_management:
    enabled: true
    adaptive_threshold: true      # é©å¿œçš„å“è³ªé–¾å€¤
    min_threshold: 0.4           # æœ€å°å“è³ªï¼ˆç·Šæ€¥æ™‚ï¼‰
    target_threshold: 0.6        # ç›®æ¨™å“è³ªï¼ˆé€šå¸¸æ™‚ï¼‰  
    max_threshold: 0.8           # æœ€é«˜å“è³ªï¼ˆç†æƒ³æ™‚ï¼‰
    
    # å“è³ªãƒ™ãƒ¼ã‚¹å–å¼•èª¿æ•´
    low_quality_mode:             # ä½å“è³ªæ™‚ï¼ˆ0.4-0.5ï¼‰
      position_size_reduction: 0.5  # ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º50%å‰Šæ¸›
      confidence_boost: 0.1         # ä¿¡é ¼åº¦é–¾å€¤10%å¼•ãä¸Šã’
      stop_loss_tightening: 0.8     # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹20%å³æ ¼åŒ–
      
    medium_quality_mode:          # ä¸­å“è³ªæ™‚ï¼ˆ0.4-0.55ï¼‰Phase H.21.6: ç¯„å›²èª¿æ•´
      position_size_reduction: 0.8  # ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º20%å‰Šæ¸›ï¼ˆç·©å’Œï¼‰
      confidence_boost: 0.03        # ä¿¡é ¼åº¦é–¾å€¤3%å¼•ãä¸Šã’ï¼ˆç·©å’Œï¼‰
      stop_loss_tightening: 0.95    # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹5%å³æ ¼åŒ–ï¼ˆç·©å’Œï¼‰
    
    high_quality_mode:            # é«˜å“è³ªæ™‚ï¼ˆ0.55+ï¼‰Phase H.21.6: é–¾å€¤ä¸‹ã’ãƒ»æ—©æœŸé«˜å“è³ªåˆ¤å®š
      position_size_reduction: 1.0  # æ¨™æº–ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º
      confidence_boost: 0.0         # æ¨™æº–ä¿¡é ¼åº¦é–¾å€¤
      stop_loss_tightening: 1.0     # æ¨™æº–ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹

# æœ¬ç•ªãƒªã‚¹ã‚¯è¨­å®š
risk:
  risk_per_trade: 0.005
  stop_atr_mult: 1.2
  kelly_criterion:
    enabled: true
    max_fraction: 0.05

  # Phase H.21.2: ATRæœŸé–“æœ€é©åŒ–ï¼ˆ100ãƒ¬ã‚³ãƒ¼ãƒ‰å®‰å…¨æ´»ç”¨ãƒ»ãƒªã‚¹ã‚¯ç®¡ç†ç²¾åº¦å‘ä¸Šï¼‰
  atr_period: 20  # 7â†’20æœŸé–“ãƒ»100ãƒ¬ã‚³ãƒ¼ãƒ‰å®‰å…¨æ´»ç”¨ãƒ»å®Ÿç”¨çš„ç²¾åº¦å‘ä¸Š

live:
  mode: live
  trade_interval: 60
  min_order_size: 0.0001
  max_order_size: 0.0005
  starting_balance: 10000.0  # å®Ÿéš›ã®æ®‹é«˜å–å¾—å¤±æ•—æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  margin_trading:
    enabled: true
    leverage: 1.0
    position_type: "both"
    force_margin_mode: true  # margin_mode=trueå¼·åˆ¶é©ç”¨
    verify_margin_status: true  # marginçŠ¶æ…‹ç¢ºèªå¼·åˆ¶
  
  # Bitbankå›ºæœ‰è¨­å®š
  bitbank_settings:
    min_btc_amount: 0.0001
    max_retries: 3
    retry_delay: 5

# 155ç‰¹å¾´é‡ãƒ•ãƒ«ç‰ˆMLè¨­å®šï¼ˆãƒãƒ«ãƒã‚¿ã‚¤ãƒ ãƒ•ãƒ¬ãƒ¼ãƒ å¯¾å¿œï¼‰
ml:
  feat_period: 14
  lags: [1,2,3]  # Phase H.9.3: [1,2,3,4,5]â†’[1,2,3]å‰Šæ¸›ãƒ»ãƒ‡ãƒ¼ã‚¿æ¶ˆè²»æŠ‘åˆ¶ãƒ»åŠ¹ç‡å‘ä¸Š
  rolling_window: 10  # Phase H.9.3: 20â†’10å‰Šæ¸›ãƒ»ãƒ‡ãƒ¼ã‚¿åŠ¹ç‡å‘ä¸Šãƒ»å³åº§å–å¼•é–‹å§‹å¯¾å¿œ
  horizon: 5         # ğŸš¨ ä¿®æ­£: horizonæ˜ç¤ºçš„ã«è¨­å®š
  target_type: classification
  model_type: lgbm
  
  # ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«å­¦ç¿’è¨­å®š
  ensemble:
    enabled: true
    method: trading_stacking
    confidence_threshold: 0.60  # Phase H.15: 0.65â†’0.60ï¼ˆã‚ˆã‚Šå¤šãã®ã‚·ã‚°ãƒŠãƒ«é€šéï¼‰
    risk_adjustment: true
    models: ["lgbm", "xgb", "rf"]  # LightGBM, XGBoost, RandomForest
    model_weights: [0.5, 0.3, 0.2]  # æ€§èƒ½ãƒ™ãƒ¼ã‚¹é‡ã¿
    
  # 155ç‰¹å¾´é‡å®Œå…¨å®Ÿè£…ï¼ˆPhase H.23.7: momentum_14è¿½åŠ ãƒ»enhanced_defaultå»ƒæ­¢ãƒ»ç‰¹å¾´é‡æ•°çµ±ä¸€ï¼‰
  extra_features:
    # ãƒ©ã‚°ç‰¹å¾´é‡ (10å€‹)
    - close_lag_1
    - close_lag_2
    - close_lag_3
    - close_lag_4
    - close_lag_5
    - volume_lag_1
    - volume_lag_2
    - volume_lag_3
    - volume_lag_4
    - volume_lag_5
    
    # ãƒªã‚¿ãƒ¼ãƒ³ç‰¹å¾´é‡ (10å€‹)
    - returns_1
    - returns_2
    - returns_3
    - returns_5
    - returns_10
    - log_returns_1
    - log_returns_2
    - log_returns_3
    - log_returns_5
    - log_returns_10
    
    # ç§»å‹•å¹³å‡ (12å€‹)
    - sma_5
    - sma_10
    - sma_20
    - sma_50
    - sma_100
    - sma_200
    - ema_5
    - ema_10
    - ema_20
    - ema_50
    - ema_100
    - ema_200
    
    # ä¾¡æ ¼ä½ç½® (5å€‹)
    - price_position_20
    - price_position_50
    - price_vs_sma20
    - bb_position
    - intraday_position
    
    # ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ (5å€‹)
    - bb_upper
    - bb_middle
    - bb_lower
    - bb_width
    - bb_squeeze
    
    # ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ æŒ‡æ¨™ (10å€‹)
    - rsi_14
    - rsi_7
    - rsi_21
    - rsi_oversold
    - rsi_overbought
    - macd
    - macd_signal
    - macd_hist
    - macd_cross_up
    - macd_cross_down
    - stoch_k
    - stoch_d
    - stoch_oversold
    - stoch_overbought
    
    # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ (8å€‹)
    - atr_14
    - atr_7
    - atr_21
    - volatility_20
    - volatility_50
    - high_low_ratio
    - true_range
    - volatility_ratio
    
    # å‡ºæ¥é«˜æŒ‡æ¨™ (10å€‹)
    - volume_sma_20
    - volume_ratio
    - volume_trend
    - vwap
    - vwap_distance
    - obv
    - obv_sma
    - cmf
    - mfi
    - ad_line
    
    # ãƒˆãƒ¬ãƒ³ãƒ‰æŒ‡æ¨™ (8å€‹)
    - adx_14
    - plus_di
    - minus_di
    - trend_strength
    - trend_direction
    - cci_20
    - williams_r
    - ultimate_oscillator
    
    # ãƒãƒ¼ã‚±ãƒƒãƒˆæ§‹é€  (6å€‹)
    - support_distance
    - resistance_distance
    - support_strength
    - volume_breakout
    - price_breakout_up
    - price_breakout_down
    
    # ãƒ­ãƒ¼ã‚½ã‚¯è¶³ãƒ‘ã‚¿ãƒ¼ãƒ³ (4å€‹)
    - doji
    - hammer
    - engulfing
    - pinbar
    
    # çµ±è¨ˆçš„ç‰¹å¾´é‡ (5å€‹)
    - skewness_20
    - kurtosis_20
    - zscore
    - mean_reversion_20
    - mean_reversion_50
    
    # æ™‚ç³»åˆ—ç‰¹å¾´é‡ (6å€‹)
    - hour
    - day_of_week
    - is_weekend
    - is_asian_session
    - is_european_session
    - is_us_session
    
    # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰¹å¾´é‡ - VIX (6å€‹)
    - vix_level
    - vix_change
    - vix_zscore
    - fear_level
    - vix_spike
    - vix_regime
    
    # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰¹å¾´é‡ - Fear & Greed (6å€‹)
    - fear_greed_value
    - fear_greed_classification
    - fear_greed_change
    - fear_greed_ma5
    - fear_greed_extreme
    - sentiment_regime
    
    # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰¹å¾´é‡ - ãƒã‚¯ãƒ­ (8å€‹)
    - dxy_level
    - dxy_change
    - dxy_trend
    - treasury_10y
    - treasury_30y
    - yield_curve_slope
    - real_rates
    - macro_regime
    
    # å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰¹å¾´é‡ - Funding (7å€‹)
    - funding_rate
    - funding_ma8
    - funding_trend
    - open_interest
    - oi_change
    - oi_trend
    - funding_regime
    
    # ã‚¯ãƒ­ã‚¹ã‚¢ã‚»ãƒƒãƒˆç›¸é–¢ (3å€‹)
    - btc_stock_corr
    - btc_gold_corr
    - btc_dxy_corr
    
    # è¿½åŠ ã®æŠ€è¡“æŒ‡æ¨™ (10å€‹)
    - roc_10
    - roc_20
    - trix
    - mass_index
    - keltner_upper
    - keltner_lower
    - donchian_upper
    - donchian_lower
    - ichimoku_conv
    - ichimoku_base
    
    # ãã®ä»–ã®æ´¾ç”Ÿç‰¹å¾´é‡ (7å€‹)
    - price_efficiency
    - trend_consistency
    - volume_price_correlation
    - volatility_regime
    - momentum_quality
    - market_phase
    - momentum_14
    
    
  # VIXçµ±åˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase H.15: ã‚¨ãƒ³ãƒˆãƒªãƒ¼é »åº¦æœ€é©åŒ–ï¼‰
  vix_integration:
    enabled: true
    risk_off_threshold: 25
    panic_threshold: 35
    spike_multiplier: 2.0
    vix_extreme_adj: 0.05  # Phase H.15: æ¥µç«¯ãªèª¿æ•´ã‚’0.15â†’0.05ã«æŠ‘åˆ¶
    vix_normal_range: [15, 25]  # é€šå¸¸ç¯„å›²å®šç¾©
  
  # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆPhase H.15ï¼‰
  performance_enhancements:
    confidence_filter: 0.60  # Phase H.15: 0.65â†’0.60ï¼ˆã‚ˆã‚Šå¤šãã®ã‚·ã‚°ãƒŠãƒ«é€šéï¼‰
    partial_profit_levels: [0.3, 0.5]
    trailing_stop: true
  
  # Phase H.24.4: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿è¨­å®šï¼ˆmlé…ä¸‹ã«çµ±åˆï¼‰
  external_data:
    enabled: true
    cache_enabled: true
    fallback_enabled: true
    # Phase H.24.4: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ç‰¹å¾´é‡ã‚’extra_featuresã‹ã‚‰åˆ†é›¢
    include_in_features: true  # ç‰¹å¾´é‡ã«å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€
    
    vix:
      enabled: true
      symbol: "^VIX"
      timeframe: "1d"
      fallback_level: 20.0
      sources: ["alpha_vantage", "polygon", "yahoo"]  # Phase H.23.3: æ–°è¦APIã‚­ãƒ¼å„ªå…ˆãƒ»Yahoo Financeæœ€å¾ŒåŒ–
      quality_threshold: 0.35  # Phase H.23.2: 0.6â†’0.35 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªå®Ÿç”¨åŒ–ãƒ»APIå¤±æ•—æ™‚å¯¾å¿œ
      fallback_quality_boost: 0.25  # Phase H.23.2: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªãƒ–ãƒ¼ã‚¹ãƒˆè¿½åŠ 
      cache_hours: 24
      
    macro:
      enabled: true
      symbols:
        dxy: "DX-Y.NYB"
        us10y: "^TNX"
        us2y: "^IRX"
      fallback_values:
        dxy: 103.0
        us10y: 4.5
        us2y: 4.8
      sources: ["fred", "yahoo"]  # Phase H.23.3: æ–°è¦APIã‚­ãƒ¼å„ªå…ˆãƒ»Yahoo Financeæœ€å¾ŒåŒ–
      quality_threshold: 0.40  # Phase H.23.2: 0.7â†’0.40 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªå®Ÿç”¨åŒ–ãƒ»APIå¤±æ•—æ™‚å¯¾å¿œ
      fallback_quality_boost: 0.30  # Phase H.23.2: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªãƒ–ãƒ¼ã‚¹ãƒˆè¿½åŠ 
      cache_hours: 6
        
    fear_greed:
      enabled: true
      api_url: "https://api.alternative.me/fng/"
      fallback_index: 50
      sources: ["alternative_me"]  # Phase H.21.3: Alternative.meå˜ä½“ãƒ»API keyä¸è¦ãƒ»å®‰å®šæ€§é‡è¦–
      quality_threshold: 0.30  # Phase H.23.2: 0.4â†’0.30 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªå®Ÿç”¨åŒ–ãƒ»APIå¤±æ•—æ™‚å¯¾å¿œ
      fallback_quality_boost: 0.35  # Phase H.23.2: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªãƒ–ãƒ¼ã‚¹ãƒˆè¿½åŠ 
      cache_hours: 1
      
    funding:
      enabled: true
      symbol: "BTC/USDT"
      exchanges: ["binance"]  # ãƒˆãƒ¬ãƒ³ãƒ‰åˆ¤å®šãƒ»å¸‚æ³åˆ†æç”¨
      fallback_rate: 0.0001
      oi_enabled: true  # Open Interestæœ‰åŠ¹åŒ–
      sources: ["binance", "bybit"]  # å–å¼•æ‰€å„ªå…ˆé †ä½
      quality_threshold: 0.35  # Phase H.23.2: 0.6â†’0.35 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªå®Ÿç”¨åŒ–ãƒ»APIå¤±æ•—æ™‚å¯¾å¿œ
      fallback_quality_boost: 0.30  # Phase H.23.2: ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å“è³ªãƒ–ãƒ¼ã‚¹ãƒˆè¿½åŠ 
      cache_hours: 0.5  # 30åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥

# å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ãƒªãƒˆãƒ©ã‚¤è¨­å®š
external_data_retry:
  max_retries: 3
  retry_delay: 2
  exponential_backoff: true
  circuit_breaker:
    enabled: true
    failure_threshold: 5
    recovery_timeout: 300

# å“è³ªç›£è¦–è¨­å®š
quality_monitoring:
  enabled: true
  default_threshold: 0.3       # 30%ãƒ«ãƒ¼ãƒ«
  emergency_stop_threshold: 0.35 # Phase H.21.4: 0.5â†’0.35 ç·Šæ€¥åœæ­¢å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ç¢ºä¿
  
# ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè¨­å®šï¼ˆãƒ©ã‚¤ãƒ–ãƒˆãƒ¬ãƒ¼ãƒ‰ã§ã®åˆæœŸè¨­å®šç”¨ï¼‰
backtest:
  starting_balance: 10000.0
  slippage_rate: 0.001

# ãƒ­ã‚°è¨­å®š
logging:
  level: INFO
  file: /app/logs/bitbank_production.log
  rotation: daily
  retention: 7

# Bitbankæ‰‹æ•°æ–™æœ€é©åŒ–è¨­å®š
bitbank:
  fee_optimization:
    enabled: true
    maker_fee: -0.0002  # -0.02%
    taker_fee: 0.0012   # 0.12%
    prefer_maker: true
    min_profit_after_fees: 0.002  # 0.2%
    
  order_management:
    max_open_orders: 30  # 30ä»¶/ãƒšã‚¢åˆ¶é™
    rate_limit:
      get_requests: 10   # 10å›/ç§’
      post_requests: 6   # 6å›/ç§’
    queue_enabled: true
    
  day_trading:
    enabled: true
    interest_rate: 0.0004  # 0.04%/æ—¥
    auto_close_before_rollover: true
    rollover_time: "00:00:00"

# Phase H.5.1: å‡ºæ¥é«˜é‡ç‚¹å–å¼•æˆ¦ç•¥ï¼ˆã‚¢ãƒ¡ãƒªã‚«ãƒ»ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ™‚é–“å¯¾å¿œï¼‰
trading_schedule:
  enabled: true
  volume_based_trading: true    # å‡ºæ¥é«˜ãƒ™ãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ãƒ‰
  
  # é«˜å‡ºæ¥é«˜æ™‚é–“å¸¯ï¼ˆUTCåŸºæº–ï¼‰
  peak_trading_hours: [13, 23]  # UTC 13-23æ™‚ï¼ˆã‚¢ãƒ¡ãƒªã‚«ãƒ»ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ãƒ”ãƒ¼ã‚¯ï¼‰
  # æ—¥æœ¬æ™‚é–“æ›ç®—: 22:00-08:00ï¼ˆç¿Œæ—¥ï¼‰
  
  # ä¸­å‡ºæ¥é«˜æ™‚é–“å¸¯
  moderate_trading_hours: [8, 13] # UTC 8-13æ™‚ï¼ˆã‚¢ã‚¸ã‚¢ãƒ»ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ï¼‰
  # æ—¥æœ¬æ™‚é–“æ›ç®—: 17:00-22:00
  
  # ä½å‡ºæ¥é«˜æ™‚é–“å¸¯ï¼ˆå–å¼•æ§ãˆã‚ï¼‰
  low_volume_hours: [1, 8]      # UTC 1-8æ™‚ï¼ˆæ·±å¤œãƒ»æ—©æœï¼‰
  # æ—¥æœ¬æ™‚é–“æ›ç®—: 10:00-17:00
  
  weekend_monitoring: false     # åœŸæ—¥ã‚‚é€šå¸¸å–å¼•ï¼ˆ24æ™‚é–“ãƒ•ãƒ«ç¨¼åƒï¼‰
  timezone: "UTC"              # UTCåŸºæº–ã§çµ±ä¸€ç®¡ç†
  
  # å‡ºæ¥é«˜åˆ¥å–å¼•æˆ¦ç•¥
  volume_strategies:
    high_volume:      # é«˜å‡ºæ¥é«˜æ™‚ï¼ˆã‚¢ãƒ¡ãƒªã‚«ãƒ»ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ãƒ”ãƒ¼ã‚¯ï¼‰
      aggressiveness: 1.0     # ç©æ¥µçš„å–å¼•
      position_size_mult: 1.2 # ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º20%å¢—
      stop_loss_mult: 0.8     # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹20%ã‚¿ã‚¤ãƒˆ
      
    moderate_volume:  # ä¸­å‡ºæ¥é«˜æ™‚ï¼ˆã‚¢ã‚¸ã‚¢ãƒ»ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘ï¼‰
      aggressiveness: 0.7     # æ¨™æº–çš„å–å¼•
      position_size_mult: 1.0 # æ¨™æº–ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º
      stop_loss_mult: 1.0     # æ¨™æº–ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹
      
    low_volume:       # ä½å‡ºæ¥é«˜æ™‚ï¼ˆæ·±å¤œãƒ»æ—©æœï¼‰
      aggressiveness: 0.3     # ä¿å®ˆçš„å–å¼•
      position_size_mult: 0.5 # ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚µã‚¤ã‚º50%å‰Šæ¸›
      stop_loss_mult: 1.5     # ã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹50%ç·©ã„
  
  # å–å¼•åœæ­¢æœŸé–“ï¼ˆå‡ºæ¥é«˜ãƒ»æµå‹•æ€§è€ƒæ…®ï¼‰
  trading_blackout:
    weekend_full: false        # åœŸæ—¥å–å¼•æœ‰åŠ¹åŒ–ï¼ˆ24æ™‚é–“å¸‚å ´å¯¾å¿œï¼‰
    extreme_low_volume: true   # æ¥µåº¦ä½å‡ºæ¥é«˜æ™‚åœæ­¢
    major_holidays: true       # ä¸»è¦ç¥æ—¥åœæ­¢
  
  # ç›£è¦–ç¶™ç¶šè¨­å®šï¼ˆåœŸæ—¥å–å¼•æœ‰åŠ¹åŒ–ã®ãŸã‚ç„¡åŠ¹åŒ–ï¼‰
  monitoring_only_periods: []  # åœŸæ—¥å–å¼•æœ‰åŠ¹åŒ–ãƒ»24æ™‚é–“ãƒ•ãƒ«ç¨¼åƒ

# Phase H.5.2: å‡ºæ¥é«˜ãƒ™ãƒ¼ã‚¹å‹•çš„ãƒ‡ãƒ¼ã‚¿å–å¾—æœ€é©åŒ–
dynamic_data_fetching:
  enabled: true
  
  # å‡ºæ¥é«˜æ™‚é–“å¸¯åˆ¥since_hoursè¨­å®š
  high_volume_hours: 96         # é«˜å‡ºæ¥é«˜æ™‚ã¯96æ™‚é–“ï¼ˆ4æ—¥åˆ†ãƒ»ã‚ˆã‚Šå¤šãã®ãƒ‡ãƒ¼ã‚¿ï¼‰
  moderate_volume_hours: 72     # ä¸­å‡ºæ¥é«˜æ™‚ã¯72æ™‚é–“ï¼ˆæ¨™æº–ï¼‰
  low_volume_hours: 48          # ä½å‡ºæ¥é«˜æ™‚ã¯48æ™‚é–“ï¼ˆæœ€å°é™ï¼‰
  
  # ã‚¢ãƒ¡ãƒªã‚«å¸‚å ´é‡ç‚¹è¨­å®š
  us_market_peak_extension: 24  # ã‚¢ãƒ¡ãƒªã‚«ãƒ”ãƒ¼ã‚¯æ™‚ã¯24æ™‚é–“å»¶é•·
  europe_market_bonus: 12       # ãƒ¨ãƒ¼ãƒ­ãƒƒãƒ‘æ™‚é–“ã¯12æ™‚é–“å»¶é•·
  asia_market_reduction: 12     # ã‚¢ã‚¸ã‚¢æ™‚é–“ã¯12æ™‚é–“çŸ­ç¸®
  
  # å‡ºæ¥é«˜ãƒ™ãƒ¼ã‚¹APIæœ€é©åŒ–
  volume_based_batching:
    high_volume_batch: 50       # é«˜å‡ºæ¥é«˜æ™‚ï¼šå¤§ãƒãƒƒãƒã§åŠ¹ç‡åŒ–
    moderate_volume_batch: 30   # ä¸­å‡ºæ¥é«˜æ™‚ï¼šæ¨™æº–ãƒãƒƒãƒ
    low_volume_batch: 10        # ä½å‡ºæ¥é«˜æ™‚ï¼šå°ãƒãƒƒãƒã§è² è·è»½æ¸›
    
  # æµå‹•æ€§è€ƒæ…®èª¿æ•´
  high_liquidity_fast_fetch: true  # é«˜æµå‹•æ€§æ™‚ã¯é«˜é€Ÿå–å¾—
  low_liquidity_throttling: true   # ä½æµå‹•æ€§æ™‚ã¯ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°
  
  # åœŸæ—¥ãƒ»ç¥æ—¥å¯¾å¿œ
  weekend_minimal_fetching: true    # åœŸæ—¥ã¯æœ€å°é™ãƒ‡ãƒ¼ã‚¿å–å¾—
  holiday_reduced_frequency: true   # ç¥æ—¥ã¯å–å¾—é »åº¦å‰Šæ¸›