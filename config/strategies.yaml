# ========================================
# 戦略定義ファイル (strategies.yaml)
# ========================================
# Phase 51.5-B: 動的戦略管理基盤実装
#
# 目的: 戦略の宣言的設定・動的管理
# 管理項目: 有効化・重み・優先度・設定参照
# 効果: 戦略追加・削除の影響範囲を93%削減（27ファイル→4ファイル）
#
# 戦略追加手順:
#   1. 戦略クラスに@StrategyRegistry.register()追加
#   2. このファイルに戦略定義追加
#   3. config/core/thresholds.yamlに設定追加
#   → 完了！（orchestrator.py等の修正不要）
# ========================================

strategy_system_version: "2.0.0"
last_updated: "2025-11-03"
phase: "Phase 51.5-B"

# ========================================
# 戦略定義（Phase 51.5-A: 3戦略体制）
# ========================================

strategies:
  # 戦略1: ATRベース逆張り戦略
  atr_based:
    enabled: true
    class_name: "ATRBased"                        # StrategyRegistry登録名
    module_path: "strategies.implementations.atr_based"
    strategy_type: "atr_based"                    # StrategyType定数値
    weight: 0.25                                   # 戦略重み（25%）
    priority: 1                                    # 優先度（低いほど優先）
    description: "ATRベース逆張り戦略 - ボラティリティベース平均回帰"
    config_section: "strategies.atr_based"        # thresholds.yaml参照セクション

  # 戦略2: Donchianチャネルブレイクアウト戦略
  donchian_channel:
    enabled: true
    class_name: "DonchianChannel"
    module_path: "strategies.implementations.donchian_channel"
    strategy_type: "donchian_channel"
    weight: 0.15                                   # 戦略重み（15%）
    priority: 2
    description: "Donchianチャネルブレイクアウト戦略 - 高値/安値ブレイクアウト検知"
    config_section: "strategies.donchian_channel"

  # 戦略3: ADXトレンド強度戦略
  adx_trend:
    enabled: true
    class_name: "ADXTrendStrength"
    module_path: "strategies.implementations.adx_trend"
    strategy_type: "adx_trend"
    weight: 0.15                                   # 戦略重み（15%）
    priority: 3
    description: "ADXトレンド強度戦略 - トレンド方向性とDI判定"
    config_section: "strategies.adx_trend"

# ========================================
# 統合設定（全戦略共通）
# ========================================

integration:
  # コンセンサスアルゴリズム設定
  consensus_required: 0.4                         # 必要合意度（40%）
  confidence_threshold: 0.3                       # 最小信頼度（30%）
  signal_conflict_resolution: "weighted_vote"     # シグナル衝突解決方法

  # シグナル統合ロジック
  signal_aggregation: "weighted_average"          # 加重平均
  min_active_strategies: 1                        # 最小有効戦略数

# ========================================
# ML特徴量生成設定
# ========================================

ml_features:
  # 戦略シグナル特徴量
  strategy_signals_enabled: true                  # 戦略シグナル特徴量を生成
  signal_encoding: "action_times_confidence"      # エンコーディング方式
                                                   # buy=+confidence, hold=0, sell=-confidence

  # 特徴量自動更新（Phase 51.5-B: 将来機能）
  feature_order_auto_update: false                # 自動更新無効（手動管理）

# ========================================
# 戦略管理機能設定
# ========================================

management:
  # 動的戦略ロード
  dynamic_loading: true                           # StrategyLoader使用
  registry_pattern: true                          # Registry Pattern使用

  # ホットリロード（Phase 51.5-B: 将来機能）
  hot_reload_enabled: false                       # ホットリロード無効

  # 戦略検証
  validate_on_load: true                          # ロード時検証
  fail_fast: true                                 # エラー時即座に失敗

# ========================================
# ログ設定
# ========================================

logging:
  strategy_load: true                             # 戦略ロードログ出力
  strategy_decision: true                         # 戦略判断ログ出力
  verbose: false                                   # 詳細ログ無効

# ========================================
# Phase 51.5-A: 削除済み戦略（参考）
# ========================================
# - MochipoyAlert: バックテスト性能不足（Phase 51.4分析）
# - MultiTimeframe: バックテスト性能不足（Phase 51.4分析）
#
# Phase 51.5-B効果:
# - 戦略追加: このファイルに定義追加のみ
# - 戦略削除: enabled: false に変更のみ
# - 修正ファイル数: 27 → 4（93%削減）
