#!/usr/bin/env bash
# =============================================================================
# ãƒ•ã‚¡ã‚¤ãƒ«å: scripts/git_push.sh
# èª¬æ˜:
#   - å¤‰æ›´ã‚’ä¸€æ‹¬ã§ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚° â†’ ã‚³ãƒŸãƒƒãƒˆ â†’ ãƒ—ãƒƒã‚·ãƒ¥ ã™ã‚‹ç°¡æ˜“ãƒ©ãƒƒãƒ‘ãƒ¼ã€‚
#   - å¼•æ•°ã«ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¸¡ã™ã¨ãã®ã¾ã¾ commit -m ã¸ä½¿ç”¨ã€‚
#   - çœç•¥æ™‚ã¯ "chore: update" ã§ã‚³ãƒŸãƒƒãƒˆã€‚
#   - ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒã‚’è‡ªå‹•åˆ¤å®šã—ã€`origin/<branch>` ã¸ pushã€‚
#   - ä¾‹: bash scripts/git_push.sh "feat: add new strategy"
# =============================================================================
set -euo pipefail

# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
msg=${1:-"chore: update"}

# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒåã‚’å–å¾—
branch=$(git rev-parse --abbrev-ref HEAD)

# å¤‰æ›´ã‚’ã™ã¹ã¦ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚° â†’ ã‚³ãƒŸãƒƒãƒˆ â†’ ãƒ—ãƒƒã‚·ãƒ¥
git add -A
git commit -m "$msg"
git push -u origin "$branch"

echo "ğŸ‰  Pushed '$branch' with message: \"$msg\""