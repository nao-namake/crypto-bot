{
    "version": "2.0.0",
    "description": "crypto-bot 新システム稼働状況確認設定（Phase 10対応）",
    "updated": "2025-08-17",
    "system_type": "新システム（Phase 10完了）",
    "check_phases": {
        "phase1": {
            "name": "インフラ・基盤確認",
            "weight": 25,
            "checks": [
                "project_structure",
                "system_imports",
                "ml_models_availability",
                "test_system_health"
            ]
        },
        "phase2": {
            "name": "アプリケーション動作確認",
            "weight": 30,
            "checks": [
                "data_pipeline_health",
                "ml_prediction_system",
                "strategy_system_health",
                "trading_risk_system"
            ]
        },
        "phase3": {
            "name": "隠れた問題検出",
            "weight": 30,
            "checks": [
                "critical_error_patterns",
                "file_system_integrity"
            ]
        },
        "phase4": {
            "name": "総合判定・レポート",
            "weight": 15,
            "checks": [
                "overall_assessment",
                "recommendations",
                "summary_report"
            ]
        }
    },
    "thresholds": {
        "critical_score": 70,
        "warning_score": 85,
        "healthy_score": 95,
        "max_response_time_seconds": 5.0,
        "min_test_success_rate": 0.95,
        "max_import_failure_rate": 0.1,
        "min_model_prediction_accuracy": 0.8,
        "max_processing_time_seconds": 2.0,
        "min_file_count_per_directory": 1
    },
    "new_system_patterns": {
        "description": "新システム用エラーパターン（厳選5個）",
        "patterns": [
            {
                "id": "import_errors",
                "name": "インポートエラー・モジュール不在",
                "severity": "CRITICAL",
                "detection": {
                    "log_patterns": [
                        "ModuleNotFoundError: No module named",
                        "ImportError:",
                        "cannot import name"
                    ],
                    "file_patterns": [
                        "src/core/*.py",
                        "src/data/*.py",
                        "src/ml/*.py"
                    ]
                },
                "description": "新システムコンポーネントのインポート失敗",
                "solutions": [
                    "Python path確認: sys.path",
                    "モジュール構造確認: src/ディレクトリ",
                    "依存関係インストール確認"
                ]
            },
            {
                "id": "ml_model_failures",
                "name": "MLモデル予測失敗",
                "severity": "HIGH",
                "detection": {
                    "patterns": [
                        "prediction.*failed",
                        "model.*error",
                        "ensemble.*exception"
                    ],
                    "conditions": [
                        "prediction_success_rate < 0.8",
                        "static_predictions == true"
                    ]
                },
                "description": "ProductionEnsemble予測システム障害",
                "solutions": [
                    "scripts/management/dev_check.py ml-models実行",
                    "models/production/ディレクトリ確認",
                    "pickle互換性チェック"
                ]
            },
            {
                "id": "test_system_degradation",
                "name": "テストシステム劣化",
                "severity": "HIGH",
                "detection": {
                    "patterns": [
                        "FAILED.*tests/unit/",
                        "ERROR.*pytest",
                        "test.*timeout"
                    ],
                    "conditions": [
                        "test_failure_rate > 0.1",
                        "failed_test_count >= 10"
                    ]
                },
                "description": "289テスト品質保証体制の劣化",
                "solutions": [
                    "scripts/management/dev_check.py validate実行",
                    "個別テスト確認: pytest tests/unit/ -v",
                    "依存関係更新確認"
                ]
            },
            {
                "id": "config_inconsistency",
                "name": "設定不整合",
                "severity": "MEDIUM",
                "detection": {
                    "patterns": [
                        "config.*not.*found",
                        "yaml.*error",
                        "configuration.*missing"
                    ],
                    "file_checks": [
                        "config/base.yaml",
                        "config/production.yaml"
                    ]
                },
                "description": "設定ファイル不整合・欠損",
                "solutions": [
                    "config/ディレクトリ確認",
                    "YAML構文チェック",
                    "設定項目整合性確認"
                ]
            },
            {
                "id": "performance_anomaly",
                "name": "パフォーマンス異常",
                "severity": "MEDIUM",
                "detection": {
                    "patterns": [
                        "processing.*slow",
                        "timeout.*exceeded",
                        "memory.*high"
                    ],
                    "conditions": [
                        "processing_time > 2.0",
                        "memory_usage > 0.9"
                    ]
                },
                "description": "処理性能劣化・リソース異常使用",
                "solutions": [
                    "処理時間計測・ボトルネック特定",
                    "メモリ使用量監視",
                    "アルゴリズム最適化検討"
                ]
            }
        ]
    },
    "detection_rules": {
        "system_health": {
            "min_python_files_per_dir": 1,
            "max_import_error_rate": 0.05,
            "min_prediction_success_rate": 0.95,
            "max_test_failure_rate": 0.05
        },
        "performance_monitoring": {
            "max_processing_time": 2.0,
            "max_memory_usage_ratio": 0.9,
            "min_response_time": 0.1,
            "max_response_time": 5.0
        },
        "quality_assurance": {
            "min_test_coverage": 0.8,
            "max_acceptable_failures": 5,
            "min_success_rate": 0.97,
            "critical_failure_threshold": 10
        }
    },
    "new_system_integration": {
        "dev_check_commands": {
            "phase_check": "scripts/management/dev_check.py phase-check",
            "validate": "scripts/management/dev_check.py validate",
            "ml_models": "scripts/management/dev_check.py ml-models",
            "full_check": "scripts/management/dev_check.py full-check",
            "status": "scripts/management/dev_check.py status"
        },
        "important_paths": {
            "core_system": "src/core/",
            "data_layer": "src/data/",
            "ml_system": "src/ml/",
            "strategies": "src/strategies/",
            "trading": "src/trading/",
            "models": "models/production/",
            "tests": "tests/unit/",
            "scripts": "scripts/management/"
        },
        "critical_files": [
            "src/core/config.py",
            "src/data/data_pipeline.py",
            "src/ml/ensemble/ensemble_model.py",
            "scripts/management/dev_check.py",
            "models/production/production_ensemble.pkl"
        ]
    },
    "reporting": {
        "output_formats": ["console", "json"],
        "timezone": "Asia/Tokyo",
        "score_weights": {
            "infrastructure": 0.25,
            "application": 0.30,
            "hidden_issues": 0.30,
            "overall_assessment": 0.15
        },
        "action_priority_levels": ["IMMEDIATE", "HIGH", "MEDIUM", "LOW"],
        "report_retention_days": 30,
        "log_level": "INFO"
    },
    "phase10_features": {
        "description": "Phase 10完了機能との統合",
        "features": [
            "統合管理CLI（dev_check.py）連携",
            "289テスト品質保証体制確認",
            "ProductionEnsemble動作検証",
            "12特徴量最適化システム確認",
            "新システム構造完全対応"
        ],
        "quality_targets": {
            "test_success_rate": 0.997,
            "ml_model_accuracy": 0.85,
            "system_availability": 0.99,
            "response_time_95th": 2.0
        }
    }
}